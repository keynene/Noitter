/*! For license information please see main.b52325a0.js.LICENSE.txt */
!function(){var e={888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function q(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case I:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Te=null;function Ie(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Ee(e){xe?Te?Te.push(e):Te=[e]:xe=e}function Se(){if(xe){var e=xe,t=Te;if(Te=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Te)&&(Ne(),Se())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,qe={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(qe,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,Tt,It,Et=!1,St=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function qt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function zt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Bt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return Tn}var En=F({},fn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function qn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ee(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Tr={};function Ir(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return xr[e]=n[t];return e}l&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Ir("animationend"),Sr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Sr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,qr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=_e(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Er:case Sr:case Cr:u=yn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Jn;else if(Wn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&qn(e,t)?(e=en(),Zt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Re(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Re(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Re(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var wi=[],xi=-1;function Ti(e){return{current:e}}function Ii(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Ei(e,t){xi++,wi[xi]=e.current,e.current=t}var Si={},Ci=Ti(Si),Ni=Ti(!1),Ai=Si;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Ei(Ci,e)):Ii(Ni),Ei(Ni,n)}var Ui=null,ji=!1,qi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!qi&&null!==Ui){qi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{kt=t,qi=!1}}return null}var Bi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){Bi[Wi++]=Ki,Bi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=Bi[--Wi],Bi[Wi]=null,Ki=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ti(null),ga=null,ka=null,ba=null;function _a(){ba=ka=ga=null}function wa(e){var t=ya.current;Ii(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Sa(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function qa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(qa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case R:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ti(Xa),eo=Ti(Xa),to=Ti(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ei(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var so=Ti(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,_o=0;function wo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function So(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Mu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=So(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qo(){return So().memoizedState}function Vo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Bo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return So().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Sa(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ia,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ia,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Nu.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ia,useCallback:Jo,useContext:Ia,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:$o,useReducer:No,useRef:qo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(So(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],So().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ia,useCallback:Jo,useContext:Ia,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:qo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=So();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],So().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Hu=r),hs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=To(e,t,n,r,a,i),n=Io(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ts(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ss(e,t,n,r,i)}function Is(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ou,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ou,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ou,Ru),Ru|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ou,Ru),Ru|=r;return _s(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ta(t,i),n=To(e,t,n,r,a,i),r=Io(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Cs(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ta(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Aa?("function"===typeof l&&(qa(t,n,l,r),u=t.memoizedState),(s=Aa||za(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ia(u):u=Pi(t,u=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Wa(t,o,r,u),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(qa(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var Rs,Os,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),js(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qs(e,n,t);else if(19===e.tag)qs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ks(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Rs(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ii(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Ks(t),null;case 10:return wa(t.type._context),Ks(t),null;case 19:if(Ii(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*$e()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,fu=!1;function hu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||Zs(n,t);case 6:var r=lu,i=fu;lu=null,hu(e,t,n),fu=i,null!==(lu=r)&&(fu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(fu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=fu,lu=n.stateNode.containerInfo,fu=!0,hu(e,t,n),lu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!Js&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tc(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,hu(e,t,n),Js=r):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,fu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,fu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Tc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Tc(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:vu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Tc(e,e.return,m)}}break;case 6:if(vu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tc(e,e.return,m)}}break;case 3:if(vu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=$e())),4&r&&pu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||f,vu(t,e),Js=l):vu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xs=e,f=e.child;null!==f;){for(h=Xs=f;null!==Xs;){switch(p=(d=Xs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){_u(h);continue}}null!==p?(p.return=d,Xs=p):_u(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Tc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vu(t,e),yu(e),4&r&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Tc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Xs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Ys;var c=Js;if(Ys=o,(Js=u)&&!c)for(Xs=i;null!==Xs;)u=(o=Xs).child,22===o.tag&&null!==o.memoizedState?wu(i):null!==u?(u.return=o,Xs=u):wu(i);for(;null!==a;)Xs=a,ku(a,t,n),a=a.sibling;Xs=i,Ys=s,Js=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):bu(e)}}function bu(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Js||512&t.flags&&iu(t)}catch(d){Tc(t,t.return,d)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function _u(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function wu(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Tc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Tc(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Tc(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Tc(t,o,u)}}}catch(u){Tc(t,t.return,u)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var xu,Tu=Math.ceil,Iu=b.ReactCurrentDispatcher,Eu=b.ReactCurrentOwner,Su=b.ReactCurrentBatchConfig,Cu=0,Nu=null,Au=null,Pu=0,Ru=0,Ou=Ti(0),Du=0,Lu=null,Mu=0,Fu=0,Uu=0,ju=null,qu=null,Vu=0,zu=1/0,Bu=null,Wu=!1,Hu=null,Ku=null,Gu=!1,Qu=null,Yu=0,Ju=0,$u=null,Xu=-1,Zu=0;function ec(){return 0!==(6&Cu)?$e():-1!==Xu?Xu:Xu=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Ju)throw Ju=0,$u=null,Error(a(185));yt(e,n,r),0!==(2&Cu)&&e===Nu||(e===Nu&&(0===(2&Cu)&&(Fu|=n),4===Du&&sc(e,Pu)),rc(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(zu=$e()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Nu?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(uc.bind(null,e)):Vi(uc.bind(null,e)),oi((function(){0===(6&Cu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xu=-1,Zu=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cu;Cu|=2;var o=pc();for(Nu===e&&Pu===t||(Bu=null,zu=$e()+500,hc(e,t));;)try{gc();break}catch(u){dc(e,u)}_a(),Iu.current=o,Cu=i,null!==Au?t=0:(Nu=null,Pu=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,hc(e,0),sc(e,r),rc(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,hc(e,0),sc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,qu,Bu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Vu+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,qu,Bu),t);break}_c(e,qu,Bu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,qu,Bu),r);break}_c(e,qu,Bu);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=qu,qu=n,null!==t&&oc(t)),e}function oc(e){null===qu?qu=e:qu.push.apply(qu,e)}function sc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Cu))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,hc(e,0),sc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,qu,Bu),rc(e,$e()),null}function cc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(zu=$e()+500,ji&&zi())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Cu)&&wc();var t=Cu;Cu|=1;var n=Su.transition,r=kt;try{if(Su.transition=null,kt=1,e)return e()}finally{kt=r,Su.transition=n,0===(6&(Cu=t))&&zi()}}function fc(){Ru=Ou.current,Ii(Ou)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ni),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(so);break;case 10:wa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Nu=e,Au=e=Oc(e.current,null),Pu=Ru=t,Du=0,Lu=null,Uu=Fu=Mu=0,qu=ju=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=Au;try{if(_a(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Eu.current=null,null===n||null===n.return){Du=1,Lu=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Du&&(Du=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function pc(){var e=Iu.current;return Iu.current=os,null===e?os:e}function vc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Nu||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Nu,Pu)}function mc(e,t){var n=Cu;Cu|=2;var r=pc();for(Nu===e&&Pu===t||(Bu=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(_a(),Cu=n,Iu.current=r,null!==Au)throw Error(a(261));return Nu=null,Pu=0,Du}function yc(){for(;null!==Au;)kc(Au)}function gc(){for(;null!==Au&&!Ye();)kc(Au)}function kc(e){var t=xu(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?bc(e):Au=t,Eu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ru)))return void(Au=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Du=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Du&&(Du=5)}function _c(e,t,n){var r=kt,i=Su.transition;try{Su.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Qu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Au=Nu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Nc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Su.transition,Su.transition=null;var s=kt;kt=1;var u=Cu;Cu|=4,Eu.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Tc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Je(),Cu=u,kt=s,Su.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Yu=i),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Hu,Hu=null,e;0!==(1&Yu)&&0!==e.tag&&wc(),o=e.pendingLanes,0!==(1&o)?e===$u?Ju++:(Ju=0,$u=e):Ju=0,zi()}(e,t,n,r)}finally{Su.transition=i,kt=r}return null}function wc(){if(null!==Qu){var e=bt(Yu),t=Su.transition,n=kt;try{if(Su.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xs=l;null!==Xs;){var f=Xs;switch(f.tag){case 0:case 11:case 15:nu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xs=h;else for(;null!==Xs;){var d=(f=Xs).sibling,p=f.return;if(au(f),f===l){Xs=null;break}if(null!==d){d.return=p,Xs=d;break}Xs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xs=g;break e}Xs=o.return}}var k=e.current;for(Xs=k;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=k;null!==Xs;){if(0!==(2048&(u=Xs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){Tc(u,u.return,w)}if(u===s){Xs=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Xs=_;break e}Xs=u.return}}if(Cu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Su.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Pu&n)===n&&(4===Du||3===Du&&(130023424&Pu)===Pu&&500>$e()-Vu?hc(e,0):Uu|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case T:s=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case S:s=9;break e;case C:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,o,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=qc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ei(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ta(t,n),i=To(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Ia(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Bs(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ta(t,n),Ba(t,r,i),Ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Is(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Cu)&&(zu=$e()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Tt=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,_i,Ee,Se,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,_(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(w);else{var t=r(l);null!==t&&D(_,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&D(_,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,T=!1,I=null,E=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(T=!1,I=null)}}else T=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){y(A,0)};function O(e){I=e,T||(T=!0,x())}function D(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,D(_,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".971d2733.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="Noitter:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Noitter/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkNoitter=self.webpackChunkNoitter||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ki},SDK_VERSION:function(){return $a},_DEFAULT_ENTRY_NAME:function(){return Ma},_addComponent:function(){return qa},_addOrOverwriteComponent:function(){return Va},_apps:function(){return Ua},_clearComponents:function(){return Ha},_components:function(){return ja},_getProvider:function(){return Ba},_registerComponent:function(){return za},_removeServiceInstance:function(){return Wa},deleteApp:function(){return to},getApp:function(){return Za},getApps:function(){return eo},initializeApp:function(){return Xa},onLog:function(){return io},registerVersion:function(){return ro},setLogLevel:function(){return ao}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return s(e)}(e)||f(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function T(e){var t=_();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function I(e,t,n){return I=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},I.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}function S(e){return o(e)||f(e)||u(e)||c()}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var A,P="popstate";function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function O(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function L(e,t,n,r){return void 0===n&&(n=null),N({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?F(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function M(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function F(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function U(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){var e=t.Pop,n=p();if(null!=n){var r=n-d;f=e,d=n,h&&h({action:f,location:y.location,delta:r})}else O(!1,"You are trying to block a POP navigation to a location that was not created by @remix-run/router. The block will fail silently in production, but in general you should do all navigation with the router (instead of using window.history.pushState directly) to avoid this situation.")}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:M(e);return R(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(N({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(P,v),h=e,function(){s.removeEventListener(P,v),h=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=L(y.location,e,n);r&&r(i,e);var a=D(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(PN){s.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=L(y.location,e,n);r&&r(i,e);var a=D(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}function j(e,t,n){void 0===n&&(n="/");var r=Q(("string"===typeof t?F(t):t).pathname||"/",n);if(null==r)return null;var i=q(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=H(i[o],G(r));return a}function q(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(R(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=Z([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),q(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:W(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=C(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=S(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=V(i.join("/")),u=[];return u.push.apply(u,h(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,h(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(A||(A={}));var z=/^:\w+$/,B=function(e){return"*"===e};function W(e,t){var n=e.split("/"),r=n.length;return n.some(B)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!B(e)})).reduce((function(e,t){return e+(z.test(t)?3:""===t?1:10)}),r)}function H(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=K({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:Z([i,l.pathname]),pathnameBase:ee(Z([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=Z([i,l.pathnameBase]))}return a}function K(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Y("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(PN){return Y(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+PN+")."),e}}(c[n]||"",t),e}),{});return{params:f,pathname:s,pathnameBase:u,pattern:e}}function G(e){try{return decodeURI(e)}catch(PN){return Y(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+PN+")."),e}}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Y(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function J(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function $(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function X(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=F(e):(R(!(i=N({},e)).pathname||!i.pathname.includes("?"),J("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),J("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),J("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?F(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:te(a),hash:ne(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var Z=function(e){return e.join("/").replace(/\/\/+/g,"/")},ee=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},te=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ne=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},re=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(E(Error));var ie=y((function e(t,n,r,i){d(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function ae(e){return e instanceof ie}var oe=["post","put","patch","delete"],se=(new Set(oe),["get"].concat(oe));new Set(se),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}var ce="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},le=r.useState,fe=r.useEffect,he=r.useLayoutEffect,de=r.useDebugValue;function pe(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ce(n,r)}catch(PN){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var ve=r.createContext(null);var me=r.createContext(null);var ye=r.createContext(null);var ge=r.createContext(null);var ke=r.createContext(null);var be=r.createContext({outlet:null,matches:[]});var _e=r.createContext(null);function we(){return null!=r.useContext(ke)}function xe(){return we()||R(!1),r.useContext(ke).location}function Te(){we()||R(!1);var e=r.useContext(ge),t=e.basename,n=e.navigator,i=r.useContext(be).matches,a=xe().pathname,o=JSON.stringify($(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var u=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=X(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:Z([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return u}function Ie(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(be).matches,a=xe().pathname,o=JSON.stringify($(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return X(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Ee(){var e=function(){var e,t=r.useContext(_e),n=Re(Ce.UseRouteError),i=Oe(Ce.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:o},"errorElement")," props on\xa0",r.createElement("code",{style:o},"<Route>")))}var Se,Ce,Ne=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(be.Provider,{value:this.props.routeContext},r.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function Ae(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ve);return a&&a.static&&a.staticContext&&n.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(be.Provider,{value:t},i)}function Pe(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||R(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(Ee,null):null,l=t.concat(i.slice(0,s+1)),f=function(){return r.createElement(Ae,{match:o,routeContext:{outlet:e,matches:l}},u?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===s)?r.createElement(Ne,{location:n.location,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function Re(e){var t=r.useContext(me);return t||R(!1),t}function Oe(e){var t=function(e){var t=r.useContext(be);return t||R(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||R(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(Se||(Se={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ce||(Ce={}));var De;function Le(e){R(!1)}function Me(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,f=e.static,h=void 0!==f&&f;we()&&R(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof s&&(s=F(s));var v=s,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,_=void 0===b?"":b,w=v.state,x=void 0===w?null:w,T=v.key,I=void 0===T?"default":T,E=r.useMemo((function(){var e=Q(y,d);return null==e?null:{pathname:e,search:k,hash:_,state:x,key:I}}),[d,y,k,_,x,I]);return null==E?null:r.createElement(ge.Provider,{value:p},r.createElement(ke.Provider,{children:o,value:{location:E,navigationType:c}}))}function Fe(e){var n=e.children,i=e.location,a=r.useContext(ve);return function(e,n){we()||R(!1);var i,a=r.useContext(ge).navigator,o=r.useContext(me),s=r.useContext(be).matches,u=s[s.length-1],c=u?u.params:{},l=(u&&u.pathname,u?u.pathnameBase:"/"),f=(u&&u.route,xe());if(n){var h,d="string"===typeof n?F(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||R(!1),i=d}else i=f;var p=i.pathname||"/",v=j(e,{pathname:"/"===l?p:p.slice(l.length)||"/"}),m=Pe(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Z([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Z([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),s,o||void 0);return n&&m?r.createElement(ke.Provider,{value:{location:ue({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},m):m}(a&&!n?a.router.routes:je(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(De||(De={}));var Ue=new Promise((function(){}));r.Component;function je(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Le&&R(!1),e.props.index&&e.props.children&&R(!1);var a=[].concat(h(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=je(e.props.children,a)),n.push(o)}else n.push.apply(n,je(e.props.children,t))})),n}function qe(){qe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new E(i||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ve(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(PN){return void n(PN)}s.done?t(u):Promise.resolve(u).then(r,i)}function ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ve(a,r,i,o,s,"next",e)}function s(e){Ve(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"===typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xe=function(){},Ze={},et={},tt=null,nt={mark:Xe,measure:Xe};try{"undefined"!==typeof window&&(Ze=window),"undefined"!==typeof document&&(et=document),"undefined"!==typeof MutationObserver&&(tt=MutationObserver),"undefined"!==typeof performance&&(nt=performance)}catch(UU){}var rt,it,at,ot,st,ut=(Ze.navigator||{}).userAgent,ct=void 0===ut?"":ut,lt=Ze,ft=et,ht=tt,dt=nt,pt=(lt.document,!!ft.documentElement&&!!ft.head&&"function"===typeof ft.addEventListener&&"function"===typeof ft.createElement),vt=~ct.indexOf("MSIE")||~ct.indexOf("Trident/"),mt="___FONT_AWESOME___",yt="svg-inline--fa",gt="data-fa-i2svg",kt="data-fa-pseudo-element",bt="data-prefix",_t="data-icon",wt="fontawesome-i2svg",xt=["HTML","HEAD","STYLE","SCRIPT"],Tt=function(){try{return!0}catch(UU){return!1}}(),It="classic",Et="sharp",St=[It,Et];function Ct(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[It]}})}var Nt=Ct((Ge(rt={},It,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Ge(rt,Et,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),rt)),At=Ct((Ge(it={},It,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ge(it,Et,{solid:"fass",regular:"fasr"}),it)),Pt=Ct((Ge(at={},It,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ge(at,Et,{fass:"fa-solid",fasr:"fa-regular"}),at)),Rt=Ct((Ge(ot={},It,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ge(ot,Et,{"fa-solid":"fass","fa-regular":"fasr"}),ot)),Ot=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,Dt="fa-layers-text",Lt=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Mt=Ct((Ge(st={},It,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ge(st,Et,{900:"fass",400:"fasr"}),st)),Ft=[1,2,3,4,5,6,7,8,9,10],Ut=Ft.concat([11,12,13,14,15,16,17,18,19,20]),jt=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],qt="duotone-group",Vt="swap-opacity",zt="primary",Bt="secondary",Wt=new Set;Object.keys(At[It]).map(Wt.add.bind(Wt)),Object.keys(At[Et]).map(Wt.add.bind(Wt));var Ht=[].concat(St,Ye(Wt),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",qt,Vt,zt,Bt]).concat(Ft.map((function(e){return"".concat(e,"x")}))).concat(Ut.map((function(e){return"w-".concat(e)}))),Kt=lt.FontAwesomeConfig||{};if(ft&&"function"===typeof ft.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Qe(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=ft.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(Kt[r]=i)}))}var Gt={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:yt,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Kt.familyPrefix&&(Kt.cssPrefix=Kt.familyPrefix);var Qt=We(We({},Gt),Kt);Qt.autoReplaceSvg||(Qt.observeMutations=!1);var Yt={};Object.keys(Gt).forEach((function(e){Object.defineProperty(Yt,e,{enumerable:!0,set:function(t){Qt[e]=t,Jt.forEach((function(e){return e(Yt)}))},get:function(){return Qt[e]}})})),Object.defineProperty(Yt,"familyPrefix",{enumerable:!0,set:function(e){Qt.cssPrefix=e,Jt.forEach((function(e){return e(Yt)}))},get:function(){return Qt.cssPrefix}}),lt.FontAwesomeConfig=Yt;var Jt=[];var $t=16,Xt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Zt(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function en(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function tn(e){return e.classList?en(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function nn(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function rn(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function an(e){return e.size!==Xt.size||e.x!==Xt.x||e.y!==Xt.y||e.rotate!==Xt.rotate||e.flipX||e.flipY}function on(){var e="fa",t=yt,n=Yt.cssPrefix,r=Yt.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var sn=!1;function un(){Yt.autoAddCss&&!sn&&(!function(e){if(e&&pt){var t=ft.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ft.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}ft.head.insertBefore(t,r)}}(on()),sn=!0)}var cn={mixout:function(){return{dom:{css:on,insertCss:un}}},hooks:function(){return{beforeDOMElementCreation:function(){un()},beforeI2svg:function(){un()}}}},ln=lt||{};ln[mt]||(ln[mt]={}),ln[mt].styles||(ln[mt].styles={}),ln[mt].hooks||(ln[mt].hooks={}),ln[mt].shims||(ln[mt].shims=[]);var fn=ln[mt],hn=[],dn=!1;function pn(e){pt&&(dn?setTimeout(e,0):hn.push(e))}function vn(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?nn(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(nn(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(vn).join(""),"</").concat(t,">")}function mn(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}pt&&((dn=(ft.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ft.readyState))||ft.addEventListener("DOMContentLoaded",(function e(){ft.removeEventListener("DOMContentLoaded",e),dn=1,hn.map((function(e){return e()}))})));var yn=function(e,t,n,r){var i,a,o,s=Object.keys(e),u=s.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<u;i++)o=c(o,e[a=s[i]],a,e);return o};function gn(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function kn(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function bn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=kn(t);"function"!==typeof fn.hooks.addPack||i?fn.styles[e]=We(We({},fn.styles[e]||{}),a):fn.hooks.addPack(e,kn(t)),"fas"===e&&bn("fa",t)}var _n,wn,xn,Tn=fn.styles,In=fn.shims,En=(Ge(_n={},It,Object.values(Pt[It])),Ge(_n,Et,Object.values(Pt[Et])),_n),Sn=null,Cn={},Nn={},An={},Pn={},Rn={},On=(Ge(wn={},It,Object.keys(Nt[It])),Ge(wn,Et,Object.keys(Nt[Et])),wn);function Dn(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~Ht.indexOf(n))?null:a}var Ln=function(){var e=function(e){return yn(Tn,(function(t,n,r){return t[r]=yn(n,e,{}),t}),{})};Cn=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),Nn=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),Rn=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in Tn||Yt.autoFetchSvg,n=yn(In,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});An=n.names,Pn=n.unicodes,Sn=qn(Yt.styleDefault,{family:Yt.familyDefault})};function Mn(e,t){return(Cn[e]||{})[t]}function Fn(e,t){return(Rn[e]||{})[t]}function Un(e){return An[e]||{prefix:null,iconName:null}}function jn(){return Sn}!function(e){Jt.push(e)}((function(e){Sn=qn(e.styleDefault,{family:Yt.familyDefault})})),Ln();function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.family,r=void 0===n?It:n,i=Nt[r][e],a=At[r][e]||At[r][i],o=e in fn.styles?e:null;return a||o||null}var Vn=(Ge(xn={},It,Object.keys(Pt[It])),Ge(xn,Et,Object.keys(Pt[Et])),xn);function zn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.skipLookups,i=void 0!==r&&r,a=(Ge(t={},It,"".concat(Yt.cssPrefix,"-").concat(It)),Ge(t,Et,"".concat(Yt.cssPrefix,"-").concat(Et)),t),o=null,s=It;(e.includes(a[It])||e.some((function(e){return Vn[It].includes(e)})))&&(s=It),(e.includes(a[Et])||e.some((function(e){return Vn[Et].includes(e)})))&&(s=Et);var u=e.reduce((function(e,t){var n=Dn(Yt.cssPrefix,t);if(Tn[t]?(t=En[s].includes(t)?Rt[s][t]:t,o=t,e.prefix=t):On[s].indexOf(t)>-1?(o=t,e.prefix=qn(t,{family:s})):n?e.iconName=n:t!==Yt.replacementClass&&t!==a[It]&&t!==a[Et]&&e.rest.push(t),!i&&e.prefix&&e.iconName){var r="fa"===o?Un(e.iconName):{},u=Fn(e.prefix,e.iconName);r.prefix&&(o=null),e.iconName=r.iconName||u||e.iconName,e.prefix=r.prefix||e.prefix,"far"!==e.prefix||Tn.far||!Tn.fas||Yt.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return(e.includes("fa-brands")||e.includes("fab"))&&(u.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(u.prefix="fad"),u.prefix||s!==Et||!Tn.fass&&!Yt.autoFetchSvg||(u.prefix="fass",u.iconName=Fn(u.prefix,u.iconName)||u.iconName),"fa"!==u.prefix&&"fa"!==o||(u.prefix=jn()||"fas"),u}var Bn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=We(We({},e.definitions[t]||{}),i[t]),bn(t,i[t]);var n=Pt[It][t];n&&bn(n,i[t]),Ln()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&Ke(t.prototype,n),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wn=[],Hn={},Kn={},Gn=Object.keys(Kn);function Qn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=Hn[e]||[];return a.forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function Yn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Hn[e]||[];i.forEach((function(e){e.apply(null,n)}))}function Jn(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Kn[e]?Kn[e].apply(null,t):void 0}function $n(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||jn();if(t)return t=Fn(n,t)||t,mn(Xn.definitions,n,t)||mn(fn.styles,n,t)}var Xn=new Bn,Zn={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pt?(Yn("beforeI2svg",e),Jn("pseudoElements2svg",e),Jn("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Yt.autoReplaceSvg&&(Yt.autoReplaceSvg=!0),Yt.observeMutations=!0,pn((function(){nr({autoReplaceSvgRoot:t}),Yn("watch",e)}))}},er={icon:function(e){if(null===e)return null;if("object"===He(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Fn(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=qn(e[0]);return{prefix:n,iconName:Fn(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Yt.cssPrefix,"-"))>-1||e.match(Ot))){var r=zn(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||jn(),iconName:Fn(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=jn();return{prefix:i,iconName:Fn(i,e)||e}}}},tr={noAuto:function(){Yt.autoReplaceSvg=!1,Yt.observeMutations=!1,Yn("noAuto")},config:Yt,dom:Zn,parse:er,library:Xn,findIconDefinition:$n,toHtml:vn},nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?ft:t;(Object.keys(fn.styles).length>0||Yt.autoFetchSvg)&&pt&&Yt.autoReplaceSvg&&tr.dom.i2svg({node:n})};function rr(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return vn(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(pt){var t=ft.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function ir(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,u=e.title,c=e.maskId,l=e.titleId,f=e.extra,h=e.watchable,d=void 0!==h&&h,p=r.found?r:n,v=p.width,m=p.height,y="fak"===i,g=[Yt.replacementClass,a?"".concat(Yt.cssPrefix,"-").concat(a):""].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),k={children:[],attributes:We(We({},f.attributes),{},{"data-prefix":i,"data-icon":a,class:g,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(m)})},b=y&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/m*16*.0625,"em")}:{};d&&(k.attributes[gt]=""),u&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(l||Zt())},children:[u]}),delete k.attributes.title);var _=We(We({},k),{},{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:s,styles:We(We({},b),f.styles)}),w=r.found&&n.found?Jn("generateAbstractMask",_)||{children:[],attributes:{}}:Jn("generateAbstractIcon",_)||{children:[],attributes:{}},x=w.children,T=w.attributes;return _.children=x,_.attributes=T,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(Yt.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:We(We({},i),{},{id:o}),children:r}]}]}(_):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(an(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=rn(We(We({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(_)}function ar(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,u=void 0!==s&&s,c=We(We(We({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});u&&(c[gt]="");var l=We({},o.styles);an(i)&&(l.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,i=e.height,a=void 0===i?16:i,o=e.startCentered,s=void 0!==o&&o,u="";return u+=s&&vt?"translate(".concat(t.x/$t-r/2,"em, ").concat(t.y/$t-a/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/$t,"em), calc(-50% + ").concat(t.y/$t,"em)) "):"translate(".concat(t.x/$t,"em, ").concat(t.y/$t,"em) "),u+="scale(".concat(t.size/$t*(t.flipX?-1:1),", ").concat(t.size/$t*(t.flipY?-1:1),") "),u+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);var f=rn(l);f.length>0&&(c.style=f);var h=[];return h.push({tag:"span",attributes:c,children:[t]}),a&&h.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),h}function or(e){var t=e.content,n=e.title,r=e.extra,i=We(We(We({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=rn(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var sr=fn.styles;function ur(e){var t=e[0],n=e[1],r=Qe(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Yt.cssPrefix,"-").concat(qt)},children:[{tag:"path",attributes:{class:"".concat(Yt.cssPrefix,"-").concat(Bt),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Yt.cssPrefix,"-").concat(zt),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var cr={found:!1,width:512,height:512};function lr(e,t){var n=t;return"fa"===t&&null!==Yt.styleDefault&&(t=jn()),new Promise((function(r,i){Jn("missingIconAbstract");if("fa"===n){var a=Un(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&sr[t]&&sr[t][e])return r(ur(sr[t][e]));!function(e,t){Tt||Yt.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(We(We({},cr),{},{icon:Yt.showMissingIcons&&e&&Jn("missingIconAbstract")||{}}))}))}var fr=function(){},hr=Yt.measurePerformance&&dt&&dt.mark&&dt.measure?dt:{mark:fr,measure:fr},dr='FA "6.3.0"',pr=function(e){hr.mark("".concat(dr," ").concat(e," ends")),hr.measure("".concat(dr," ").concat(e),"".concat(dr," ").concat(e," begins"),"".concat(dr," ").concat(e," ends"))},vr=function(e){return hr.mark("".concat(dr," ").concat(e," begins")),function(){return pr(e)}},mr=function(){};function yr(e){return"string"===typeof(e.getAttribute?e.getAttribute(gt):null)}function gr(e){return ft.createElementNS("http://www.w3.org/2000/svg",e)}function kr(e){return ft.createElement(e)}function br(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,r=void 0===n?"svg"===e.tag?gr:kr:n;if("string"===typeof e)return ft.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])}));var a=e.children||[];return a.forEach((function(e){i.appendChild(br(e,{ceFn:r}))})),i}var _r={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(br(e),t)})),null===t.getAttribute(gt)&&Yt.keepOriginalSource){var n=ft.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~tn(t).indexOf(Yt.replacementClass))return _r.replace(e);var r=new RegExp("".concat(Yt.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===Yt.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return vn(e)})).join("\n");t.setAttribute(gt,""),t.innerHTML=a}};function wr(e){e()}function xr(e,t){var n="function"===typeof t?t:mr;if(0===e.length)n();else{var r=wr;"async"===Yt.mutateApproach&&(r=lt.requestAnimationFrame||wr),r((function(){var t=!0===Yt.autoReplaceSvg?_r.replace:_r[Yt.autoReplaceSvg]||_r.replace,r=vr("mutate");e.map(t),r(),n()}))}}var Tr=!1;function Ir(){Tr=!0}function Er(){Tr=!1}var Sr=null;function Cr(e){if(ht&&Yt.observeMutations){var t=e.treeCallback,n=void 0===t?mr:t,r=e.nodeCallback,i=void 0===r?mr:r,a=e.pseudoElementsCallback,o=void 0===a?mr:a,s=e.observeMutationsRoot,u=void 0===s?ft:s;Sr=new ht((function(e){if(!Tr){var t=jn();en(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!yr(e.addedNodes[0])&&(Yt.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&Yt.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&yr(e.target)&&~jt.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(bt):null,n=e.getAttribute?e.getAttribute(_t):null;return t&&n}(e.target)){var r=zn(tn(e.target)),a=r.prefix,s=r.iconName;e.target.setAttribute(bt,a||t),s&&e.target.setAttribute(_t,s)}else(u=e.target)&&u.classList&&u.classList.contains&&u.classList.contains(Yt.replacementClass)&&i(e.target);var u}))}})),pt&&Sr.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Nr(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}function Ar(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=zn(tn(e));return i.prefix||(i.prefix=jn()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(Nn[e]||{})[t]}(i.prefix,e.innerText)||Mn(i.prefix,gn(e.innerText))),!i.iconName&&Yt.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function Pr(e){var t=en(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Yt.autoA11y&&(n?t["aria-labelledby"]="".concat(Yt.replacementClass,"-title-").concat(r||Zt()):(t["aria-hidden"]="true",t.focusable="false")),t}function Rr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=Ar(e),r=n.iconName,i=n.prefix,a=n.rest,o=Pr(e),s=Qn("parseNodeAttributes",{},e),u=t.styleParser?Nr(e):[];return We({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Xt,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:u,attributes:o}},s)}var Or=fn.styles;function Dr(e){var t="nest"===Yt.autoReplaceSvg?Rr(e,{styleParser:!1}):Rr(e);return~t.extra.classes.indexOf(Dt)?Jn("generateLayersText",e,t):Jn("generateSvgReplacementMutation",e,t)}var Lr=new Set;function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!pt)return Promise.resolve();var n=ft.documentElement.classList,r=function(e){return n.add("".concat(wt,"-").concat(e))},i=function(e){return n.remove("".concat(wt,"-").concat(e))},a=Yt.autoFetchSvg?Lr:St.map((function(e){return"fa-".concat(e)})).concat(Object.keys(Or));a.includes("fa")||a.push("fa");var o=[".".concat(Dt,":not([").concat(gt,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(gt,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=en(e.querySelectorAll(o))}catch(UU){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var u=vr("onTree"),c=s.reduce((function(e,t){try{var n=Dr(t);n&&e.push(n)}catch(UU){Tt||"MissingIcon"===UU.name&&console.error(UU)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){xr(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),u(),e()}))})).catch((function(e){u(),n(e)}))}))}function Fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Dr(e).then((function(e){e&&xr([e],t)}))}St.map((function(e){Lr.add("fa-".concat(e))})),Object.keys(Nt[It]).map(Lr.add.bind(Lr)),Object.keys(Nt[Et]).map(Lr.add.bind(Lr)),Lr=Ye(Lr);var Ur=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Xt:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,s=void 0===o?null:o,u=t.maskId,c=void 0===u?null:u,l=t.title,f=void 0===l?null:l,h=t.titleId,d=void 0===h?null:h,p=t.classes,v=void 0===p?[]:p,m=t.attributes,y=void 0===m?{}:m,g=t.styles,k=void 0===g?{}:g;if(e){var b=e.prefix,_=e.iconName,w=e.icon;return rr(We({type:"icon"},e),(function(){return Yn("beforeDOMElementCreation",{iconDefinition:e,params:t}),Yt.autoA11y&&(f?y["aria-labelledby"]="".concat(Yt.replacementClass,"-title-").concat(d||Zt()):(y["aria-hidden"]="true",y.focusable="false")),ir({icons:{main:ur(w),mask:s?ur(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:_,transform:We(We({},Xt),r),symbol:a,title:f,maskId:c,titleId:d,extra:{attributes:y,styles:k,classes:v}})}))}},jr={mixout:function(){return{icon:(e=Ur,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:$n(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:$n(i||{})),e(r,We(We({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=Mr,e.nodeCallback=Fr,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?ft:t,r=e.callback;return Mr(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,s=t.symbol,u=t.mask,c=t.maskId,l=t.extra;return new Promise((function(t,f){Promise.all([lr(n,a),u.iconName?lr(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(u){var f=Qe(u,2),h=f[0],d=f[1];t([e,ir({icons:{main:h,mask:d},prefix:a,iconName:n,transform:o,symbol:s,maskId:c,title:r,titleId:i,extra:l,watchable:!0})])})).catch(f)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=rn(e.styles);return o.length>0&&(r.style=o),an(a)&&(t=Jn("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},qr={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return rr({type:"layer"},(function(){Yn("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(Yt.cssPrefix,"-layers")].concat(Ye(r)).join(" ")},children:n}]}))}}}},Vr={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,s=void 0===o?{}:o,u=t.styles,c=void 0===u?{}:u;return rr({type:"counter",content:e},(function(){return Yn("beforeDOMElementCreation",{content:e,params:t}),or({content:e.toString(),title:r,extra:{attributes:s,styles:c,classes:["".concat(Yt.cssPrefix,"-layers-counter")].concat(Ye(a))}})}))}}}},zr={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Xt:n,i=t.title,a=void 0===i?null:i,o=t.classes,s=void 0===o?[]:o,u=t.attributes,c=void 0===u?{}:u,l=t.styles,f=void 0===l?{}:l;return rr({type:"text",content:e},(function(){return Yn("beforeDOMElementCreation",{content:e,params:t}),ar({content:e,transform:We(We({},Xt),r),title:a,extra:{attributes:c,styles:f,classes:["".concat(Yt.cssPrefix,"-layers-text")].concat(Ye(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if(vt){var s=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();a=u.width/s,o=u.height/s}return Yt.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,ar({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},Br=new RegExp('"',"ug"),Wr=[1105920,1112319];function Hr(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=en(e.children).filter((function(e){return e.getAttribute(kt)===t}))[0],o=lt.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(Lt),u=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(a&&!s)return e.removeChild(a),r();if(s&&"none"!==c&&""!==c){var l=o.getPropertyValue("content"),f=~["Sharp"].indexOf(s[2])?Et:It,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?At[f][s[2].toLowerCase()]:Mt[f][u],d=function(e){var t=e.replace(Br,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=Wr[0]&&n<=Wr[1],i=2===t.length&&t[0]===t[1];return{value:gn(i?t[0]:t),isSecondary:r||i}}(l),p=d.value,v=d.isSecondary,m=s[0].startsWith("FontAwesome"),y=Mn(h,p),g=y;if(m){var k=function(e){var t=Pn[e],n=Mn("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);k.iconName&&k.prefix&&(y=k.iconName,h=k.prefix)}if(!y||v||a&&a.getAttribute(bt)===h&&a.getAttribute(_t)===g)r();else{e.setAttribute(n,g),a&&e.removeChild(a);var b={iconName:null,title:null,titleId:null,prefix:null,transform:Xt,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},_=b.extra;_.attributes[kt]=t,lr(y,h).then((function(i){var a=ir(We(We({},b),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:h,iconName:g,extra:_,watchable:!0})),o=ft.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return vn(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function Kr(e){return Promise.all([Hr(e,"::before"),Hr(e,"::after")])}function Gr(e){return e.parentNode!==document.head&&!~xt.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(kt)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function Qr(e){if(pt)return new Promise((function(t,n){var r=en(e.querySelectorAll("*")).filter(Gr).map(Kr),i=vr("searchPseudoElements");Ir(),Promise.all(r).then((function(){i(),Er(),t()})).catch((function(){i(),Er(),n()}))}))}var Yr=!1,Jr=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},$r={mixout:function(){return{parse:{transform:function(e){return Jr(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=Jr(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),u="rotate(".concat(n.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(u)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:We({},c.outer),children:[{tag:"g",attributes:We({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:We(We({},t.icon.attributes),c.path)}]}]}}}},Xr={x:0,y:0,width:"100%",height:"100%"};function Zr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var ei={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?zn(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=jn()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,s=e.transform,u=i.width,c=i.icon,l=a.width,f=a.icon,h=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:l,iconWidth:u}),d={tag:"rect",attributes:We(We({},Xr),{},{fill:"white"})},p=c.children?{children:c.children.map(Zr)}:{},v={tag:"g",attributes:We({},h.inner),children:[Zr(We({tag:c.tag,attributes:We(We({},c.attributes),h.path)},p))]},m={tag:"g",attributes:We({},h.outer),children:[v]},y="mask-".concat(o||Zt()),g="clip-".concat(o||Zt()),k={tag:"mask",attributes:We(We({},Xr),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(t=f,"g"===t.tag?t.children:[t])},k]};return n.push(b,{tag:"rect",attributes:We({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(y,")")},Xr)}),{children:n,attributes:r}}}},ti={provides:function(e){var t=!1;lt.matchMedia&&(t=lt.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:We(We({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=We(We({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:We(We({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:We(We({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:We(We({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:We(We({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:We(We({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:We(We({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:We(We({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;Wn=e,Hn={},Object.keys(Kn).forEach((function(e){-1===Gn.indexOf(e)&&delete Kn[e]})),Wn.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===He(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){Hn[e]||(Hn[e]=[]),Hn[e].push(r[e])}))}e.provides&&e.provides(Kn)}))}([cn,jr,qr,Vr,zr,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=Qr,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?ft:t;Yt.searchPseudoElements&&Qr(n)}}},{mixout:function(){return{dom:{unwatch:function(){Ir(),Yr=!0}}}},hooks:function(){return{bootstrap:function(){Cr(Qn("mutationObserverCallbacks",{}))},noAuto:function(){Sr&&Sr.disconnect()},watch:function(e){var t=e.observeMutationsRoot;Yr?Er():Cr(Qn("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},$r,ei,ti,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:tr});var ni=tr.parse,ri=tr.icon,ii=n(7),ai=n.n(ii);function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function li(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fi(e){return function(e){if(Array.isArray(e))return hi(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function di(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var pi=["style"];function vi(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=di(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{})}var mi=!1;try{mi=!0}catch(UU){}function yi(e){return e&&"object"===ui(e)&&e.prefix&&e.iconName&&e.icon?e:ni.icon?ni.icon(e):null===e?null:e&&"object"===ui(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function gi(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?ci({},e,t):{}}var ki=r.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,a=e.className,o=e.title,s=e.titleId,u=e.maskId,c=yi(n),l=gi("classes",[].concat(fi(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,s=e.flash,u=e.spin,c=e.spinPulse,l=e.spinReverse,f=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,m=e.flip,y=e.size,g=e.rotation,k=e.pull,b=(ci(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":u,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(y),"undefined"!==typeof y&&null!==y),ci(t,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),ci(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),ci(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(e)),fi(a.split(" ")))),f=gi("transform","string"===typeof e.transform?ni.transform(e.transform):e.transform),h=gi("mask",yi(r)),d=ri(c,si(si(si(si({},l),f),h),{},{symbol:i,title:o,titleId:s,maskId:u}));if(!d)return function(){var e;!mi&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var p=d.abstract,v={ref:t};return Object.keys(e).forEach((function(t){ki.defaultProps.hasOwnProperty(t)||(v[t]=e[t])})),bi(p[0],v)}));ki.displayName="FontAwesomeIcon",ki.propTypes={beat:ai().bool,border:ai().bool,beatFade:ai().bool,bounce:ai().bool,className:ai().string,fade:ai().bool,flash:ai().bool,mask:ai().oneOfType([ai().object,ai().array,ai().string]),maskId:ai().string,fixedWidth:ai().bool,inverse:ai().bool,flip:ai().oneOf([!0,!1,"horizontal","vertical","both"]),icon:ai().oneOfType([ai().object,ai().array,ai().string]),listItem:ai().bool,pull:ai().oneOf(["right","left"]),pulse:ai().bool,rotation:ai().oneOf([0,90,180,270]),shake:ai().bool,size:ai().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ai().bool,spinPulse:ai().bool,spinReverse:ai().bool,symbol:ai().oneOfType([ai().bool,ai().string]),title:ai().string,titleId:ai().string,transform:ai().oneOfType([ai().string,ai().object]),swapOpacity:ai().bool},ki.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var bi=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=vi(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[di(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,u=li(r,pi);return a.attrs.style=si(si({},a.attrs.style),s),t.apply(void 0,[n.tag,si(si({},a.attrs),u)].concat(fi(i)))}.bind(null,r.createElement),_i={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},wi={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},xi={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};function Ti(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ii=!1,Ei=!1,Si="${JSCORE_VERSION}",Ci=function(e,t){if(!e)throw Ni(t)},Ni=function(e){return new Error("Firebase Database ("+Si+") INTERNAL ASSERT FAILED: "+e)},Ai=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ai(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ri=function(e){var t=Ai(e);return Pi.encodeByteArray(t,!0)},Oi=function(e){return Ri(e).replace(/\./g,"")},Di=function(e){try{return Pi.decodeString(e,!0)}catch(UU){console.error("base64Decode failed: ",UU)}return null};function Li(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Li(e[n],t[n]));return e}var Mi=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Fi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oi(JSON.stringify({alg:"none",type:"JWT"})),Oi(JSON.stringify(a)),""].join(".")}function Ui(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ji(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ui())}function qi(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(UU){return!1}}function Vi(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function zi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Bi(){var e=Ui();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Wi(){return!0===Ii||!0===Ei}function Hi(){return"object"===typeof indexedDB}var Ki=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),Gi.prototype.create),a}return y(n)}(E(Error)),Gi=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Qi(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ki(n,a,t);return o}}]),e}();function Qi(e,t){return e.replace(Yi,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Yi=/\{\$([^}]+)}/g;function Ji(e){return JSON.parse(e)}function $i(e){return JSON.stringify(e)}var Xi=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ji(Di(a[0])||""),n=Ji(Di(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(UU){}return{header:t,claims:n,data:r,signature:i}};function Zi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ea(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ta(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function na(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ra(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(ia(s)&&ia(u)){if(!ra(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ia(e){return null!==e&&"object"===typeof e}function aa(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function oa(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function sa(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ua=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return y(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ca(e,t){var n=new la(e,t);return n.subscribe.bind(n)}var la=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=fa),void 0===r.error&&(r.error=fa),void 0===r.complete&&(r.complete=fa);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(UU){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(UU){"undefined"!==typeof console&&console.error&&console.error(UU)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function fa(){}var ha=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function da(e,t){return"".concat(e," failed: ").concat(t," argument ")}function pa(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(da(e,t)+"must be a valid function.")}function va(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(da(e,t)+"must be a valid context object.")}var ma=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ya(e){return e&&e._delegate?e._delegate:e}var ga=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ka="[DEFAULT]",ba=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Mi;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(UU){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(UU){if(r)return null;throw UU}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ka})}catch(UU){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(UU){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],f=this.normalizeInstanceIdentifier(u);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(zI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ka?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(zI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return this.component?this.component.multipleInstances?e:ka:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var _a,wa,xa=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ba(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ta=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wa||(wa={}));var Ia,Ea,Sa={debug:wa.DEBUG,verbose:wa.VERBOSE,info:wa.INFO,warn:wa.WARN,error:wa.ERROR,silent:wa.SILENT},Ca=wa.INFO,Na=(Ti(_a={},wa.DEBUG,"log"),Ti(_a,wa.VERBOSE,"log"),Ti(_a,wa.INFO,"info"),Ti(_a,wa.WARN,"warn"),Ti(_a,wa.ERROR,"error"),_a),Aa=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Na[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Pa=function(){function e(t){d(this,e),this.name=t,this._logLevel=Ca,this._logHandler=Aa,this._userLogHandler=null,Ta.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in wa))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Sa[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.DEBUG].concat(t)),this._logHandler.apply(this,[this,wa.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.VERBOSE].concat(t)),this._logHandler.apply(this,[this,wa.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.INFO].concat(t)),this._logHandler.apply(this,[this,wa.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.WARN].concat(t)),this._logHandler.apply(this,[this,wa.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wa.ERROR].concat(t)),this._logHandler.apply(this,[this,wa.ERROR].concat(t))}}]),e}();var Ra=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Oa="@firebase/app",Da="0.7.11",La=new Pa("@firebase/app"),Ma="[DEFAULT]",Fa=(Ti(Ia={},Oa,"fire-core"),Ti(Ia,"@firebase/app-compat","fire-core-compat"),Ti(Ia,"@firebase/analytics","fire-analytics"),Ti(Ia,"@firebase/analytics-compat","fire-analytics-compat"),Ti(Ia,"@firebase/app-check","fire-app-check"),Ti(Ia,"@firebase/app-check-compat","fire-app-check-compat"),Ti(Ia,"@firebase/auth","fire-auth"),Ti(Ia,"@firebase/auth-compat","fire-auth-compat"),Ti(Ia,"@firebase/database","fire-rtdb"),Ti(Ia,"@firebase/database-compat","fire-rtdb-compat"),Ti(Ia,"@firebase/functions","fire-fn"),Ti(Ia,"@firebase/functions-compat","fire-fn-compat"),Ti(Ia,"@firebase/installations","fire-iid"),Ti(Ia,"@firebase/installations-compat","fire-iid-compat"),Ti(Ia,"@firebase/messaging","fire-fcm"),Ti(Ia,"@firebase/messaging-compat","fire-fcm-compat"),Ti(Ia,"@firebase/performance","fire-perf"),Ti(Ia,"@firebase/performance-compat","fire-perf-compat"),Ti(Ia,"@firebase/remote-config","fire-rc"),Ti(Ia,"@firebase/remote-config-compat","fire-rc-compat"),Ti(Ia,"@firebase/storage","fire-gcs"),Ti(Ia,"@firebase/storage-compat","fire-gcs-compat"),Ti(Ia,"@firebase/firestore","fire-fst"),Ti(Ia,"@firebase/firestore-compat","fire-fst-compat"),Ti(Ia,"fire-js","fire-js"),Ti(Ia,"firebase","fire-js-all"),Ia),Ua=new Map,ja=new Map;function qa(e,t){try{e.container.addComponent(t)}catch(UU){La.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),UU)}}function Va(e,t){e.container.addOrOverwriteComponent(t)}function za(e){var t=e.name;if(ja.has(t))return La.debug("There were multiple attempts to register component ".concat(t,".")),!1;ja.set(t,e);var n,r=C(Ua.values());try{for(r.s();!(n=r.n()).done;){qa(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ba(e,t){return e.container.getProvider(t)}function Wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ma;Ba(e,t).clearInstance(n)}function Ha(){ja.clear()}var Ka,Ga,Qa=(Ti(Ea={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ti(Ea,"bad-app-name","Illegal App name: '{$appName}"),Ti(Ea,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ti(Ea,"app-deleted","Firebase App named '{$appName}' already deleted"),Ti(Ea,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ti(Ea,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ea),Ya=new Gi("app","Firebase",Qa),Ja=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ya.create("app-deleted",{appName:this._name})}}]),e}(),$a="9.6.1";function Xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ma,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ya.create("bad-app-name",{appName:String(i)});var a=Ua.get(i);if(a){if(ra(e,a.options)&&ra(r,a.config))return a;throw Ya.create("duplicate-app",{appName:i})}var o,s=new xa(i),u=C(ja.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new Ja(e,r,s);return Ua.set(i,l),l}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ma,t=Ua.get(e);if(!t)throw Ya.create("no-app",{appName:e});return t}function eo(){return Array.from(Ua.values())}function to(e){return no.apply(this,arguments)}function no(){return(no=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ua.has(n)){e.next=6;break}return Ua.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(e,t,n){var r,i=null!==(r=Fa[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void La.warn(s.join(" "))}za(new ga("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function io(e,t){if(null!==e&&"function"!==typeof e)throw Ya.create("invalid-log-argument");!function(e,t){var n,r=C(Ta);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Sa[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:wa[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ao(e){var t;t=e,Ta.forEach((function(e){e.setLogLevel(t)}))}Ka="",za(new ga("platform-logger",(function(e){return new Ra(e)}),"PRIVATE")),ro(Oa,Da,Ka),ro(Oa,Da,"esm2017"),ro("fire-js","");var oo=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,qa(t,new ga("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),to(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ma;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ma;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){qa(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Va(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),so=(Ti(Ga={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ti(Ga,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ga),uo=new Gi("app-compat","Firebase",so);var co=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Xa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Zi(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ro,setLogLevel:ao,onLog:io,apps:null,SDK_VERSION:$a,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(za(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw uo.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Li(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Zi(n,e=e||Ma))throw uo.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(oo);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Li(n,e)},createSubscribe:ca,ErrorFactory:Gi,deepExtend:Li}),n}(),lo=new Pa("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){lo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var fo=self.firebase.SDK_VERSION;fo&&fo.indexOf("LITE")>=0&&lo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ho=co;!function(e){ro("@firebase/app-compat","0.1.12",e)}();function po(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function vo(){return vo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=po(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},vo.apply(this,arguments)}ho.registerVersion("firebase","9.6.1","app-compat");function mo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var yo;Object.create;var go="facebook.com",ko="github.com",bo="google.com",_o="password",wo="twitter.com",xo="EMAIL_SIGNIN",To="PASSWORD_RESET",Io="RECOVER_EMAIL",Eo="REVERT_SECOND_FACTOR_ADDITION",So="VERIFY_AND_CHANGE_EMAIL",Co="VERIFY_EMAIL";function No(){return Ti({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ao=function(){var e;return Ti(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ti(e,"argument-error",""),Ti(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ti(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ti(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ti(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ti(e,"cordova-not-ready","Cordova framework is not ready."),Ti(e,"cors-unsupported","This browser is not supported."),Ti(e,"credential-already-in-use","This credential is already associated with a different user account."),Ti(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ti(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ti(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ti(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ti(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ti(e,"email-already-in-use","The email address is already in use by another account."),Ti(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ti(e,"expired-action-code","The action code has expired."),Ti(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ti(e,"internal-error","An internal AuthError has occurred."),Ti(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ti(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ti(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ti(e,"invalid-auth-event","An internal AuthError has occurred."),Ti(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ti(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ti(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ti(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ti(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ti(e,"invalid-email","The email address is badly formatted."),Ti(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ti(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ti(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ti(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ti(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ti(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ti(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ti(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ti(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ti(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ti(e,"wrong-password","The password is invalid or the user does not have a password."),Ti(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ti(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ti(e,"invalid-provider-id","The specified provider ID is invalid."),Ti(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ti(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ti(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ti(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ti(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ti(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ti(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ti(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ti(e,"missing-continue-uri","A continue URL must be provided in the request."),Ti(e,"missing-iframe-start","An internal AuthError has occurred."),Ti(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ti(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ti(e,"missing-multi-factor-info","No second factor identifier is provided."),Ti(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ti(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ti(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ti(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ti(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ti(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ti(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ti(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ti(e,"no-auth-event","An internal AuthError has occurred."),Ti(e,"no-such-provider","User was not linked to an account with the given provider."),Ti(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ti(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ti(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ti(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ti(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ti(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ti(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ti(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ti(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ti(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ti(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ti(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ti(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ti(e,"timeout","The operation has timed out."),Ti(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ti(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ti(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ti(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ti(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ti(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ti(e,"unverified-email","The operation requires a verified email."),Ti(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ti(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ti(e,"user-disabled","The user account has been disabled by an administrator."),Ti(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ti(e,"user-signed-out",""),Ti(e,"weak-password","The password must be 6 characters long or more."),Ti(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ti(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Po=No,Ro=new Gi("auth","Firebase",No()),Oo=new Pa("@firebase/auth");function Do(e){if(Oo.logLevel<=wa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Oo.error.apply(Oo,["Auth (".concat($a,"): ").concat(e)].concat(n))}}function Lo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jo.apply(void 0,[e].concat(n))}function Mo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jo.apply(void 0,[e].concat(n))}function Fo(e,t,n){var r=Object.assign(Object.assign({},Po()),Ti({},t,n));return new Gi("auth","Firebase",r).create(t,{appName:e.name})}function Uo(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Lo(e,"argument-error"),Fo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function jo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return Ro.create.apply(Ro,[e].concat(n))}function qo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jo.apply(void 0,[t].concat(r))}}function Vo(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Do(t),new Error(t)}function zo(e,t){e||Vo(t)}var Bo=new Map;function Wo(e){zo(e instanceof Function,"Expected a class definition");var t=Bo.get(e);return t?(zo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bo.set(e,t),t)}function Ho(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ko(){return"http:"===Go()||"https:"===Go()}function Go(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Qo=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,zo(n>t,"Short delay should be less than long delay!"),this.isMobile=ji()||zi()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ko()||Vi()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Yo(e,t){zo(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Jo=function(){function e(){d(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),$o=(Ti(yo={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ti(yo,"MISSING_CUSTOM_TOKEN","internal-error"),Ti(yo,"INVALID_IDENTIFIER","invalid-email"),Ti(yo,"MISSING_CONTINUE_URI","internal-error"),Ti(yo,"INVALID_PASSWORD","wrong-password"),Ti(yo,"MISSING_PASSWORD","internal-error"),Ti(yo,"EMAIL_EXISTS","email-already-in-use"),Ti(yo,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ti(yo,"INVALID_IDP_RESPONSE","invalid-credential"),Ti(yo,"INVALID_PENDING_TOKEN","invalid-credential"),Ti(yo,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ti(yo,"MISSING_REQ_TYPE","internal-error"),Ti(yo,"EMAIL_NOT_FOUND","user-not-found"),Ti(yo,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ti(yo,"EXPIRED_OOB_CODE","expired-action-code"),Ti(yo,"INVALID_OOB_CODE","invalid-action-code"),Ti(yo,"MISSING_OOB_CODE","internal-error"),Ti(yo,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ti(yo,"INVALID_ID_TOKEN","invalid-user-token"),Ti(yo,"TOKEN_EXPIRED","user-token-expired"),Ti(yo,"USER_NOT_FOUND","user-token-expired"),Ti(yo,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ti(yo,"INVALID_CODE","invalid-verification-code"),Ti(yo,"INVALID_SESSION_INFO","invalid-verification-id"),Ti(yo,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ti(yo,"MISSING_SESSION_INFO","missing-verification-id"),Ti(yo,"SESSION_EXPIRED","code-expired"),Ti(yo,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ti(yo,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ti(yo,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ti(yo,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ti(yo,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ti(yo,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ti(yo,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ti(yo,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ti(yo,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ti(yo,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ti(yo,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),yo),Xo=new Qo(3e4,6e4);function Zo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function es(e,t,n,r){return ts.apply(this,arguments)}function ts(){return ts=ze(qe().mark((function e(t,n,r,i){var a,o=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ns(t,a,ze(qe().mark((function e(){var a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=aa(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Jo.fetch()(os(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(e,t,n){return rs.apply(this,arguments)}function rs(){return rs=ze(qe().mark((function e(t,n,r){var i,a,o,s,u,c,f,h,d,p;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},$o),n),e.prev=2,a=new ss(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw us(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),f=l(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw us(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw us(t,"email-already-in-use",s);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Fo(t,p,d);case 30:Lo(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ki)){e.next=37;break}throw e.t0;case 37:Lo(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),rs.apply(this,arguments)}function is(e,t,n,r){return as.apply(this,arguments)}function as(){return as=ze(qe().mark((function e(t,n,r,i){var a,o,s=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,es(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Lo(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}function os(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Yo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ss=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Mo(n.auth,"timeout"))}),Xo.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function us(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Mo(e,t,r);return i.customData._tokenResponse=n,i}function cs(e,t){return ls.apply(this,arguments)}function ls(){return(ls=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t){return hs.apply(this,arguments)}function hs(){return(hs=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e,t){return ps.apply(this,arguments)}function ps(){return(ps=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(UU){}}function ms(){return ms=ze(qe().mark((function e(t){var n,r,i,a,o,s,u=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ya(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,qo((a=gs(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:vs(ys(a.auth_time)),issuedAtTime:vs(ys(a.iat)),expirationTime:vs(ys(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}function ys(e){return 1e3*Number(e)}function gs(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Do("JWT malformed, contained fewer than 3 sections"),null;try{var a=Di(r);return a?JSON.parse(a):(Do("Failed to decode base64 JWT payload"),null)}catch(UU){return Do("Caught error parsing JWT payload as JSON",UU),null}}function ks(e,t){return bs.apply(this,arguments)}function bs(){return bs=ze(qe().mark((function e(t,n){var r=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ki&&_s(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),bs.apply(this,arguments)}function _s(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ws=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xs=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=vs(this.lastLoginAt),this.creationTime=vs(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ts(e){return Is.apply(this,arguments)}function Is(){return Is=ze(qe().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ks(t,ds(r,{idToken:i}));case 6:qo(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Cs(o.providerUserInfo):[],u=Ss(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xs(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}function Es(){return(Es=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ya(t),e.next=3,Ts(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function Cs(e){return e.map((function(e){var t=e.providerId,n=mo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ns(e,t){return As.apply(this,arguments)}function As(){return(As=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(t,{},ze(qe().mark((function e(){var r,i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=aa({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=os(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Jo.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ps=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){qo(e.idToken,"internal-error"),qo("undefined"!==typeof e.idToken,"internal-error"),qo("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=gs(e);return qo(t,"internal-error"),qo("undefined"!==typeof t.exp,"internal-error"),qo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ze(qe().mark((function e(t){var n,r=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],qo(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ns(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Vo("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(qo("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(qo("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(qo("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Rs(e,t){qo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Os=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=mo(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new xs(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ks(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(qo(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ms.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Es.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(qo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){qo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ze(qe().mark((function e(t){var n,r,i=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ts(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ks(this,cs(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,_=n.isAnonymous,w=n.providerData,x=n.stsTokenManager;qo(k&&x,t,"internal-error");var T=Ps.fromJSON(this.name,x);qo("string"===typeof k,t,"internal-error"),Rs(f,t.name),Rs(h,t.name),qo("boolean"===typeof b,t,"internal-error"),qo("boolean"===typeof _,t,"internal-error"),Rs(d,t.name),Rs(p,t.name),Rs(v,t.name),Rs(m,t.name),Rs(y,t.name),Rs(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:y,lastLoginAt:g});return w&&Array.isArray(w)&&(I.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=ze(qe().mark((function t(n,r){var i,a,o,s=arguments;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ps).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ts(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ds=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ds.type="NONE";var Ls=Ds;function Ms(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Fs=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ms(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ms("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Os._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ze(qe().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Wo(Ls),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Wo(Ls),s=Ms(i,n.config.apiKey,n.name),u=null,c=C(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Os._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Us(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(js(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ws(t))return"Blackberry";if(Hs(t))return"Webos";if(qs(t))return"Safari";if((t.includes("chrome/")||Vs(t))&&!t.includes("edge/"))return"Chrome";if(Bs(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/firefox\//i.test(e)}function qs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Vs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/crios\//i.test(e)}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/iemobile/i.test(e)}function Bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/android/i.test(e)}function Ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/blackberry/i.test(e)}function Hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/webos/i.test(e)}function Ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/iphone|ipad|ipod/i.test(e)}function Gs(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return Ks(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Qs(){return Bi()&&10===document.documentMode}function Ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return Ks(e)||Bs(e)||Hs(e)||Ws(e)||/windows phone/i.test(e)||zs(e)}function Js(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Us(Ui());break;case"Worker":t="".concat(Us(Ui()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($a,"/").concat(r)}var $s=function(){function e(t,n){d(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zs(this),this.idTokenSubscription=new Zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ro,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Wo(t)),this._initializationPromise=this.queue(ze(qe().mark((function r(){var i,a;return qe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Fs.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ze(qe().mark((function e(t){var n,r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return qo(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ts(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ya(t):null)&&qo(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ze(qe().mark((function e(t){var n=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&qo(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ze(qe().mark((function n(){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Wo(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Gi("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return qo(n=t&&Wo(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Fs.create(this,[Wo(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ze(qe().mark((function e(t){var n=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return qo(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return qo(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Js(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ti({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xs(e){return ya(e)}var Zs=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=ca((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return qo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function eu(e,t,n){var r=Xs(e);qo(r._canInitEmulator,r,"emulator-config-failed"),qo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=tu(t),o=function(e){var t=tu(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:nu(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:nu(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function tu(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function nu(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ru=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return Vo("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Vo("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Vo("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Vo("not implemented")}}]),e}();function iu(e,t){return au.apply(this,arguments)}function au(){return(au=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:resetPassword",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ou(e,t){return su.apply(this,arguments)}function su(){return(su=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uu(e,t){return cu.apply(this,arguments)}function cu(){return(cu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:update",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return(fu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signInWithPassword",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e,t){return du.apply(this,arguments)}function du(){return(du=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:sendOobCode",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pu(e,t){return vu.apply(this,arguments)}function vu(){return(vu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(e,t){return yu.apply(this,arguments)}function yu(){return(yu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e,t){return ku.apply(this,arguments)}function ku(){return(ku=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bu(e,t){return _u.apply(this,arguments)}function _u(){return(_u=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hu(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(e,t){return xu.apply(this,arguments)}function xu(){return(xu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signInWithEmailLink",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t){return Iu.apply(this,arguments)}function Iu(){return(Iu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signInWithEmailLink",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eu=function(e){k(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",lu(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wu(t,{email:this._email,oobCode:this._password}));case 5:Lo(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ou(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Tu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Lo(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ru);function Su(e,t){return Cu.apply(this,arguments)}function Cu(){return(Cu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signInWithIdp",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nu=function(e){k(n,e);var t=T(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Su(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Su(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Su(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=aa(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lo("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=mo(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ru);function Au(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:sendVerificationCode",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(){return(Ru=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signInWithPhoneNumber",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(){return(Ou=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is(t,"POST","/v1/accounts:signInWithPhoneNumber",Zo(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw us(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Du=Ti({},"USER_NOT_FOUND","user-not-found");function Lu(){return(Lu=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",is(t,"POST","/v1/accounts:signInWithPhoneNumber",Zo(t,r),Du));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mu=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ru.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ou.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Lu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ru);var Fu=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=oa(sa(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);qo(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=oa(sa(e)).link,n=t?oa(sa(t)).deep_link_id:null,r=oa(sa(e)).deep_link_id;return(r?oa(sa(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(zI){return null}}}]),e}();var Uu=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return Eu._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Fu.parseLink(t);return qo(n,"argument-error"),Eu._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Uu.PROVIDER_ID="password",Uu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Uu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ju=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),qu=function(e){k(n,e);var t=T(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(ju),Vu=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return qo(e.idToken||e.accessToken,"argument-error"),Nu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return qo("providerId"in t&&"signInMethod"in t,"argument-error"),Nu._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(UU){return null}}}]),n}(qu),zu=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return Nu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(zI){return null}}}]),n}(qu);zu.FACEBOOK_SIGN_IN_METHOD="facebook.com",zu.PROVIDER_ID="facebook.com";var Bu=function(e){k(n,e);var t=T(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return Nu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(zI){return null}}}]),n}(qu);Bu.GOOGLE_SIGN_IN_METHOD="google.com",Bu.PROVIDER_ID="google.com";var Wu=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return Nu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(zI){return null}}}]),n}(qu);Wu.GITHUB_SIGN_IN_METHOD="github.com",Wu.PROVIDER_ID="github.com";var Hu=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return Su(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Su(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Su(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ru),Ku=function(e){k(n,e);var t=T(n);function n(e){return d(this,n),qo(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Hu.fromJSON(e);return qo(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Hu._create(r,n)}catch(UU){return null}}}]),n}(ju),Gu=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return Nu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(zI){return null}}}]),n}(qu);function Qu(e,t){return Yu.apply(this,arguments)}function Yu(){return(Yu=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signUp",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Gu.TWITTER_SIGN_IN_METHOD="twitter.com",Gu.PROVIDER_ID="twitter.com";var Ju=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ze(qe().mark((function t(n,r,i){var a,o,s,u,c=arguments;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Os._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=$u(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ze(qe().mark((function t(n,r,i){var a;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=$u(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function $u(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Xu(){return Xu=ze(qe().mark((function e(t){var n,r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xs(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ju({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Qu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ju._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}var Zu=function(e){k(n,e);var t=T(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(w(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ki);function ec(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Zu._fromErrorAndOperation(e,n,t,r);throw n}))}function tc(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function nc(e,t){return rc.apply(this,arguments)}function rc(){return rc=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ya(t),e.next=3,oc(!0,r,n);case 3:return e.t0=fs,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=tc(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return ac=ze(qe().mark((function e(t,n){var r,i,a=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ks,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ju._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(e,t,n){return sc.apply(this,arguments)}function sc(){return(sc=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ts(n);case 2:i=tc(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",qo(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uc(e,t){return cc.apply(this,arguments)}function cc(){return cc=ze(qe().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ks(t,ec(i,a,n,t),r);case 6:return qo((o=e.sent).idToken,i,"internal-error"),qo(s=gs(o.idToken),i,"internal-error"),u=s.sub,qo(t.uid===u,i,"user-mismatch"),e.abrupt("return",Ju._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Lo(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),cc.apply(this,arguments)}function lc(e,t){return fc.apply(this,arguments)}function fc(){return fc=ze(qe().mark((function e(t,n){var r,i,a,o,s=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,ec(t,i,n);case 4:return a=e.sent,e.next=7,Ju._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}function hc(e,t){return dc.apply(this,arguments)}function dc(){return(dc=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lc(Xs(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(e,t){return vc.apply(this,arguments)}function vc(){return(vc=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ya(t),e.next=3,oc(!1,r,n.providerId);case 3:return e.abrupt("return",ic(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mc(e,t){return yc.apply(this,arguments)}function yc(){return(yc=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uc(ya(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return(kc=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",is(t,"POST","/v1/accounts:signInWithCustomToken",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bc(){return(bc=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xs(t),e.next=3,gc(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ju._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _c=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?wc._fromServerResponse(e,t):Lo(e,"internal-error")}}]),e}(),wc=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_c);function xc(e,t,n){var r;qo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Tc(){return(Tc=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ya(t),a={requestType:"PASSWORD_RESET",email:n},r&&xc(i,a,r),e.next=5,mu(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ic(){return(Ic=ze(qe().mark((function e(t,n,r){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iu(ya(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ec(){return(Ec=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu(ya(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sc(e,t){return Cc.apply(this,arguments)}function Cc(){return(Cc=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ya(t),e.next=3,iu(r,{oobCode:n});case 3:i=e.sent,qo(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return qo(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:qo(i.mfaInfo,r,"internal-error");case 13:qo(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=_c._fromServerResponse(Xs(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(){return(Nc=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sc(ya(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ac(e,t,n){return Pc.apply(this,arguments)}function Pc(){return(Pc=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xs(t),e.next=3,Qu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Ju._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rc(){return(Rc=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ya(t),a={requestType:"EMAIL_SIGNIN",email:n},qo(r.handleCodeInApp,i,"argument-error"),r&&xc(i,a,r),e.next=6,gu(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oc(){return(Oc=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ya(t),qo((a=Uu.credentialWithLink(n,r||Ho()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",hc(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dc(e,t){return Lc.apply(this,arguments)}function Lc(){return(Lc=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:createAuthUri",Zo(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mc(){return(Mc=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko()?Ho():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Dc(ya(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fc(){return(Fc=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ya(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&xc(r.auth,a,n),e.next=8,pu(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uc(){return(Uc=ze(qe().mark((function e(t,n,r){var i,a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ya(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&xc(i.auth,o,r),e.next=8,bu(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jc(e,t){return qc.apply(this,arguments)}function qc(){return(qc=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vc(){return(Vc=ze(qe().mark((function e(t,n){var r,i,a,o,s,u,c;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ya(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ks(a,jc(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zc(e,t,n){return Bc.apply(this,arguments)}function Bc(){return(Bc=ze(qe().mark((function e(t,n,r){var i,a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ks(t,ou(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wc=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Hc=function(e){k(n,e);var t=T(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Wc),Kc=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Wc),Gc=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(Hc),Qc=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return y(n)}(Wc),Yc=function(e){k(n,e);var t=T(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(Hc);function Jc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=gs(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Wc(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Kc(a,i);case"github.com":return new Gc(a,i);case"google.com":return new Qc(a,i);case"twitter.com":return new Yc(a,i,e.screenName||null);case"custom":case"anonymous":return new Wc(a,null);default:return new Wc(a,r,i)}}(n)}var $c=function(){function e(t,n){d(this,e),this.type=t,this.credential=n}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ti({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Xc=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Xs(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return _c._fromServerResponse(r,e)}));qo(i.mfaPendingCredential,r,"internal-error");var o=$c._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ze(qe().mark((function e(t){var a,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ju._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return qo(n.user,r,"internal-error"),e.abrupt("return",Ju._forOperation(n.user,n.operationType,s));case 17:Lo(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Zc(e,t){return es(e,"POST","/v2/accounts/mfaEnrollment:start",Zo(e,t))}var el=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return _c._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=$c,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ks(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ze(qe().mark((function e(t){var n,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ks(this.user,es(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Zo(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),tl=new WeakMap;var nl="__sak",rl=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(nl,"1"),this.storage.removeItem(nl),Promise.resolve(!0)):Promise.resolve(!1)}catch(zI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var il=function(e){k(n,e);var t=T(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ui();return qs(e)||Ks(e)}()&&function(){try{return!(!window||window===window.top)}catch(UU){return!1}}(),e.fallbackToPolling=Ys(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Qs()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ze(qe().mark((function e(t,r){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ze(qe().mark((function e(t){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(rl);il.type="LOCAL";var al=il,ol=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(rl);ol.type="SESSION";var sl=ol;function ul(e){return Promise.all(e.map(function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var cl=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ze(qe().mark((function e(t){var n,r,i,a,o,s,u,c;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ul(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ll(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}cl.receivers=[];var fl=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ze(qe().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=ll("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function hl(){return window}function dl(){return"undefined"!==typeof hl().WorkerGlobalScope&&"function"===typeof hl().importScripts}function pl(){return vl.apply(this,arguments)}function vl(){return(vl=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ml(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var yl="firebaseLocalStorageDb",gl="firebaseLocalStorage",kl="fbase_key",bl=function(){function e(t){d(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function _l(e,t){return e.transaction([gl],t?"readwrite":"readonly").objectStore(gl)}function wl(){var e=indexedDB.deleteDatabase(yl);return new bl(e).toPromise()}function xl(){var e=indexedDB.open(yl,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gl,{keyPath:kl})}catch(UU){n(UU)}})),e.addEventListener("success",ze(qe().mark((function n(){var r;return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gl)){n.next=12;break}return r.close(),n.next=5,wl();case 5:return n.t0=t,n.next=8,xl();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Tl(e,t,n){return Il.apply(this,arguments)}function Il(){return Il=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_l(t,!0).put((Ti(i={},kl,n),Ti(i,"value",r),i)),e.abrupt("return",new bl(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Il.apply(this,arguments)}function El(e,t){return Sl.apply(this,arguments)}function Sl(){return Sl=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_l(t,!1).get(n),e.next=3,new bl(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Cl(e,t){var n=_l(e,!0).delete(t);return new bl(n).toPromise()}var Nl=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,xl();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dl()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ze(qe().mark((function e(){var t=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=cl._getInstance(dl()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ze(qe().mark((function e(n,r){var i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ze(qe().mark((function e(){var t,n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pl();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new fl(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ml()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,xl();case 5:return t=e.sent,e.next=8,Tl(t,nl,"1");case 8:return e.next=10,Cl(t,nl);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ze(qe().mark((function e(t,n){var r=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Tl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return El(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ze(qe().mark((function e(t){var n=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Cl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ze(qe().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=_l(e,!1).getAll();return new bl(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=C(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Nl.type="LOCAL";var Al=Nl;function Pl(e,t){return es(e,"POST","/v2/accounts/mfaSignIn:start",Zo(e,t))}function Rl(e){return Ol.apply(this,arguments)}function Ol(){return(Ol=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dl(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Mo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ll(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ml=1e12,Fl=function(){function e(t){d(this,e),this.auth=t,this.counter=Ml,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ul(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Ml;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Ml;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Ml,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ul=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;qo(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(UU){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(UU){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var jl=Ll("rcb"),ql=new Qo(3e4,6e4),Vl="https://www.google.com/recaptcha/api.js?",zl=function(){function e(){d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!hl().grecaptcha}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return qo(Bl(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(hl().grecaptcha):new Promise((function(r,i){var a=hl().setTimeout((function(){i(Mo(e,"network-request-failed"))}),ql.get());hl()[jl]=function(){hl().clearTimeout(a),delete hl()[jl];var o=hl().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Mo(e,"internal-error"))},Dl("".concat(Vl,"?").concat(aa({onload:jl,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Mo(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!hl().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Bl(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Wl=function(){function e(){d(this,e)}return y(e,[{key:"load",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Fl(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Hl="recaptcha",Kl={theme:"light",type:"image"},Gl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Kl),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=Hl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xs(r),this.isInvisible="invisible"===this.parameters.size,qo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;qo(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wl:new zl,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=ze(qe().mark((function e(){var t,n,r,i=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(UU){return Promise.reject(UU)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){qo(!this.parameters.sitekey,this.auth,"argument-error"),qo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=hl()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){qo(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ze(qe().mark((function e(){var t,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qo(Ko()&&!dl(),this.auth,"internal-error"),e.next=3,Ql();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Rl(this.auth);case 8:qo(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return qo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ql(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Yl=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=Mu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Jl(){return(Jl=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xs(t),e.next=3,ef(i,n,ya(r));case 3:return a=e.sent,e.abrupt("return",new Yl(a,(function(e){return hc(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(e,t,n){return Xl.apply(this,arguments)}function Xl(){return(Xl=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ya(t),e.next=3,oc(!1,i,"phone");case 3:return e.next=5,ef(i.auth,n,ya(r));case 5:return a=e.sent,e.abrupt("return",new Yl(a,(function(e){return pc(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zl(){return(Zl=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ya(t),e.next=3,ef(i.auth,n,ya(r));case 3:return a=e.sent,e.abrupt("return",new Yl(a,(function(e){return mc(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ef(e,t,n){return tf.apply(this,arguments)}function tf(){return tf=ze(qe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,qo("string"===typeof a,t,"argument-error"),qo(r.type===Hl,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return qo("enroll"===s.type,t,"internal-error"),e.next=13,Zc(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return qo("signin"===s.type,t,"internal-error"),qo(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Pl(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Au(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),tf.apply(this,arguments)}function nf(){return(nf=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ic(ya(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rf=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Xs(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return ef(this.auth,e,ya(t))}}],[{key:"credential",value:function(e,t){return Mu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Mu._fromTokenResponse(n,r):null}}]),e}();function af(e,t){return t?Wo(t):(qo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rf.PROVIDER_ID="phone",rf.PHONE_SIGN_IN_METHOD="phone";var of=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return Su(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Su(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Su(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ru);function sf(e){return lc(e.auth,new of(e),e.bypassAuthState)}function uf(e){var t=e.auth,n=e.user;return qo(n,t,"internal-error"),uc(n,new of(e),e.bypassAuthState)}function cf(e){return lf.apply(this,arguments)}function lf(){return(lf=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,qo(r=t.user,n,"internal-error"),e.abrupt("return",ic(r,new of(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ff=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ze(qe().mark((function t(n,r){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ze(qe().mark((function e(t){var n,r,i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sf;case"linkViaPopup":case"linkViaRedirect":return cf;case"reauthViaPopup":case"reauthViaRedirect":return uf;default:Lo(this.auth,"internal-error")}}},{key:"resolve",value:function(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),hf=new Qo(2e3,1e4);function df(e,t,n){return pf.apply(this,arguments)}function pf(){return(pf=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xs(t),Uo(t,n,ju),a=af(i,r),o=new gf(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vf(){return(vf=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uo((i=ya(t)).auth,n,ju),a=af(i.auth,r),o=new gf(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mf(e,t,n){return yf.apply(this,arguments)}function yf(){return(yf=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uo((i=ya(t)).auth,n,ju),a=af(i.auth,r),o=new gf(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gf=function(e){k(n,e);var t=T(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=w(s),s}return y(n,[{key:"executeNotNull",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return qo(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ze(qe().mark((function e(){var t,n=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zo(1===this.filter.length,"Popup operations only handle one event"),t=ll(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Mo(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Mo(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Mo(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,hf.get())}()}}]),n}(ff);gf.currentPopupAction=null;var kf=new Map,bf=function(e){k(n,e);var t=T(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=ze(qe().mark((function e(){var t,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kf.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,_f(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,vo(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:kf.set(this.auth._key(),t);case 21:return this.bypassAuthState||kf.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ze(qe().mark((function e(t){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",vo(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",vo(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ff);function _f(e,t){return wf.apply(this,arguments)}function wf(){return(wf=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ef(n),i=If(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xf(e,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",If(t)._set(Ef(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function If(e){return Wo(e._redirectPersistence)}function Ef(e){return Ms("pendingRedirect",e.config.apiKey,e.name)}function Sf(e,t,n){return function(e,t,n){return Cf.apply(this,arguments)}(e,t,n)}function Cf(){return(Cf=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xs(t),Uo(t,n,ju),a=af(i,r),e.next=5,xf(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nf(e,t,n){return function(e,t,n){return Af.apply(this,arguments)}(e,t,n)}function Af(){return(Af=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uo((i=ya(t)).auth,n,ju),a=af(i.auth,r),e.next=5,xf(a,i.auth);case 5:return e.next=7,Ff(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pf(e,t,n){return function(e,t,n){return Rf.apply(this,arguments)}(e,t,n)}function Rf(){return(Rf=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uo((i=ya(t)).auth,n,ju),a=af(i.auth,r),e.next=5,oc(!1,i,n.providerId);case 5:return e.next=7,xf(a,i.auth);case 7:return e.next=9,Ff(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Of(e,t){return Df.apply(this,arguments)}function Df(){return(Df=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xs(t)._initializationPromise;case 2:return e.abrupt("return",Lf(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lf(e,t){return Mf.apply(this,arguments)}function Mf(){return Mf=ze(qe().mark((function e(t,n){var r,i,a,o,s,u=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Xs(t),a=af(i,n),o=new bf(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}function Ff(e){return Uf.apply(this,arguments)}function Uf(){return(Uf=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ll("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jf=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Vf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Mo(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qf(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(qf(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function qf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Vf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function zf(e){return Bf.apply(this,arguments)}function Bf(){return Bf=ze(qe().mark((function e(t){var n,r=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",es(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Bf.apply(this,arguments)}var Wf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hf=/^https?/;function Kf(){return(Kf=ze(qe().mark((function e(t){var n,r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,zf(t);case 4:n=e.sent,r=n.authorizedDomains,i=C(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Gf(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Lo(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Gf(e){var t=Ho(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Hf.test(r))return!1;if(Wf.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Qf=new Qo(3e4,6e4);function Yf(){var e=hl().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Jf=null;function $f(e){return Jf=Jf||function(e){return new Promise((function(t,n){var r,i,a;function o(){Yf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Yf(),n(Mo(e,"network-request-failed"))},timeout:Qf.get()})}if(null===(i=null===(r=hl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=hl().gapi)||void 0===a?void 0:a.load)){var s=Ll("iframefcb");return hl()[s]=function(){gapi.load?o():n(Mo(e,"network-request-failed"))},Dl("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Jf=null,e}))}(e),Jf}var Xf=new Qo(5e3,15e3),Zf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function th(e){var t=e.config;qo(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Yo(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:$a},i=eh.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(aa(r).slice(1))}function nh(e){return rh.apply(this,arguments)}function rh(){return rh=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$f(t);case 2:return n=e.sent,qo(r=hl().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:th(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zf,dontclear:!0},(function(e){return new Promise(function(){var n=ze(qe().mark((function n(r,i){var a,o,s;return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){hl().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Mo(t,"network-request-failed"),o=hl().setTimeout((function(){i(a)}),Xf.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),rh.apply(this,arguments)}var ih={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ah="_blank",oh="http://localhost",sh=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(UU){}}}]),e}();function uh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},ih),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ui().toLowerCase();n&&(s=Vs(c)?ah:n),js(c)&&(t=t||oh,u.scrollbars="yes");var f=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Gs(c)&&"_self"!==s)return ch(t||"",s),new sh(null);var h=window.open(t||"",s,f);qo(h,e,"popup-blocked");try{h.focus()}catch(UU){}return new sh(h)}function ch(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var lh="__/auth/handler",fh="emulator/auth/handler";function hh(e,t,n,r,i,a){qo(e.config.authDomain,e,"auth-domain-config-required"),qo(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$a,eventId:i};if(t instanceof ju){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ta(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof qu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(lh);return Yo(t,fh)}(e),"?").concat(aa(p).slice(1))}var dh="webStorageSupport",ph=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sl,this._completeRedirectFn=Lf}return y(e,[{key:"_openPopup",value:function(){var e=ze(qe().mark((function e(t,n,r,i){var a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zo(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=hh(t,n,r,Ho(),i),e.abrupt("return",uh(t,o,ll()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ze(qe().mark((function e(t,n,r,i){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=hh(t,n,r,Ho(),i),hl().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(zo(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nh(t);case 2:return n=e.sent,r=new jf(t),n.register("authEvent",(function(e){return qo(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(dh,{type:dh},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[dh];void 0!==i&&t(!!i),Lo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Kf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ys()||qs()||Ks()}}]),e}(),vh=ph,mh=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return es(e,"POST","/v2/accounts/mfaEnrollment:finalize",Zo(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return es(e,"POST","/v2/accounts/mfaSignIn:finalize",Zo(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vo("unexpected MultiFactorSessionType")}}}]),e}()),yh=function(){function e(){d(this,e)}return y(e,null,[{key:"assertion",value:function(e){return mh._fromCredential(e)}}]),e}();yh.FACTOR_ID="phone";var gh,kh="@firebase/auth",bh="0.19.4",_h=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){qo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function wh(){return window}gh="Browser",za(new ga("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){qo(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),qo(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:gh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Js(gh)},r=new $s(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wo);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),za(new ga("auth-internal",(function(e){return function(e){return new _h(e)}(Xs(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ro(kh,bh,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gh)),ro(kh,bh,"esm2017");function xh(e,t,n){return Th.apply(this,arguments)}function Th(){return Th=ze(qe().mark((function e(t,n,r){var i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wh(),o=a.BuildInfo,zo(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ah(n.sessionId);case 4:return s=e.sent,u={},Ks()?u.ibi=o.packageName:Bs()?u.apn=o.packageName:Lo(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",hh(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}function Ih(){return(Ih=ze(qe().mark((function e(t){var n,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wh(),r=n.BuildInfo,i={},Ks()?i.iosBundleId=r.packageName:Bs()?i.androidPackageName=r.packageName:Lo(t,"operation-not-supported-in-this-environment"),e.next=5,zf(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eh(e){var t=wh().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Sh(e,t,n){return Ch.apply(this,arguments)}function Ch(){return Ch=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wh(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Mo(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Bs()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ch.apply(this,arguments)}function Nh(e){var t,n,r,i,a,o,s,u,c,l,f=wh();qo("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qo("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qo("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qo("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qo("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Ah(e){return Ph.apply(this,arguments)}function Ph(){return(Ph=ze(qe().mark((function e(t){var n,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rh(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rh(e){if(zo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Oh=function(e){k(n,e);var t=T(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),vo(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jf);function Dh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:jh(),postBody:null,tenantId:e.tenantId,error:Mo(e,"no-auth-event")}}function Lh(e,t){return qh()._set(Vh(e),t)}function Mh(e){return Fh.apply(this,arguments)}function Fh(){return(Fh=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qh()._get(Vh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,qh()._remove(Vh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uh(e,t){var n,r,i=function(e){var t=zh(e),n=t.link?decodeURIComponent(t.link):void 0,r=zh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return zh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=zh(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(UU){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Mo(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function jh(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function qh(){return Wo(al)}function Vh(e){return Ms("authEvent",e.config.apiKey,e.name)}function zh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=S(e.split("?"));t[0];return oa(t.slice(1).join("?"))}var Bh=function(){function e(){d(this,e),this._redirectPersistence=sl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Lf}return y(e,[{key:"_initialize",value:function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Oh(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Lo(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ze(qe().mark((function e(t,n,r,i){var a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nh(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),kf.clear(),e.next=10,this._originValidation(t);case 10:return o=Dh(t,r,i),e.next=13,Lh(t,o);case 13:return e.next=15,xh(t,o,n);case 15:return s=e.sent,e.next=18,Eh(s);case 18:return u=e.sent,e.abrupt("return",Sh(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ih.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=wh(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ze(qe().mark((function n(){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Mh(e);case 2:t.onEvent(Hh());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=ze(qe().mark((function n(r){var i,a;return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Mh(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Uh(i,r.url)),t.onEvent(a||Hh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");wh().handleOpenURL=function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(UU){console.error(UU)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Wh=Bh;function Hh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Mo("no-auth-event")}}function Kh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Gh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return!("file:"!==Kh()&&"ionic:"!==Kh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qh(){return Bi()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return/Edge\/\d+/.test(e)}function Jh(){try{var e=self.localStorage,t=ll();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ui();return Qh()||Yh(e)}()||Hi()}catch(UU){return $h()&&Hi()}return!1}function $h(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Xh(){return("http:"===Kh()||"https:"===Kh()||Vi()||Gh())&&!(zi()||qi())&&Jh()&&!$h()}function Zh(){return Gh()&&"undefined"!==typeof document}function ed(){return td.apply(this,arguments)}function td(){return(td=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zh()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nd={LOCAL:"local",NONE:"none",SESSION:"session"},rd=qo,id="persistence";function ad(e,t){rd(Object.values(nd).includes(t),e,"invalid-persistence-type"),zi()?rd(t!==nd.SESSION,e,"unsupported-persistence-type"):qi()?rd(t===nd.NONE,e,"unsupported-persistence-type"):$h()?rd(t===nd.NONE||t===nd.LOCAL&&Hi(),e,"unsupported-persistence-type"):rd(t===nd.NONE||Jh(),e,"unsupported-persistence-type")}function od(e){return sd.apply(this,arguments)}function sd(){return(sd=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ud(),r=Ms(id,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ud(){return"undefined"!==typeof window?window:null}var cd=qo,ld=function(){function e(){d(this,e),this.browserResolver=Wo(vh),this.cordovaResolver=Wo(Wh),this.underlyingResolver=null,this._redirectPersistence=sl,this._completeRedirectFn=Lf}return y(e,[{key:"_initialize",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ze(qe().mark((function e(t,n,r,i){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ze(qe().mark((function e(t,n,r,i){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Zh()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return cd(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ed();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fd(e){return e.unwrap()}function hd(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new yd(e,function(e,t){var n,r=ya(e),i=t;return qo(t.customData.operationType,r,"argument-error"),qo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Xc._fromError(r,i)}(e,t));else if(r){var i=dd(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function dd(e){var t=(e instanceof Ki?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ki)&&"temporaryProof"in t&&"phoneNumber"in t)return rf.credentialFromResult(e);var n,r=t.providerId;if(!r||r===_o)return null;switch(r){case bo:n=Bu;break;case go:n=zu;break;case ko:n=Wu;break;case wo:n=Gu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Hu._create(r,s):Nu._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Vu(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Ki?n.credentialFromError(e):n.credentialFromResult(e)}function pd(e,t){return t.catch((function(t){throw t instanceof Ki&&hd(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,dd(t)),additionalUserInfo:Jc(e),user:gd.getOrCreate(r)}}))}function vd(e,t){return md.apply(this,arguments)}function md(){return(md=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return pd(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yd=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return pd(fd(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),gd=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=ya(e);return tl.has(t)||tl.set(t,el._fromUser(t)),tl.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pd(this.auth,pc(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vd(this.auth,$l(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pd(this.auth,mf(this._delegate,t,ld)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,od(Xs(this.auth));case 2:return e.abrupt("return",Pf(this._delegate,t,ld));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pd(this.auth,mc(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return vd(this.auth,function(e,t,n){return Zl.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return pd(this.auth,function(e,t,n){return vf.apply(this,arguments)}(this._delegate,e,ld))}},{key:"reauthenticateWithRedirect",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,od(Xs(this.auth));case 2:return e.abrupt("return",Nf(this._delegate,t,ld));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Fc.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return zc(ya(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return zc(ya(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return nf.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Vc.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Uc.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();gd.USER_MAP=new WeakMap;var kd=qo,bd=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;kd(r,"invalid-api-key",{appName:t.name});var i=[Ls];if("undefined"!==typeof window){i=function(e,t){var n=ud();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=Ms(id,e,t);switch(n.sessionStorage.getItem(r)){case nd.NONE:return[Ls];case nd.LOCAL:return[Al,sl];case nd.SESSION:return[sl];default:return[]}}(r,t.name);for(var a=0,o=[Al,al,sl];a<o.length;a++){var s=o[a];i.includes(s)||i.push(s)}}kd(r,"invalid-api-key",{appName:t.name});var u="undefined"!==typeof window?ld:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:u}}),this._delegate._updateErrorMap(Ao),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?gd.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){eu(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ec.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Sc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ic.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pd(this._delegate,Ac(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Mc.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Fu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kd(Xh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Of(this._delegate,ld);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",pd(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Xs(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=_d(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=_d(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Rc.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Tc.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ad(this._delegate,t),e.t0=t,e.next=e.t0===nd.SESSION?4:e.t0===nd.LOCAL?6:e.t0===nd.NONE?11:13;break;case 4:return n=sl,e.abrupt("break",14);case 6:return e.next=8,Wo(Al)._isAvailable();case 8:return r=e.sent,n=r?Al:al,e.abrupt("break",14);case 11:return n=Ls,e.abrupt("break",14);case 13:return e.abrupt("return",Lo("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return pd(this._delegate,function(e){return Xu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return pd(this._delegate,hc(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return pd(this._delegate,function(e,t){return bc.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return pd(this._delegate,function(e,t,n){return hc(ya(e),Uu.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return pd(this._delegate,function(e,t,n){return Oc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return vd(this._delegate,function(e,t,n){return Jl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kd(Xh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",pd(this._delegate,df(this._delegate,t,ld)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kd(Xh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,od(this._delegate);case 3:return e.abrupt("return",Sf(this._delegate,t,ld));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Nc.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function _d(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&gd.getOrCreate(e))},error:t,complete:n}}bd.Persistence=nd;var wd=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new rf(fd(ho.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return rf.credential(e,t)}}]),e}();wd.PHONE_SIGN_IN_METHOD=rf.PHONE_SIGN_IN_METHOD,wd.PROVIDER_ID=rf.PROVIDER_ID;var xd,Td=qo,Id=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ho.app();d(this,e),Td(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Gl(t,n,i.auth()),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(xd=ho).INTERNAL.registerComponent(new ga("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new bd(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xo,PASSWORD_RESET:To,RECOVER_EMAIL:Io,REVERT_SECOND_FACTOR_ADDITION:Eo,VERIFY_AND_CHANGE_EMAIL:So,VERIFY_EMAIL:Co}},EmailAuthProvider:Uu,FacebookAuthProvider:zu,GithubAuthProvider:Wu,GoogleAuthProvider:Bu,OAuthProvider:Vu,SAMLAuthProvider:Ku,PhoneAuthProvider:wd,PhoneMultiFactorGenerator:yh,RecaptchaVerifier:Id,TwitterAuthProvider:Gu,Auth:bd,AuthCredential:ru,Error:Ki}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xd.registerVersion("@firebase/auth-compat","0.2.4");var Ed,Sd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Cd={},Nd=Nd||{},Ad=Sd||self;function Pd(){}function Rd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Od(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Dd="closure_uid_"+(1e9*Math.random()>>>0),Ld=0;function Md(e,t,n){return e.call.apply(e.bind,arguments)}function Fd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ud(e,t,n){return(Ud=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Md:Fd).apply(null,arguments)}function jd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qd(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Vd(){this.s=this.s,this.o=this.o}var zd={};Vd.prototype.s=!1,Vd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Dd)&&e[Dd]||(e[Dd]=++Ld)}(this);delete zd[e]}},Vd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Bd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Wd=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Hd(e){return Array.prototype.concat.apply([],arguments)}function Kd(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Gd(e){return/^[\s\xa0]*$/.test(e)}var Qd,Yd=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Jd(e,t){return-1!=e.indexOf(t)}function $d(e,t){return e<t?-1:e>t?1:0}e:{var Xd=Ad.navigator;if(Xd){var Zd=Xd.userAgent;if(Zd){Qd=Zd;break e}}Qd=""}function ep(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function tp(e){var t={};for(var n in e)t[n]=e[n];return t}var np="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rp(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<np.length;a++)n=np[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ip(e){return ip[" "](e),e}ip[" "]=Pd;var ap,op=Jd(Qd,"Opera"),sp=Jd(Qd,"Trident")||Jd(Qd,"MSIE"),up=Jd(Qd,"Edge"),cp=up||sp,lp=Jd(Qd,"Gecko")&&!(Jd(Qd.toLowerCase(),"webkit")&&!Jd(Qd,"Edge"))&&!(Jd(Qd,"Trident")||Jd(Qd,"MSIE"))&&!Jd(Qd,"Edge"),fp=Jd(Qd.toLowerCase(),"webkit")&&!Jd(Qd,"Edge");function hp(){var e=Ad.document;return e?e.documentMode:void 0}e:{var dp="",pp=function(){var e=Qd;return lp?/rv:([^\);]+)(\)|;)/.exec(e):up?/Edge\/([\d\.]+)/.exec(e):sp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fp?/WebKit\/(\S+)/.exec(e):op?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(pp&&(dp=pp?pp[1]:""),sp){var vp=hp();if(null!=vp&&vp>parseFloat(dp)){ap=String(vp);break e}}ap=dp}var mp,yp={};function gp(){return function(e){var t=yp;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Yd(String(ap)).split("."),n=Yd("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=$d(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||$d(0==a[2].length,0==o[2].length)||$d(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ad.document&&sp){var kp=hp();mp=kp||(parseInt(ap,10)||void 0)}else mp=void 0;var bp=mp,_p=function(){if(!Ad.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ad.addEventListener("test",Pd,t),Ad.removeEventListener("test",Pd,t)}catch(n){}return e}();function wp(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function xp(e,t){if(wp.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(lp){e:{try{ip(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Tp[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&xp.Z.h.call(this)}}wp.prototype.h=function(){this.defaultPrevented=!0},qd(xp,wp);var Tp={2:"touch",3:"pen",4:"mouse"};xp.prototype.h=function(){xp.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ip="closure_listenable_"+(1e6*Math.random()|0),Ep=0;function Sp(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ep,this.ca=this.fa=!1}function Cp(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Np(e){this.src=e,this.g={},this.h=0}function Ap(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Bd(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Cp(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Pp(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Np.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Pp(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Sp(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Rp="closure_lm_"+(1e6*Math.random()|0),Op={};function Dp(e,t,n,r,i){if(r&&r.once)return Mp(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Dp(e,t[a],n,r,i);return null}return n=Bp(n),e&&e[Ip]?e.N(t,n,Od(r)?!!r.capture:!!r,i):Lp(e,t,n,!1,r,i)}function Lp(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Od(i)?!!i.capture:!!i,s=Vp(e);if(s||(e[Rp]=s=new Np(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=qp;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_p||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(jp(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Mp(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Mp(e,t[a],n,r,i);return null}return n=Bp(n),e&&e[Ip]?e.O(t,n,Od(r)?!!r.capture:!!r,i):Lp(e,t,n,!0,r,i)}function Fp(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Fp(e,t[a],n,r,i);else r=Od(r)?!!r.capture:!!r,n=Bp(n),e&&e[Ip]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Pp(a=e.g[t],n,r,i))&&(Cp(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Vp(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Pp(t,n,r,i)),(n=-1<e?t[e]:null)&&Up(n))}function Up(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ip])Ap(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(jp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Vp(t))?(Ap(n,e),0==n.h&&(n.src=null,t[Rp]=null)):Cp(e)}}}function jp(e){return e in Op?Op[e]:Op[e]="on"+e}function qp(e,t){if(e.ca)e=!0;else{t=new xp(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Up(e),e=n.call(r,t)}return e}function Vp(e){return(e=e[Rp])instanceof Np?e:null}var zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bp(e){return"function"===typeof e?e:(e[zp]||(e[zp]=function(t){return e.handleEvent(t)}),e[zp])}function Wp(){Vd.call(this),this.i=new Np(this),this.P=this,this.I=null}function Hp(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new wp(t,e);else if(t instanceof wp)t.target=t.target||e;else{var i=t;rp(t=new wp(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Kp(o,r,!0,t)&&i}if(i=Kp(o=t.g=e,r,!0,t)&&i,i=Kp(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Kp(o=t.g=n[a],r,!1,t)&&i}function Kp(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Ap(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}qd(Wp,Vd),Wp.prototype[Ip]=!0,Wp.prototype.removeEventListener=function(e,t,n,r){Fp(this,e,t,n,r)},Wp.prototype.M=function(){if(Wp.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Cp(n[r]);delete t.g[e],t.h--}}this.I=null},Wp.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wp.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Gp=Ad.JSON.stringify;function Qp(){var e=nv,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Yp,Jp=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=$p.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),$p=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Xp}),(function(e){return e.reset()})),Xp=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Zp(e){Ad.setTimeout((function(){throw e}),0)}function ev(e,t){Yp||function(){var e=Ad.Promise.resolve(void 0);Yp=function(){e.then(rv)}}(),tv||(Yp(),tv=!0),nv.add(e,t)}var tv=!1,nv=new Jp;function rv(){for(var e;e=Qp();){try{e.h.call(e.g)}catch(n){Zp(n)}var t=$p;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}tv=!1}function iv(e,t){Wp.call(this),this.h=e||1,this.g=t||Ad,this.j=Ud(this.kb,this),this.l=Date.now()}function av(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ov(e,t,n){if("function"===typeof e)n&&(e=Ud(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ud(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ad.setTimeout(e,t||0)}function sv(e){e.g=ov((function(){e.g=null,e.i&&(e.i=!1,sv(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}qd(iv,Wp),(Ed=iv.prototype).da=!1,Ed.S=null,Ed.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hp(this,"tick"),this.da&&(av(this),this.start()))}},Ed.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ed.M=function(){iv.Z.M.call(this),av(this),delete this.g};var uv=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:sv(this)}},{key:"M",value:function(){vo(b(n.prototype),"M",this).call(this),this.g&&(Ad.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Vd);function cv(e){Vd.call(this),this.h=e,this.g={}}qd(cv,Vd);var lv=[];function fv(e,t,n,r){Array.isArray(n)||(n&&(lv[0]=n.toString()),n=lv);for(var i=0;i<n.length;i++){var a=Dp(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function hv(e){ep(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Up(e)}),e),e.g={}}function dv(){this.g=!0}function pv(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Gp(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}cv.prototype.M=function(){cv.Z.M.call(this),hv(this)},cv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dv.prototype.Aa=function(){this.g=!1},dv.prototype.info=function(){};var vv={},mv=null;function yv(){return mv=mv||new Wp}function gv(e){wp.call(this,vv.Ma,e)}function kv(e){var t=yv();Hp(t,new gv(t,e))}function bv(e,t){wp.call(this,vv.STAT_EVENT,e),this.stat=t}function _v(e){var t=yv();Hp(t,new bv(t,e))}function wv(e,t){wp.call(this,vv.Na,e),this.size=t}function xv(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ad.setTimeout((function(){e()}),t)}vv.Ma="serverreachability",qd(gv,wp),vv.STAT_EVENT="statevent",qd(bv,wp),vv.Na="timingevent",qd(wv,wp);var Tv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Iv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ev(){}function Sv(e){return e.h||(e.h=e.i())}function Cv(){}Ev.prototype.h=null;var Nv,Av={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Pv(){wp.call(this,"d")}function Rv(){wp.call(this,"c")}function Ov(){}function Dv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new cv(this),this.P=Mv,e=cp?125:void 0,this.W=new iv(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Lv}function Lv(){this.i=null,this.g="",this.h=!1}qd(Pv,wp),qd(Rv,wp),qd(Ov,Ev),Ov.prototype.g=function(){return new XMLHttpRequest},Ov.prototype.i=function(){return{}},Nv=new Ov;var Mv=45e3,Fv={},Uv={};function jv(e,t,n){e.K=1,e.v=um(nm(t)),e.s=n,e.U=!0,qv(e,null)}function qv(e,t){e.F=Date.now(),Wv(e),e.A=nm(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),_m(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Lv,e.g=xy(e.l,n?t:null,!e.s),0<e.O&&(e.L=new uv(Ud(e.Ia,e,e.g),e.O)),fv(e.V,e.g,"readystatechange",e.gb),t=e.H?tp(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),kv(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Vv(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function zv(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Bv(e,n))==Uv){4==t&&(e.o=4,_v(14),i=!1),pv(e.j,e.m,null,"[Incomplete Response]");break}if(r==Fv){e.o=4,_v(15),pv(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}pv(e.j,e.m,r,null),Yv(e,r)}Vv(e)&&r!=Uv&&r!=Fv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,_v(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),vy(t),t.L=!0,_v(11))):(pv(e.j,e.m,n,"[Invalid Chunked Response]"),Qv(e),Gv(e))}function Bv(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Uv:(n=Number(t.substring(n,r)),isNaN(n)?Fv:(r+=1)+n>t.length?Uv:(t=t.substr(r,n),e.C=r+n,t))}function Wv(e){e.Y=Date.now()+e.P,Hv(e,e.P)}function Hv(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xv(Ud(e.eb,e),t)}function Kv(e){e.B&&(Ad.clearTimeout(e.B),e.B=null)}function Gv(e){0==e.l.G||e.I||gy(e.l,e)}function Qv(e){Kv(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,av(e.W),hv(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Yv(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Nm(n.i,e)))if(n.I=e.N,!e.J&&Nm(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yy(n),oy(n)}py(n),_v(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=xv(Ud(n.ab,n),6e3));if(1>=Cm(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else by(n,11)}else if((e.J||n.g==e)&&yy(n),!Gd(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Jd(l,"spdy")||Jd(l,"quic")||Jd(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Am(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,sm(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=wy(r,r.H?r.la:null,r.W),d.J){Pm(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Kv(p),Wv(p)),r.g=d}else dy(r);0<n.l.length&&cy(n)}else"stop"!=a[0]&&"close"!=a[0]||by(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?by(n,7):ay(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}kv(4)}catch(a){}}function Jv(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Rd(e)||"string"===typeof e)Wd(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Rd(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Rd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function $v(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof $v)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Xv(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Zv(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Zv(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Zv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ed=Dv.prototype).setTimeout=function(e){this.P=e},Ed.gb=function(e){e=e.target;var t=this.L;t&&3==ey(e)?t.l():this.Ia(e)},Ed.Ia=function(e){try{if(e==this.g)e:{var t=ey(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||cp||this.g&&(this.h.h||this.g.ga()||ty(this.g)))){this.I||4!=t||7==n||kv(8==n||0>=r?3:2),Kv(this);var i=this.g.ba();this.N=i;t:if(Vv(this)){var a=ty(this.g);e="";var o=a.length,s=4==ey(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qv(this),Gv(this);var u="";break t}this.h.i=new Ad.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gd(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,_v(12),Qv(this),Gv(this);break e}pv(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yv(this,i)}this.U?(zv(this,t,u),cp&&this.i&&3==t&&(fv(this.V,this.W,"tick",this.fb),this.W.start())):(pv(this.j,this.m,u,null),Yv(this,u)),4==t&&Qv(this),this.i&&!this.I&&(4==t?gy(this.l,this):(this.i=!1,Wv(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,_v(12)):(this.o=0,_v(13)),Qv(this),Gv(this)}}}catch(t){}},Ed.fb=function(){if(this.g){var e=ey(this.g),t=this.g.ga();this.C<t.length&&(Kv(this),zv(this,e,t),this.i&&4!=e&&Wv(this))}},Ed.cancel=function(){this.I=!0,Qv(this)},Ed.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(kv(3),_v(17)),Qv(this),this.o=2,Gv(this)):Hv(this,this.Y-e)},(Ed=$v.prototype).R=function(){Xv(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ed.T=function(){return Xv(this),this.g.concat()},Ed.get=function(e,t){return Zv(this.h,e)?this.h[e]:t},Ed.set=function(e,t){Zv(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ed.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var em=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tm(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof tm){this.g=void 0!==t?t:e.g,rm(this,e.j),this.s=e.s,im(this,e.i),am(this,e.m),this.l=e.l,t=e.h;var n=new ym;n.i=t.i,t.g&&(n.g=new $v(t.g),n.h=t.h),om(this,n),this.o=e.o}else e&&(n=String(e).match(em))?(this.g=!!t,rm(this,n[1]||"",!0),this.s=cm(n[2]||""),im(this,n[3]||"",!0),am(this,n[4]),this.l=cm(n[5]||"",!0),om(this,n[6]||"",!0),this.o=cm(n[7]||"")):(this.g=!!t,this.h=new ym(null,this.g))}function nm(e){return new tm(e)}function rm(e,t,n){e.j=n?cm(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function im(e,t,n){e.i=n?cm(t,!0):t}function am(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function om(e,t,n){t instanceof ym?(e.h=t,function(e,t){t&&!e.j&&(gm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(km(this,t),_m(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=lm(t,vm)),e.h=new ym(t,e.g))}function sm(e,t,n){e.h.set(t,n)}function um(e){return sm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function cm(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lm(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,fm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tm.prototype.toString=function(){var e=[],t=this.j;t&&e.push(lm(t,hm,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(lm(t,hm,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(lm(n,"/"==n.charAt(0)?pm:dm,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",lm(n,mm)),e.join("")};var hm=/[#\/\?@]/g,dm=/[#\?:]/g,pm=/[#\?]/g,vm=/[#\?@]/g,mm=/#/g;function ym(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function gm(e){e.g||(e.g=new $v,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function km(e,t){gm(e),t=wm(e,t),Zv(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Zv((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Xv(e)))}function bm(e,t){return gm(e),t=wm(e,t),Zv(e.g.h,t)}function _m(e,t,n){km(e,t),0<n.length&&(e.i=null,e.g.set(wm(e,t),Kd(n)),e.h+=n.length)}function wm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ed=ym.prototype).add=function(e,t){gm(this),this.i=null,e=wm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ed.forEach=function(e,t){gm(this),this.g.forEach((function(n,r){Wd(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ed.T=function(){gm(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ed.R=function(e){gm(this);var t=[];if("string"===typeof e)bm(this,e)&&(t=Hd(t,this.g.get(wm(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Hd(t,e[n])}return t},Ed.set=function(e,t){return gm(this),this.i=null,bm(this,e=wm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ed.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ed.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var xm=y((function e(t,n){d(this,e),this.h=t,this.g=n}));function Tm(e){this.l=e||Em,Ad.PerformanceNavigationTiming?e=0<(e=Ad.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ad.g&&Ad.g.Ea&&Ad.g.Ea()&&Ad.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Im,Em=10;function Sm(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Cm(e){return e.h?1:e.g?e.g.size:0}function Nm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Am(e,t){e.g?e.g.add(t):e.h=t}function Pm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rm(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Kd(e.i)}function Om(){}function Dm(){this.g=new Om}function Lm(e,t,n){var r=n||"";try{Jv(e,(function(e,n){var i=e;Od(e)&&(i=Gp(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(UU){throw t.push(r+"type="+encodeURIComponent("_badmap")),UU}}function Mm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Fm(e){this.l=e.$b||null,this.j=e.ib||!1}function Um(e,t){Wp.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=jm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tm.prototype.cancel=function(){if(this.i=Rm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Om.prototype.stringify=function(e){return Ad.JSON.stringify(e,void 0)},Om.prototype.parse=function(e){return Ad.JSON.parse(e,void 0)},qd(Fm,Ev),Fm.prototype.g=function(){return new Um(this.l,this.j)},Fm.prototype.i=(Im={},function(){return Im}),qd(Um,Wp);var jm=0;function qm(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Vm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,zm(e)}function zm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ed=Um.prototype).open=function(e,t){if(this.readyState!=jm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,zm(this)},Ed.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ad).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ed.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vm(this)),this.readyState=jm},Ed.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,zm(this)),this.g&&(this.readyState=3,zm(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ad.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qm(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ed.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vm(this):zm(this),3==this.readyState&&qm(this)}},Ed.Ua=function(e){this.g&&(this.response=this.responseText=e,Vm(this))},Ed.Ta=function(e){this.g&&(this.response=e,Vm(this))},Ed.ha=function(){this.g&&Vm(this)},Ed.setRequestHeader=function(e,t){this.v.append(e,t)},Ed.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ed.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Um.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Bm=Ad.JSON.parse;function Wm(e){Wp.call(this),this.headers=new $v,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hm,this.K=this.L=!1}qd(Wm,Wp);var Hm="",Km=/^https?$/i,Gm=["POST","PUT"];function Qm(e){return"content-type"==e.toLowerCase()}function Ym(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Jm(e),Xm(e)}function Jm(e){e.D||(e.D=!0,Hp(e,"complete"),Hp(e,"error"))}function $m(e){if(e.h&&"undefined"!=typeof Nd&&(!e.C[1]||4!=ey(e)||2!=e.ba()))if(e.v&&4==ey(e))ov(e.Fa,0,e);else if(Hp(e,"readystatechange"),4==ey(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(em)[1]||null;if(!a&&Ad.self&&Ad.self.location){var o=Ad.self.location.protocol;a=o.substr(0,o.length-1)}i=!Km.test(a?a.toLowerCase():"")}t=i}if(t)Hp(e,"complete"),Hp(e,"success");else{e.m=6;try{var s=2<ey(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Jm(e)}}finally{Xm(e)}}}function Xm(e,t){if(e.g){Zm(e);var n=e.g,r=e.C[0]?Pd:null;e.g=null,e.C=null,t||Hp(e,"ready");try{n.onreadystatechange=r}catch(UU){}}}function Zm(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ad.clearTimeout(e.A),e.A=null)}function ey(e){return e.g?e.g.readyState:0}function ty(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Hm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ny(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ep(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):sm(e,t,n))}function ry(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function iy(e){this.za=0,this.l=[],this.h=new dv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ry("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ry("baseRetryDelayMs",5e3,e),this.$a=ry("retryDelaySeedMs",1e4,e),this.Ya=ry("forwardChannelMaxRetries",2,e),this.ra=ry("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Tm(e&&e.concurrentRequestLimit),this.Ca=new Dm,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ay(e){if(sy(e),3==e.G){var t=e.V++,n=nm(e.F);sm(n,"SID",e.J),sm(n,"RID",t),sm(n,"TYPE","terminate"),fy(e,n),(t=new Dv(e,e.h,t,void 0)).K=2,t.v=um(nm(n)),n=!1,Ad.navigator&&Ad.navigator.sendBeacon&&(n=Ad.navigator.sendBeacon(t.v.toString(),"")),!n&&Ad.Image&&((new Image).src=t.v,n=!0),n||(t.g=xy(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Wv(t)}_y(e)}function oy(e){e.g&&(vy(e),e.g.cancel(),e.g=null)}function sy(e){oy(e),e.u&&(Ad.clearTimeout(e.u),e.u=null),yy(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ad.clearTimeout(e.m),e.m=null)}function uy(e,t){e.l.push(new xm(e.Za++,t)),3==e.G&&cy(e)}function cy(e){Sm(e.i)||e.m||(e.m=!0,ev(e.Ha,e),e.C=0)}function ly(e,t){var n;n=t?t.m:e.V++;var r=nm(e.F);sm(r,"SID",e.J),sm(r,"RID",n),sm(r,"AID",e.U),fy(e,r),e.o&&e.s&&ny(r,e.o,e.s),n=new Dv(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=hy(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Am(e.i,n),jv(n,r,t)}function fy(e,t){e.j&&Jv({},(function(e,n){sm(t,n,e)}))}function hy(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ud(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Lm(l,o,"req"+c+"_")}catch(tg){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function dy(e){e.g||e.u||(e.Y=1,ev(e.Ga,e),e.A=0)}function py(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=xv(Ud(e.Ga,e),ky(e,e.A)),e.A++,!0)}function vy(e){null!=e.B&&(Ad.clearTimeout(e.B),e.B=null)}function my(e){e.g=new Dv(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=nm(e.oa);sm(t,"RID","rpc"),sm(t,"SID",e.J),sm(t,"CI",e.N?"0":"1"),sm(t,"AID",e.U),fy(e,t),sm(t,"TYPE","xmlhttp"),e.o&&e.s&&ny(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=um(nm(t)),n.s=null,n.U=!0,qv(n,e)}function yy(e){null!=e.v&&(Ad.clearTimeout(e.v),e.v=null)}function gy(e,t){var n=null;if(e.g==t){yy(e),vy(e),e.g=null;var r=2}else{if(!Nm(e.i,t))return;n=t.D,Pm(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Hp(r=yv(),new wv(r,n,t,i)),cy(e)}else dy(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Cm(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=xv(Ud(e.Ha,e,t),ky(e,e.C)),e.C++,!0))}(e,t)||2==r&&py(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:by(e,5);break;case 4:by(e,10);break;case 3:by(e,6);break;default:by(e,2)}}function ky(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function by(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Ud(e.jb,e);n||(n=new tm("//www.google.com/images/cleardot.gif"),Ad.location&&"http"==Ad.location.protocol||rm(n,"https"),um(n)),function(e,t){var n=new dv;if(Ad.Image){var r=new Image;r.onload=jd(Mm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=jd(Mm,n,r,"TestLoadImage: error",!1,t),r.onabort=jd(Mm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=jd(Mm,n,r,"TestLoadImage: timeout",!1,t),Ad.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else _v(2);e.G=0,e.j&&e.j.va(t),_y(e),sy(e)}function _y(e){e.G=0,e.I=-1,e.j&&(0==Rm(e.i).length&&0==e.l.length||(e.i.i.length=0,Kd(e.l),e.l.length=0),e.j.ua())}function wy(e,t,n){var r=function(e){return e instanceof tm?nm(e):new tm(e,void 0)}(n);if(""!=r.i)t&&im(r,t+"."+r.i),am(r,r.m);else{var i=Ad.location;r=function(e,t,n,r){var i=new tm(null,void 0);return e&&rm(i,e),t&&im(i,t),n&&am(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&ep(e.aa,(function(e,t){sm(r,t,e)})),t=e.D,n=e.sa,t&&n&&sm(r,t,n),sm(r,"VER",e.ma),fy(e,r),r}function xy(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Wm(new Fm({ib:!0})):new Wm(e.qa)).L=e.H,t}function Ty(){}function Iy(){if(sp&&!(10<=Number(bp)))throw Error("Environmental error: no available transport.")}function Ey(e,t){Wp.call(this),this.g=new iy(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Gd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Gd(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ny(this)}function Sy(e){Pv.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cy(){Rv.call(this),this.status=1}function Ny(e){this.g=e}(Ed=Wm.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nv.g(),this.C=this.u?Sv(this.u):Sv(Nv),this.g.onreadystatechange=Ud(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ym(this,a)}e=n||"";var i=new $v(this.headers);r&&Jv(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Qm,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ad.FormData&&e instanceof Ad.FormData,!(0<=Bd(Gm,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zm(this),0<this.B&&((this.K=function(e){return sp&&gp()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ud(this.pa,this)):this.A=ov(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ym(this,a)}},Ed.pa=function(){"undefined"!=typeof Nd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hp(this,"timeout"),this.abort(8))},Ed.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Hp(this,"complete"),Hp(this,"abort"),Xm(this))},Ed.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xm(this,!0)),Wm.Z.M.call(this)},Ed.Fa=function(){this.s||(this.F||this.v||this.l?$m(this):this.cb())},Ed.cb=function(){$m(this)},Ed.ba=function(){try{return 2<ey(this)?this.g.status:-1}catch(Im){return-1}},Ed.ga=function(){try{return this.g?this.g.responseText:""}catch(Im){return""}},Ed.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Bm(t)}},Ed.Da=function(){return this.m},Ed.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ed=iy.prototype).ma=8,Ed.G=1,Ed.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Ed.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Dv(this,this.h,e,void 0),n=this.s;if(this.P&&(n?rp(n=tp(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=hy(this,t,r),sm(i=nm(this.F),"RID",e),sm(i,"CVER",22),this.D&&sm(i,"X-HTTP-Session-Id",this.D),fy(this,i),this.o&&n&&ny(i,this.o,n),Am(this.i,t),this.Ra&&sm(i,"TYPE","init"),this.ja?(sm(i,"$req",r),sm(i,"SID","null"),t.$=!0,jv(t,i,null)):jv(t,i,r),this.G=2}}else 3==this.G&&(e?ly(this,e):0==this.l.length||Sm(this.i)||ly(this))},Ed.Ga=function(){if(this.u=null,my(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=xv(Ud(this.bb,this),e)}},Ed.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_v(10),oy(this),my(this))},Ed.ab=function(){null!=this.v&&(this.v=null,oy(this),py(this),_v(19))},Ed.jb=function(e){e?(this.h.info("Successfully pinged google.com"),_v(2)):(this.h.info("Failed to ping google.com"),_v(1))},(Ed=Ty.prototype).xa=function(){},Ed.wa=function(){},Ed.va=function(){},Ed.ua=function(){},Ed.Oa=function(){},Iy.prototype.g=function(e,t){return new Ey(e,t)},qd(Ey,Wp),Ey.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ev(Ud(e.hb,e,t))),_v(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=wy(e,null,e.W),cy(e)},Ey.prototype.close=function(){ay(this.g)},Ey.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,uy(this.g,t)}else this.v?((t={}).__data__=Gp(e),uy(this.g,t)):uy(this.g,e)},Ey.prototype.M=function(){this.g.j=null,delete this.j,ay(this.g),delete this.g,Ey.Z.M.call(this)},qd(Sy,Pv),qd(Cy,Rv),qd(Ny,Ty),Ny.prototype.xa=function(){Hp(this.g,"a")},Ny.prototype.wa=function(e){Hp(this.g,new Sy(e))},Ny.prototype.va=function(e){Hp(this.g,new Cy(e))},Ny.prototype.ua=function(){Hp(this.g,"b")},Iy.prototype.createWebChannel=Iy.prototype.g,Ey.prototype.send=Ey.prototype.u,Ey.prototype.open=Ey.prototype.m,Ey.prototype.close=Ey.prototype.close,Tv.NO_ERROR=0,Tv.TIMEOUT=8,Tv.HTTP_ERROR=6,Iv.COMPLETE="complete",Cv.EventType=Av,Av.OPEN="a",Av.CLOSE="b",Av.ERROR="c",Av.MESSAGE="d",Wp.prototype.listen=Wp.prototype.N,Wm.prototype.listenOnce=Wm.prototype.O,Wm.prototype.getLastError=Wm.prototype.La,Wm.prototype.getLastErrorCode=Wm.prototype.Da,Wm.prototype.getStatus=Wm.prototype.ba,Wm.prototype.getResponseJson=Wm.prototype.Qa,Wm.prototype.getResponseText=Wm.prototype.ga,Wm.prototype.send=Wm.prototype.ea;var Ay=Cd.createWebChannelTransport=function(){return new Iy},Py=Cd.getStatEventTarget=function(){return yv()},Ry=Cd.ErrorCode=Tv,Oy=Cd.EventType=Iv,Dy=Cd.Event=vv,Ly=Cd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},My=Cd.FetchXmlHttpFactory=Fm,Fy=Cd.WebChannel=Cv,Uy=Cd.XhrIo=Wm,jy="@firebase/firestore",qy=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();qy.UNAUTHENTICATED=new qy(null),qy.GOOGLE_CREDENTIALS=new qy("google-credentials-uid"),qy.FIRST_PARTY=new qy("first-party-uid"),qy.MOCK_USER=new qy("mock-user");var Vy="9.6.1",zy=new Pa("@firebase/firestore");function By(){return zy.logLevel}function Wy(e){if(zy.logLevel<=wa.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Gy);zy.debug.apply(zy,["Firestore (".concat(Vy,"): ").concat(e)].concat(h(i)))}}function Hy(e){if(zy.logLevel<=wa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Gy);zy.error.apply(zy,["Firestore (".concat(Vy,"): ").concat(e)].concat(h(i)))}}function Ky(e){if(zy.logLevel<=wa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Gy);zy.warn.apply(zy,["Firestore (".concat(Vy,"): ").concat(e)].concat(h(i)))}}function Gy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Qy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Vy,") INTERNAL ASSERTION FAILED: ")+e;throw Hy(t),new Error(t)}function Yy(e,t){e||Qy()}function Jy(e,t){return e}var $y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xy=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(E(Error)),Zy=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),eg=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),tg=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(qy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ng=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),rg=function(){function e(t){d(this,e),this.t=t,this.currentUser=qy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Zy;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Zy,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Wy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Wy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Zy)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Wy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Yy("string"==typeof n.accessToken),new eg(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Yy(null===e||"string"==typeof e),new qy(e)}}]),e}(),ig=y((function e(t,n,r){d(this,e),this.type="FirstParty",this.user=qy.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),ag=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new ig(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(qy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),og=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),sg=function(){function e(t){d(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return y(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&Wy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){Wy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Wy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(Yy("string"==typeof e.token),new og(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),ug=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function cg(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ug.I=-1;var lg=function(){function e(){d(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=cg(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function fg(e,t){return e<t?-1:e>t?1:0}function hg(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function dg(e){return e+"\0"}var pg=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Xy($y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xy($y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Xy($y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xy($y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fg(this.nanoseconds,e.nanoseconds):fg(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),vg=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new pg(0,0))}}]),e}();function mg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var kg=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Qy(),void 0===r?r=t.length-n:r>t.length-n&&Qy(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),bg=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Xy($y.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kg),_g=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wg=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return _g.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Xy($y.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Xy($y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Xy($y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Xy($y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(kg),xg=function(){function e(t){d(this,e),this.fields=t,t.sort(wg.comparator)}return y(e,[{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return hg(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Tg=function(){function e(t){d(this,e),this.binaryString=t}return y(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fg(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();Tg.EMPTY_BYTE_STRING=new Tg("");var Ig=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eg(e){if(Yy(!!e),"string"==typeof e){var t=0,n=Ig.exec(e);if(Yy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Sg(e.seconds),nanos:Sg(e.nanos)}}function Sg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cg(e){return"string"==typeof e?Tg.fromBase64String(e):Tg.fromUint8Array(e)}function Ng(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ag(e){var t=e.mapValue.fields.__previous_value__;return Ng(t)?Ag(t):t}function Pg(e){var t=Eg(e.mapValue.fields.__local_write_time__.timestampValue);return new pg(t.seconds,t.nanos)}function Rg(e){return null==e}function Og(e){return 0===e&&1/e==-1/0}function Dg(e){return"number"==typeof e&&Number.isInteger(e)&&!Og(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Lg=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===bg.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(bg.fromString(t))}},{key:"fromName",value:function(t){return new e(bg.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return bg.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new bg(t.slice()))}}]),e}();function Mg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ng(e)?4:10:Qy()}function Fg(e,t){var n=Mg(e);if(n!==Mg(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Pg(e).isEqual(Pg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Eg(e.timestampValue),r=Eg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cg(e.bytesValue).isEqual(Cg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sg(e.geoPointValue.latitude)===Sg(t.geoPointValue.latitude)&&Sg(e.geoPointValue.longitude)===Sg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sg(e.integerValue)===Sg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Sg(e.doubleValue),r=Sg(t.doubleValue);return n===r?Og(n)===Og(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hg(e.arrayValue.values||[],t.arrayValue.values||[],Fg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(mg(n)!==mg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fg(n[i],r[i])))return!1;return!0}(e,t);default:return Qy()}}function Ug(e,t){return void 0!==(e.values||[]).find((function(e){return Fg(e,t)}))}function jg(e,t){var n=Mg(e),r=Mg(t);if(n!==r)return fg(n,r);switch(n){case 0:return 0;case 1:return fg(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Sg(e.integerValue||e.doubleValue),r=Sg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qg(e.timestampValue,t.timestampValue);case 4:return qg(Pg(e),Pg(t));case 5:return fg(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Cg(e),r=Cg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fg(n[i],r[i]);if(0!==a)return a}return fg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fg(Sg(e.latitude),Sg(t.latitude));return 0!==n?n:fg(Sg(e.longitude),Sg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=jg(n[i],r[i]);if(a)return a}return fg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=fg(r[o],a[o]);if(0!==s)return s;var u=jg(n[r[o]],i[a[o]]);if(0!==u)return u}return fg(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Qy()}}function qg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fg(e,t);var n=Eg(e),r=Eg(t),i=fg(n.seconds,r.seconds);return 0!==i?i:fg(n.nanos,r.nanos)}function Vg(e){return zg(e)}function zg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Eg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Cg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Lg.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=zg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(zg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Qy();var t,n}function Bg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Wg(e){return!!e&&"integerValue"in e}function Hg(e){return!!e&&"arrayValue"in e}function Kg(e){return!!e&&"nullValue"in e}function Gg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qg(e){return!!e&&"mapValue"in e}function Yg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return yg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Yg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Yg(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Jg=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yg(t)}},{key:"setAll",value:function(e){var t=this,n=wg.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Yg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Qg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Fg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){yg(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Yg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function $g(e){var t=[];return yg(e.fields,(function(e,n){var r=new wg([e]);if(Qg(n)){var i=$g(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new xg(t)}var Xg=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Jg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Jg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,vg.min(),Jg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Jg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Jg.empty(),2)}}]),e}(),Zg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.R=null}));function ek(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zg(e,t,n,r,i,a,o)}function tk(e){var t=Jy(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Vg(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Rg(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=pk(t.startAt)),t.endAt&&(n+="|ub:",n+=pk(t.endAt)),t.R=n}return t.R}function nk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Fg(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gk(e.startAt,t.startAt)&&gk(e.endAt,t.endAt)}function rk(e){return Lg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var ik=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(jg(t,this.value)):null!==t&&Mg(this.value)===Mg(t)&&this.v(jg(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qy()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new ak(e,t,r):"array-contains"===t?new ck(e,r):"in"===t?new lk(e,r):"not-in"===t?new fk(e,r):"array-contains-any"===t?new hk(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new ok(e,n):new sk(e,n)}}]),n}(function(){return y((function e(){d(this,e)}))}());var ak=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=Lg.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Lg.comparator(e.key,this.key);return this.v(t)}}]),n}(ik),ok=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=uk("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ik),sk=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=uk("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ik);function uk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Lg.fromName(e.referenceValue)}))}var ck=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Hg(t)&&Ug(t.arrayValue,this.value)}}]),n}(ik),lk=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ug(this.value.arrayValue,t)}}]),n}(ik),fk=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(Ug(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ug(this.value.arrayValue,t)}}]),n}(ik),hk=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ug(t.value.arrayValue,e)}))}}]),n}(ik),dk=y((function e(t,n){d(this,e),this.position=t,this.before=n}));function pk(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return Vg(e)})).join(","))}var vk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function mk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function yk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Lg.comparator(Lg.fromName(o.referenceValue),n.key):jg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function gk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Fg(e.position[n],t.position[n]))return!1;return!0}var kk=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.S=null,this.D=null,this.startAt,this.endAt}));function bk(e,t,n,r,i,a,o,s){return new kk(e,t,n,r,i,a,o,s)}function _k(e){return new kk(e)}function wk(e){return!Rg(e.limit)&&"F"===e.limitType}function xk(e){return!Rg(e.limit)&&"L"===e.limitType}function Tk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ik(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ek(e){return null!==e.collectionGroup}function Sk(e){var t=Jy(e);if(null===t.S){t.S=[];var n=Ik(t),r=Tk(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new vk(n)),t.S.push(new vk(wg.keyField(),"asc"));else{var i,a=!1,o=C(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.S.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new vk(wg.keyField(),u))}}}return t.S}function Ck(e){var t=Jy(e);if(!t.D)if("F"===t.limitType)t.D=ek(t.path,t.collectionGroup,Sk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=C(Sk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new dk(t.endAt.position,!t.endAt.before):null,u=t.startAt?new dk(t.startAt.position,!t.startAt.before):null;t.D=ek(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.D}function Nk(e,t,n){return new kk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ak(e,t){return nk(Ck(e),Ck(t))&&e.limitType===t.limitType}function Pk(e){return"".concat(tk(Ck(e)),"|lt:").concat(e.limitType)}function Rk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Vg(t.value));var t})).join(", "),"]")),Rg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+pk(e.startAt)),e.endAt&&(t+=", endAt: "+pk(e.endAt)),"Target(".concat(t,")")}(Ck(e)),"; limitType=").concat(e.limitType,")")}function Ok(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Lg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!yk(e.startAt,Sk(e),t))&&(!e.endAt||!yk(e.endAt,Sk(e),t))}(e,t)}function Dk(e){return function(t,n){var r,i=!1,a=C(Sk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Lk(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Lk(e,t,n){var r=e.field.isKeyField()?Lg.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jg(r,i):Qy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qy()}}function Mk(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Og(t)?"-0":t}}function Fk(e){return{integerValue:""+e}}function Uk(e,t){return Dg(t)?Fk(t):Mk(e,t)}var jk=y((function e(){d(this,e),this._=void 0}));function qk(e,t,n){return e instanceof Bk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wk?Hk(e,t):e instanceof Kk?Gk(e,t):function(e,t){var n=zk(e,t),r=Yk(n)+Yk(e.N);return Wg(n)&&Wg(e.N)?Fk(r):Mk(e.k,r)}(e,t)}function Vk(e,t,n){return e instanceof Wk?Hk(e,t):e instanceof Kk?Gk(e,t):n}function zk(e,t){return e instanceof Qk?Wg(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Bk=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(jk),Wk=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(jk);function Hk(e,t){var n,r=Jk(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Fg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Kk=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(jk);function Gk(e,t){var n,r=Jk(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Fg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Qk=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).k=e,i.N=r,i}return y(n)}(jk);function Yk(e){return Sg(e.integerValue||e.doubleValue)}function Jk(e){return Hg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $k=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Xk=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Zk=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function eb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var tb=y((function e(){d(this,e)}));function nb(e,t,n){e instanceof sb?function(e,t,n){var r=e.value.clone(),i=lb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ub?function(e,t,n){if(eb(e.precondition,t)){var r=lb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(cb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rb(e,t,n){e instanceof sb?function(e,t,n){if(eb(e.precondition,t)){var r=e.value.clone(),i=fb(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(ob(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ub?function(e,t,n){if(eb(e.precondition,t)){var r=fb(e.fieldTransforms,n,t),i=t.data;i.setAll(cb(e)),i.setAll(r),t.convertToFoundDocument(ob(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){eb(e.precondition,t)&&t.convertToNoDocument(vg.min())}(e,t)}function ib(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=zk(a.transform,o||null);null!=s&&(null==r&&(r=Jg.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function ab(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hg(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wk&&t instanceof Wk||e instanceof Kk&&t instanceof Kk?hg(e.elements,t.elements,Fg):e instanceof Qk&&t instanceof Qk?Fg(e.N,t.N):e instanceof Bk&&t instanceof Bk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ob(e){return e.isFoundDocument()?e.version:vg.min()}var sb=function(e){k(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n)}(tb),ub=function(e){k(n,e);var t=T(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return y(n)}(tb);function cb(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function lb(e,t,n){var r=new Map;Yy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Vk(o,s,n[i]))}return r}function fb(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,qk(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var hb,db,pb=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n)}(tb),vb=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n)}(tb),mb=y((function e(t){d(this,e),this.count=t}));function yb(e){switch(e){default:return Qy();case $y.CANCELLED:case $y.UNKNOWN:case $y.DEADLINE_EXCEEDED:case $y.RESOURCE_EXHAUSTED:case $y.INTERNAL:case $y.UNAVAILABLE:case $y.UNAUTHENTICATED:return!1;case $y.INVALID_ARGUMENT:case $y.NOT_FOUND:case $y.ALREADY_EXISTS:case $y.PERMISSION_DENIED:case $y.FAILED_PRECONDITION:case $y.ABORTED:case $y.OUT_OF_RANGE:case $y.UNIMPLEMENTED:case $y.DATA_LOSS:return!0}}function gb(e){if(void 0===e)return Hy("GRPC error has no .code"),$y.UNKNOWN;switch(e){case hb.OK:return $y.OK;case hb.CANCELLED:return $y.CANCELLED;case hb.UNKNOWN:return $y.UNKNOWN;case hb.DEADLINE_EXCEEDED:return $y.DEADLINE_EXCEEDED;case hb.RESOURCE_EXHAUSTED:return $y.RESOURCE_EXHAUSTED;case hb.INTERNAL:return $y.INTERNAL;case hb.UNAVAILABLE:return $y.UNAVAILABLE;case hb.UNAUTHENTICATED:return $y.UNAUTHENTICATED;case hb.INVALID_ARGUMENT:return $y.INVALID_ARGUMENT;case hb.NOT_FOUND:return $y.NOT_FOUND;case hb.ALREADY_EXISTS:return $y.ALREADY_EXISTS;case hb.PERMISSION_DENIED:return $y.PERMISSION_DENIED;case hb.FAILED_PRECONDITION:return $y.FAILED_PRECONDITION;case hb.ABORTED:return $y.ABORTED;case hb.OUT_OF_RANGE:return $y.OUT_OF_RANGE;case hb.UNIMPLEMENTED:return $y.UNIMPLEMENTED;case hb.DATA_LOSS:return $y.DATA_LOSS;default:return Qy()}}(db=hb||(hb={}))[db.OK=0]="OK",db[db.CANCELLED=1]="CANCELLED",db[db.UNKNOWN=2]="UNKNOWN",db[db.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",db[db.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",db[db.NOT_FOUND=5]="NOT_FOUND",db[db.ALREADY_EXISTS=6]="ALREADY_EXISTS",db[db.PERMISSION_DENIED=7]="PERMISSION_DENIED",db[db.UNAUTHENTICATED=16]="UNAUTHENTICATED",db[db.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",db[db.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",db[db.ABORTED=10]="ABORTED",db[db.OUT_OF_RANGE=11]="OUT_OF_RANGE",db[db.UNIMPLEMENTED=12]="UNIMPLEMENTED",db[db.INTERNAL=13]="INTERNAL",db[db.UNAVAILABLE=14]="UNAVAILABLE",db[db.DATA_LOSS=15]="DATA_LOSS";var kb=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||_b.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,_b.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_b.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new bb(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new bb(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new bb(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new bb(this.root,e,this.comparator,!0)}}]),e}(),bb=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),_b=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Qy();if(this.right.isRed())throw Qy();var e=this.left.check();if(e!==this.right.check())throw Qy();return e+(this.isRed()?0:1)}}]),e}();_b.EMPTY=null,_b.RED=!0,_b.BLACK=!1,_b.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Qy()}},{key:"value",get:function(){throw Qy()}},{key:"color",get:function(){throw Qy()}},{key:"left",get:function(){throw Qy()}},{key:"right",get:function(){throw Qy()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new _b(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var wb=function(){function e(t){d(this,e),this.comparator=t,this.data=new kb(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new xb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new xb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),xb=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Tb=new kb(Lg.comparator);function Ib(){return Tb}var Eb=new kb(Lg.comparator);function Sb(){return Eb}var Cb=new kb(Lg.comparator);function Nb(){return Cb}var Ab=new wb(Lg.comparator);function Pb(){for(var e=Ab,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Rb=new wb(fg);function Ob(){return Rb}var Db=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Lb.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(vg.min(),r,Ob(),Ib(),Pb())}}]),e}(),Lb=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Tg.EMPTY_BYTE_STRING,n,Pb(),Pb(),Pb())}}]),e}(),Mb=y((function e(t,n,r,i){d(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i})),Fb=y((function e(t,n){d(this,e),this.targetId=t,this.O=n})),Ub=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),jb=function(){function e(){d(this,e),this.M=0,this.L=zb(),this.B=Tg.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return y(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=Pb(),t=Pb(),n=Pb();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qy()}})),new Lb(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=zb()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),qb=function(){function e(t){d(this,e),this.et=t,this.nt=new Map,this.st=Ib(),this.it=Vb(),this.rt=new wb(fg)}return y(e,[{key:"ot",value:function(e){var t,n=C(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:Qy()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(rk(i))if(0===n){var a=new Lg(i.path);this.ct(t,a,Xg.newNoDocument(a,vg.min()))}else Yy(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&rk(a.target)){var o=new Lg(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,Xg.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=Pb();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Db(e,n,this.rt,this.st,r);return this.st=Ib(),this.it=Vb(),this.rt=new wb(fg),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new jb,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new wb(fg),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Wy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new jb),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Vb(){return new kb(Lg.comparator)}function zb(){return new kb(Lg.comparator)}var Bb={asc:"ASCENDING",desc:"DESCENDING"},Wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hb=y((function e(t,n){d(this,e),this.databaseId=t,this.C=n}));function Kb(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gb(e,t){return e.C?t.toBase64():t.toUint8Array()}function Qb(e,t){return Kb(e,t.toTimestamp())}function Yb(e){return Yy(!!e),vg.fromTimestamp(function(e){var t=Eg(e);return new pg(t.seconds,t.nanos)}(e))}function Jb(e,t){return function(e){return new bg(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function $b(e){var t=bg.fromString(e);return Yy(w_(t)),t}function Xb(e,t){return Jb(e.databaseId,t.path)}function Zb(e,t){var n=$b(t);if(n.get(1)!==e.databaseId.projectId)throw new Xy($y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xy($y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lg(r_(n))}function e_(e,t){return Jb(e.databaseId,t)}function t_(e){var t=$b(e);return 4===t.length?bg.emptyPath():r_(t)}function n_(e){return new bg(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function r_(e){return Yy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function i_(e,t,n){return{name:Xb(e,t),fields:n.value.mapValue.fields}}function a_(e,t,n){var r=Zb(e,t.name),i=Yb(t.updateTime),a=new Jg({mapValue:{fields:t.fields}}),o=Xg.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function o_(e,t){return"found"in t?function(e,t){Yy(!!t.found),t.found.name,t.found.updateTime;var n=Zb(e,t.found.name),r=Yb(t.found.updateTime),i=new Jg({mapValue:{fields:t.found.fields}});return Xg.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Yy(!!t.missing),Yy(!!t.readTime);var n=Zb(e,t.missing),r=Yb(t.readTime);return Xg.newNoDocument(n,r)}(e,t):Qy()}function s_(e,t){var n;if(t instanceof sb)n={update:i_(e,t.key,t.value)};else if(t instanceof pb)n={delete:Xb(e,t.key)};else if(t instanceof ub)n={update:i_(e,t.key,t.data),updateMask:__(t.fieldMask)};else{if(!(t instanceof vb))return Qy();n={verify:Xb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Bk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kk)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qk)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Qy()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qy()}(e,t.precondition)),n}function u_(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Zk.updateTime(Yb(e.updateTime)):void 0!==e.exists?Zk.exists(e.exists):Zk.none()}(t.currentDocument):Zk.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Yy("REQUEST_TIME"===t.setToServerValue),n=new Bk;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Wk(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Kk(i)}else"increment"in t?n=new Qk(e,t.increment):Qy();var a=wg.fromServerFormat(t.fieldPath);return new $k(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Zb(e,t.update.name),a=new Jg({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new xg(t.map((function(e){return wg.fromServerFormat(e)})))}(t.updateMask);return new ub(i,a,o,n,r)}return new sb(i,a,n,r)}if(t.delete){var s=Zb(e,t.delete);return new pb(s,n)}if(t.verify){var u=Zb(e,t.verify);return new vb(u,n)}return Qy()}function c_(e,t){return{documents:[e_(e,t.path)]}}function l_(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=e_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=e_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Gg(e.value))return{unaryFilter:{field:y_(e.field),op:"IS_NAN"}};if(Kg(e.value))return{unaryFilter:{field:y_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gg(e.value))return{unaryFilter:{field:y_(e.field),op:"IS_NOT_NAN"}};if(Kg(e.value))return{unaryFilter:{field:y_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:y_(e.field),op:m_(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:y_(e.field),direction:v_(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||Rg(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=d_(t.startAt)),t.endAt&&(n.structuredQuery.endAt=d_(t.endAt)),n}function f_(e){var t=t_(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Yy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=h_(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new vk(g_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Rg(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=p_(n.startAt));var l=null;return n.endAt&&(l=p_(n.endAt)),bk(t,i,s,o,u,"F",c,l)}function h_(e){return e?void 0!==e.unaryFilter?[b_(e)]:void 0!==e.fieldFilter?[k_(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return h_(e)})).reduce((function(e,t){return e.concat(t)})):Qy():[]}function d_(e){return{before:e.before,values:e.position}}function p_(e){var t=!!e.before,n=e.values||[];return new dk(n,t)}function v_(e){return Bb[e]}function m_(e){return Wb[e]}function y_(e){return{fieldPath:e.canonicalString()}}function g_(e){return wg.fromServerFormat(e.fieldPath)}function k_(e){return ik.create(g_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qy()}}(e.fieldFilter.op),e.fieldFilter.value)}function b_(e){switch(e.unaryFilter.op){case"IS_NAN":var t=g_(e.unaryFilter.field);return ik.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=g_(e.unaryFilter.field);return ik.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=g_(e.unaryFilter.field);return ik.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=g_(e.unaryFilter.field);return ik.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qy()}}function __(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function w_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function x_(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=I_(t)),t=T_(e.get(n),t);return I_(t)}function T_(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function I_(e){return e+"\x01\x01"}function E_(e){var t=e.length;if(Yy(t>=2),2===t)return Yy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bg.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Qy(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Qy()}a=o+2}return new bg(r)}var S_=y((function e(t,n){d(this,e),this.seconds=t,this.nanoseconds=n})),C_=y((function e(t,n,r){d(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));C_.store="owner",C_.key="owner";var N_=y((function e(t,n,r){d(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));N_.store="mutationQueues",N_.keyPath="userId";var A_=y((function e(t,n,r,i,a){d(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));A_.store="mutations",A_.keyPath="batchId",A_.userMutationsIndex="userMutationsIndex",A_.userMutationsKeyPath=["userId","batchId"];var P_=function(){function e(){d(this,e)}return y(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,x_(t)]}},{key:"key",value:function(e,t,n){return[e,x_(t),n]}}]),e}();P_.store="documentMutations",P_.PLACEHOLDER=new P_;var R_=y((function e(t,n){d(this,e),this.path=t,this.readTime=n})),O_=y((function e(t,n){d(this,e),this.path=t,this.version=n})),D_=y((function e(t,n,r,i,a,o){d(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));D_.store="remoteDocuments",D_.readTimeIndex="readTimeIndex",D_.readTimeIndexPath="readTime",D_.collectionReadTimeIndex="collectionReadTimeIndex",D_.collectionReadTimeIndexPath=["parentPath","readTime"];var L_=y((function e(t){d(this,e),this.byteSize=t}));L_.store="remoteDocumentGlobal",L_.key="remoteDocumentGlobalKey";var M_=y((function e(t,n,r,i,a,o,s){d(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));M_.store="targets",M_.keyPath="targetId",M_.queryTargetsIndexName="queryTargetsIndex",M_.queryTargetsKeyPath=["canonicalId","targetId"];var F_=y((function e(t,n,r){d(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));F_.store="targetDocuments",F_.keyPath=["targetId","path"],F_.documentTargetsIndex="documentTargetsIndex",F_.documentTargetsKeyPath=["path","targetId"];var U_=y((function e(t,n,r,i){d(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));U_.key="targetGlobalKey",U_.store="targetGlobal";var j_=y((function e(t,n){d(this,e),this.collectionId=t,this.parent=n}));j_.store="collectionParents",j_.keyPath=["collectionId","parent"];var q_=y((function e(t,n,r,i){d(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));q_.store="clientMetadata",q_.keyPath="clientId";var V_=y((function e(t,n,r){d(this,e),this.bundleId=t,this.createTime=n,this.version=r}));V_.store="bundles",V_.keyPath="bundleId";var z_=y((function e(t,n,r){d(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));z_.store="namedQueries",z_.keyPath="name";var B_=[N_.store,A_.store,P_.store,D_.store,M_.store,C_.store,U_.store,F_.store].concat([q_.store]).concat([L_.store]).concat([j_.store]).concat([V_.store,z_.store]),W_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",H_=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),K_=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Qy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),G_=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new Zy,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new J_(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=tw(e.target.error);r.It.reject(new J_(t,n))}}return y(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Wy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new X_(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new J_(n,t)}}}]),e}(),Q_=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(Ui())&&Hy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"Ct",value:function(){var e=ze(qe().mark((function e(t){var n=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Wy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new J_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Xy($y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Xy($y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new J_(t,n))},i.onupgradeneeded=function(e){Wy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){Wy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ze(qe().mark((function e(t,n,r,i){var a,o,s,u,c=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=qe().mark((function e(){var n,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.Ct(t);case 4:return c.db=e.sent,n=G_.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).catch((function(e){return n.abort(e),K_.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.At;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u="FirebaseError"!==e.t1.name&&o<3,Wy("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),c.close(),u){e.next=18;break}return e.abrupt("return",{v:Promise.reject(e.t1)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Wy("SimpleDb","Removing database:",e),Z_(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!Hi())return!1;if(e.vt())return!0;var t=Ui(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Noitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAeMT_g-N4d9SkDMyMDrYBzz0F1CQa55pI",REACT_APP_APP_ID:"1:958832699613:web:9054ae936666c60a4b1334",REACT_APP_AUTH_DOMAIN:"twitter-clone-305fe.firebaseapp.com",REACT_APP_MESSAGIN_ID:"958832699613",REACT_APP_PROJECT_ID:"twitter-clone-305fe",REACT_APP_STORAGE_BUCKET:"twitter-clone-305fe.appspot.com"})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Y_=function(){function e(t){d(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return y(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return Z_(this.$t.delete())}}]),e}(),J_=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,$y.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Xy);function $_(e){return"IndexedDbTransactionError"===e.name}var X_=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Wy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Wy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Z_(n)}},{key:"add",value:function(e){return Wy("SimpleDb","ADD",this.store.name,e,e),Z_(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Z_(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Wy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Wy("SimpleDb","DELETE",this.store.name,e),Z_(this.store.delete(e))}},{key:"count",value:function(){return Wy("SimpleDb","COUNT",this.store.name),Z_(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){Wy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new K_((function(n,r){t.onerror=function(e){var t=tw(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new K_((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Y_(i),o=t(i.primaryKey,i.value,a);if(o instanceof K_){var s=o.catch((function(e){return a.done(),K_.reject(e)}));n.push(s)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return K_.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Z_(e){return new K_((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tw(e.target.error);n(t)}}))}var ew=!1;function tw(e){var t=Q_.Pt(Ui());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Xy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ew||(ew=!0,setTimeout((function(){throw r}),0)),r}}return e}var nw=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return y(n)}(H_);function rw(e,t){var n=Jy(e);return Q_.Dt(n.Wt,t)}var iw=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&nb(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=C(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&rb(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=C(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&rb(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vg.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Pb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&hg(this.mutations,e.mutations,(function(e,t){return ab(e,t)}))&&hg(this.baseMutations,e.baseMutations,(function(e,t){return ab(e,t)}))}}]),e}(),aw=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Yy(t.mutations.length===r.length);for(var i=Nb(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ow=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vg.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vg.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tg.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),sw=y((function e(t){d(this,e),this.Gt=t}));function uw(e,t){if(t.document)return a_(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Lg.fromSegments(t.noDocument.path),r=dw(t.noDocument.readTime),i=Xg.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Lg.fromSegments(t.unknownDocument.path),o=dw(t.unknownDocument.version);return Xg.newUnknownDocument(a,o)}return Qy()}function cw(e,t,n){var r=lw(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Xb(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Kb(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new D_(null,null,a,o,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=hw(t.version),c=t.hasCommittedMutations;return new D_(null,new R_(s,u),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=hw(t.version);return new D_(new O_(l,f),null,null,!0,r,i)}return Qy()}function lw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fw(e){var t=new pg(e[0],e[1]);return vg.fromTimestamp(t)}function hw(e){var t=e.toTimestamp();return new S_(t.seconds,t.nanoseconds)}function dw(e){var t=new pg(e.seconds,e.nanoseconds);return vg.fromTimestamp(t)}function pw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return u_(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return u_(e.Gt,t)})),s=pg.fromMillis(t.localWriteTimeMs);return new iw(t.batchId,s,n,o)}function vw(e){var t,n,r=dw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dw(e.lastLimboFreeSnapshotVersion):vg.min();return void 0!==e.query.documents?(Yy(1===(n=e.query).documents.length),t=Ck(_k(t_(n.documents[0])))):t=function(e){return Ck(f_(e))}(e.query),new ow(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Tg.fromBase64String(e.resumeToken))}function mw(e,t){var n,r=hw(t.snapshotVersion),i=hw(t.lastLimboFreeSnapshotVersion);n=rk(t.target)?c_(e.Gt,t.target):l_(e.Gt,t.target);var a=t.resumeToken.toBase64();return new M_(t.targetId,tk(t.target),r,a,t.sequenceNumber,i,n)}function yw(e){var t=f_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nk(t,t.limit,"L"):t}var gw=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return kw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return kw(e).put({bundleId:(n=t).id,createTime:hw(Yb(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return bw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:yw(t.bundledQuery),readTime:dw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return bw(e).put(function(e){return{name:e.name,readTime:hw(Yb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function kw(e){return rw(e,V_.store)}function bw(e){return rw(e,z_.store)}var _w=function(){function e(){d(this,e),this.zt=new ww}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),K_.resolve()}},{key:"getCollectionParents",value:function(e,t){return K_.resolve(this.zt.getEntries(t))}}]),e}(),ww=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wb(bg.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new wb(bg.comparator)).toArray()}}]),e}(),xw=function(){function e(){d(this,e),this.Ht=new ww}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:x_(i)};return Tw(e).put(a)}return K_.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[dg(t),""],!1,!0);return Tw(e).Bt(r).next((function(e){var r,i=C(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(E_(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Tw(e){return rw(e,j_.store)}var Iw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ew=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Sw(e,t,n){var r=e.store(A_.store),i=e.store(P_.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.jt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Yy(1===s)})));var c,l=[],f=C(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=P_.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return K_.waitFor(a).next((function(){return l}))}function Cw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qy();t=e.noDocument}return JSON.stringify(t).length}Ew.DEFAULT_COLLECTION_PERCENTILE=10,Ew.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ew.DEFAULT=new Ew(41943040,Ew.DEFAULT_COLLECTION_PERCENTILE,Ew.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ew.DISABLED=new Ew(-1,0,0);var Nw=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pw(e).jt({index:A_.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Rw(e),o=Pw(e);return o.add({}).next((function(s){Yy("number"==typeof s);var u,c=new iw(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return s_(e.Gt,t)})),i=n.mutations.map((function(t){return s_(e.Gt,t)}));return new A_(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new wb((function(e,t){return fg(e.canonicalString(),t.canonicalString())})),d=C(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=P_.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,P_.PLACEHOLDER))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[s]=c.keys()})),K_.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Pw(e).get(t).next((function(e){return e?(Yy(e.userId===n.userId),pw(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?K_.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Pw(e).jt({index:A_.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Yy(t.batchId>=r),a=pw(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pw(e).jt({index:A_.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pw(e).Bt(A_.userMutationsIndex,n).next((function(e){return e.map((function(e){return pw(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=P_.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Rw(e).jt({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],f=s[2],h=E_(c);if(u===n.userId&&t.path.isEqual(h))return Pw(e).get(f).next((function(e){if(!e)throw Qy();Yy(e.userId===n.userId),a.push(pw(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wb(fg),i=[];return t.forEach((function(t){var a=P_.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Rw(e).jt({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],f=E_(u);s===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(s)})),K_.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=P_.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new wb(fg);return Rw(e).jt({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],f=o[2],h=E_(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.te(e,s)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Pw(e).get(t).next((function(e){if(null===e)throw Qy();Yy(e.userId===n.userId),r.push(pw(n.k,e))})))})),K_.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Sw(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),K_.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return K_.resolve();var r=IDBKeyRange.lowerBound(P_.prefixForUser(t.userId)),i=[];return Rw(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=E_(e[1]);i.push(a)}else r.done()})).next((function(){Yy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Aw(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Ow(e).get(this.userId).next((function(e){return e||new N_(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return Yy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Aw(e,t,n){var r=P_.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Rw(e).jt({range:a,Kt:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Pw(e){return rw(e,A_.store)}function Rw(e){return rw(e,P_.store)}function Ow(e){return rw(e,N_.store)}var Dw=function(){function e(t){d(this,e),this.se=t}return y(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Lw=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.k=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new Dw(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return vg.fromTimestamp(new pg(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Mw(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return Yy(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Mw(e).jt((function(o,s){var u=vw(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return K_.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Mw(e).jt((function(e,n){var r=vw(n);t(r)}))}},{key:"oe",value:function(e){return Fw(e).get(U_.key).next((function(e){return Yy(null!==e),e}))}},{key:"ae",value:function(e,t){return Fw(e).put(U_.key,t)}},{key:"ce",value:function(e,t){return Mw(e).put(mw(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Mw(e).jt({range:r,index:M_.queryTargetsIndexName},(function(e,n,r){var a=vw(n);nk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Uw(e);return t.forEach((function(t){var o=x_(t.path);i.push(a.put(new F_(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),K_.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Uw(e);return K_.forEach(t,(function(t){var a=x_(t.path);return K_.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Uw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Uw(e),i=Pb();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=E_(e[1]),a=new Lg(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=x_(t.path),r=IDBKeyRange.bound([n],[dg(n)],!1,!0),i=0;return Uw(e).jt({index:F_.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Mw(e).get(t).next((function(e){return e?vw(e):null}))}}]),e}();function Mw(e){return rw(e,M_.store)}function Fw(e){return rw(e,U_.store)}function Uw(e){return rw(e,F_.store)}function jw(e){return qw.apply(this,arguments)}function qw(){return qw=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===$y.FAILED_PRECONDITION&&t.message===W_){e.next=2;break}throw t;case 2:Wy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function Vw(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=fg(r,o);return 0===u?fg(i,s):u}var zw=function(){function e(t){d(this,e),this.he=t,this.buffer=new wb(Vw),this.le=0}return y(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Vw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Bw=function(){function e(t,n){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return y(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Wy("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ze(qe().mark((function n(){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!$_(n.t0)){n.next=12;break}Wy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,jw(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Ww=function(){function e(t,n){d(this,e),this.ge=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return K_.resolve(ug.I);var r=new zw(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Wy("LruGarbageCollector","Garbage collection skipped; disabled"),K_.resolve(Iw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Wy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Iw):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Wy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),By()<=wa.DEBUG&&Wy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),K_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Hw=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ww(e,t)}(this,n)}return y(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Kw(e,n)}},{key:"removeReference",value:function(e,t,n){return Kw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Kw(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return Ow(e).Qt((function(r){return Aw(e,r,t).next((function(e){return e&&(n=!0),K_.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,s){if(s<=t){var u=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Uw(e).delete([0,x_(o.path)])}))}));i.push(u)}})).next((function(){return K_.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Kw(e,t)}},{key:"Ie",value:function(e,t){var n,r=Uw(e),i=ug.I;return r.jt({index:F_.documentTargetsIndex},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==ug.I&&t(new Lg(E_(n)),i),i=u,n=s):i=ug.I})).next((function(){i!==ug.I&&t(new Lg(E_(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Kw(e,t){return Uw(e).put(function(e,t){return new F_(0,x_(e.path),t)}(t,e.currentSequenceNumber))}var Gw=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){yg(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return gg(this.inner)}}]),e}(),Qw=function(){function e(){d(this,e),this.changes=new Gw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:vg.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Xg.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?K_.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Yw=function(){function e(t,n){d(this,e),this.k=t,this.Jt=n}return y(e,[{key:"addEntry",value:function(e,t,n){return Xw(e).put(Zw(t),n)}},{key:"removeEntry",value:function(e,t){var n=Xw(e),r=Zw(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Xw(e).get(Zw(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Xw(e).get(Zw(t)).next((function(e){return{document:n.Pe(t,e),size:Cw(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ib();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Ib(),i=new kb(Lg.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,Cw(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return K_.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Xw(e).jt({range:r},(function(e,t,r){for(var o=Lg.fromSegments(e);a&&Lg.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Ib(),a=t.path.length+1,o={};if(n.isEqual(vg.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=lw(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=D_.collectionReadTimeIndex}return Xw(e).jt(o,(function(e,n,o){if(e.length===a){var s=uw(r.k,n);t.path.isPrefixOf(s.key.path)?Ok(t,s)&&(i=i.insert(s.key,s)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Jw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return $w(e).get(L_.key).next((function(e){return Yy(!!e),e}))}},{key:"Re",value:function(e,t){return $w(e).put(L_.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=uw(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(vg.min()))return n}return Xg.newInvalidDocument(e)}}]),e}(),Jw=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new Gw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new wb((function(e,t){return fg(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Ce.get(a);if(o.document.isValidDocument()){var u=cw(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=Cw(u);r+=c-s,n.push(t.De.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=cw(t.De.k,Xg.newNoDocument(a,vg.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),K_.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(Qw);function $w(e){return rw(e,L_.store)}function Xw(e){return rw(e,D_.store)}function Zw(e){return e.path.toArray()}var ex=function(){function e(t){d(this,e),this.k=t}return y(e,[{key:"Nt",value:function(e,t,n,r){var i=this;Yy(n<r&&n>=0&&r<=11);var a=new G_("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(C_.store)}(e),function(e){e.createObjectStore(N_.store,{keyPath:N_.keyPath}),e.createObjectStore(A_.store,{keyPath:A_.keyPath,autoIncrement:!0}).createIndex(A_.userMutationsIndex,A_.userMutationsKeyPath,{unique:!0}),e.createObjectStore(P_.store)}(e),tx(e),function(e){e.createObjectStore(D_.store)}(e));var o=K_.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(F_.store),e.deleteObjectStore(M_.store),e.deleteObjectStore(U_.store)}(e),tx(e)),o=o.next((function(){return function(e){var t=e.store(U_.store),n=new U_(0,0,vg.min().toTimestamp(),0);return t.put(U_.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(A_.store).Bt().next((function(n){e.deleteObjectStore(A_.store),e.createObjectStore(A_.store,{keyPath:A_.keyPath,autoIncrement:!0}).createIndex(A_.userMutationsIndex,A_.userMutationsKeyPath,{unique:!0});var r=t.store(A_.store),i=n.map((function(e){return r.put(e)}));return K_.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(q_.store,{keyPath:q_.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(L_.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(D_.store);t.createIndex(D_.readTimeIndex,D_.readTimeIndexPath,{unique:!1}),t.createIndex(D_.collectionReadTimeIndex,D_.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(V_.store,{keyPath:V_.keyPath})}(e),function(e){e.createObjectStore(z_.store,{keyPath:z_.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(D_.store).jt((function(e,n){t+=Cw(n)})).next((function(){var n=new L_(t);return e.store(L_.store).put(L_.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(N_.store),r=e.store(A_.store);return n.Bt().next((function(n){return K_.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(A_.userMutationsIndex,i).next((function(r){return K_.forEach(r,(function(r){Yy(r.userId===n.userId);var i=pw(t.k,r);return Sw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(F_.store),n=e.store(D_.store);return e.store(U_.store).get(U_.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new bg(n),o=function(e){return[0,x_(e)]}(a);r.push(t.get(o).next((function(n){return n?K_.resolve():function(n){return t.put(new F_(0,x_(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return K_.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(j_.store,{keyPath:j_.keyPath});var n=t.store(j_.store),r=new ww,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:x_(i)})}};return t.store(D_.store).jt({Kt:!0},(function(e,t){var n=new bg(e);return i(n.popLast())})).next((function(){return t.store(P_.store).jt({Kt:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],E_(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(M_.store);return n.jt((function(e,r){var i=vw(r),a=mw(t.k,i);return n.put(a)}))}}]),e}();function tx(e){e.createObjectStore(F_.store,{keyPath:F_.keyPath}).createIndex(F_.documentTargetsIndex,F_.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(M_.store,{keyPath:M_.keyPath}).createIndex(M_.queryTargetsIndexName,M_.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(U_.store)}var nx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rx=function(){function e(t,n,r,i,a,o,s,u,c,l){if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=s,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new Xy($y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hw(this,i),this.Ge=n+"main",this.k=new sw(u),this.ze=new Q_(this.Ge,11,new ex(this.k)),this.He=new Lw(this.referenceDelegate,this.k),this.Jt=new xw,this.Je=function(e,t){return new Yw(e,t)}(this.k,this.Jt),this.Ye=new gw,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&Hy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Xy($y.FAILED_PRECONDITION,nx);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new ug(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=ze(qe().mark((function n(r){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=ze(qe().mark((function t(n){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ax(t).put(new q_(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if($_(t))return Wy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Wy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return ix(e).get(C_.key).next((function(e){return K_.resolve(t.un(e))}))}},{key:"hn",value:function(e){return ax(e).delete(this.clientId)}},{key:"ln",value:function(){var e=ze(qe().mark((function e(){var t,n,r,i,a=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=rw(e,q_.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return K_.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=C(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?K_.resolve(!0):ix(e).get(C_.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new Xy($y.FAILED_PRECONDITION,nx);return!1}}return!(!t.networkEnabled||!t.inForeground)||ax(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Wy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ze(qe().mark((function e(){var t=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[C_.store,q_.store],(function(e){var n=new nw(e,ug.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ax(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Nw.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Wy("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,B_,(function(a){return i=new nw(a,r.Be?r.Be.next():ug.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw Hy("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new Xy($y.FAILED_PRECONDITION,W_);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return ix(e).get(C_.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Xy($y.FAILED_PRECONDITION,nx)}))}},{key:"cn",value:function(e){var t=new C_(this.clientId,this.allowTabSynchronization,Date.now());return ix(e).put(C_.key,t)}},{key:"an",value:function(e){var t=this,n=ix(e);return n.get(C_.key).next((function(e){return t.un(e)?(Wy("IndexedDbPersistence","Releasing primary lease."),n.delete(C_.key)):K_.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Hy("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!qi()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Wy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Hy("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(qd){Hy("Failed to set zombie client id.",qd)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(qd){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return Q_.bt()}}]),e}();function ix(e){return rw(e,C_.store)}function ax(e){return rw(e,q_.store)}function ox(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var sx=y((function e(t,n){d(this,e),this.progress=t,this.In=n})),ux=function(){function e(t,n,r){d(this,e),this.Je=t,this.An=n,this.Jt=r}return y(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=C(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=C(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Lg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Ek(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Lg(t)).next((function(e){var t=Sb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Sb();return this.Jt.getCollectionParents(e,i).next((function(o){return K_.forEach(o,(function(o){var s=function(e,t){return new kk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=C(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,s=C(o.mutations);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.key,l=r.get(c);null==l&&(l=Xg.newInvalidDocument(c),r=r.insert(c,l)),rb(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){s.e(f)}finally{s.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){Ok(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=Pb(),a=C(t);try{for(a.s();!(r=a.n()).done;){var o,s=C(r.value.mutations);try{for(s.s();!(o=s.n()).done;){var u=o.value;u instanceof ub&&null===n.get(u.key)&&(i=i.add(u.key))}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),cx=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return y(e,null,[{key:"$n",value:function(t,n){var r,i=Pb(),a=Pb(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),lx=function(){function e(){d(this,e)}return y(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(vg.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(wk(t)||xk(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):(By()<=wa.DEBUG&&Wy("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Rk(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new wb(Dk(e));return t.forEach((function(t,r){Ok(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return By()<=wa.DEBUG&&Wy("QueryEngine","Using full collection scan to execute query:",Rk(t)),this.On.getDocumentsMatchingQuery(e,t,vg.min())}}]),e}(),fx=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new kb(fg),this.Kn=new Gw((function(e){return tk(e)}),nk),this.jn=vg.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new ux(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return y(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function hx(e,t,n,r){return new fx(e,t,n,r)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new ux(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],s=Pb(),u=C(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;i.push(c.batchId);var l,f=C(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=C(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=C(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,s).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e,t){var n=Jy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=K_.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Yy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function mx(e){var t=Jy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function yx(e,t){var n=Jy(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var s=i.get(a);if(s){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return Yy(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var s=Ib();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(gx(e,a,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(vg.min())){var u=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return K_.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,s)})).next((function(){return s}))})).then((function(e){return n.qn=i,e}))}function gx(e,t,n,r,i){var a=Pb();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Ib();return n.forEach((function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(vg.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):Wy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),a}))}function kx(e,t){var n=Jy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function bx(e,t){var n=Jy(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,K_.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new ow(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function _x(e,t,n){return wx.apply(this,arguments)}function wx(){return wx=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Jy(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),$_(e.t1)){e.next=12;break}throw e.t1;case 12:Wy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),wx.apply(this,arguments)}function xx(e,t,n){var r=Jy(e),i=vg.min(),a=Pb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Jy(e),i=r.Kn.get(n);return void 0!==i?K_.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Ck(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:vg.min(),n?a:Pb())})).next((function(e){return{documents:e,zn:a}}))}))}function Tx(e,t){var n=Jy(e),r=Jy(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Ix(e){var t=Jy(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Jy(e),i=Ib(),a=lw(n),o=Xw(t),s=IDBKeyRange.lowerBound(a,!0);return o.jt({index:D_.readTimeIndex,range:s},(function(e,t){var n=uw(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:fw(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function Ex(e){return Sx.apply(this,arguments)}function Sx(){return Sx=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jy(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Xw(e),n=vg.min();return t.jt({index:D_.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=fw(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Cx(e,t,n,r){return Nx.apply(this,arguments)}function Nx(){return Nx=ze(qe().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Jy(t),o=Pb(),s=Ib(),u=Nb(),c=C(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),s=s.insert(h,n.Jn(f)),u=u.insert(h,n.Yn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,bx(a,function(e){return Ck(_k(bg.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return gx(e,d,s,vg.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){return Px.apply(this,arguments)}function Px(){return Px=ze(qe().mark((function e(t,n){var r,i,a,o=arguments;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Pb(),e.next=3,bx(t,Ck(yw(n.bundledQuery)));case 3:return i=e.sent,a=Jy(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Yb(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(Tg.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}var Rx=function(){function e(t){d(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return K_.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:Yb(n.createTime)}),K_.resolve()}},{key:"getNamedQuery",value:function(e,t){return K_.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:yw(e.bundledQuery),readTime:Yb(e.readTime)}}(t)),K_.resolve()}}]),e}(),Ox=function(){function e(){d(this,e),this.ts=new wb(Dx.es),this.ns=new wb(Dx.ss)}return y(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Dx(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new Dx(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Lg(new bg([])),r=new Dx(n,e),i=new Dx(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Lg(new bg([])),n=new Dx(t,e),r=new Dx(t,e+1),i=Pb();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Dx(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Dx=function(){function e(t,n){d(this,e),this.key=t,this.fs=n}return y(e,null,[{key:"es",value:function(e,t){return Lg.comparator(e.key,t.key)||fg(e.fs,t.fs)}},{key:"ss",value:function(e,t){return fg(e.fs,t.fs)||Lg.comparator(e.key,t.key)}}]),e}(),Lx=function(){function e(t,n){d(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new wb(Dx.es)}return y(e,[{key:"checkEmpty",value:function(e){return K_.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new iw(i,t,n,r);this.An.push(a);var o,s=C(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ws=this.ws.add(new Dx(u.key,i)),this.Jt.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return K_.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return K_.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return K_.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return K_.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return K_.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Dx(t,0),i=new Dx(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),K_.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wb(fg);return t.forEach((function(e){var t=new Dx(e,0),i=new Dx(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),K_.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Lg.isDocumentKey(i)||(i=i.child(""));var a=new Dx(new Lg(i),0),o=new wb(fg);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),K_.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Yy(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return K_.forEach(t.mutations,(function(i){var a=new Dx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Dx(t,0),r=this.ws.firstAfterOrEqual(n);return K_.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,K_.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),Mx=function(){function e(t,n){d(this,e),this.Jt=t,this.Ts=n,this.docs=new kb(Lg.comparator),this.size=0}return y(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return K_.resolve(n?n.document.clone():Xg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ib();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Xg.newInvalidDocument(e))})),K_.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Ib(),i=new Lg(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ok(t,c)&&(r=r.insert(c.key,c.clone()))}return K_.resolve(r)}},{key:"Es",value:function(e,t){return K_.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Fx(this)}},{key:"getSize",value:function(e){return K_.resolve(this.size)}}]),e}(),Fx=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).De=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),K_.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(Qw),Ux=function(){function e(t){d(this,e),this.persistence=t,this.Is=new Gw((function(e){return tk(e)}),nk),this.lastRemoteSnapshotVersion=vg.min(),this.highestTargetId=0,this.As=0,this.Rs=new Ox,this.targetCount=0,this.Ps=Dw.ie()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),K_.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return K_.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return K_.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),K_.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),K_.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new Dw(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,K_.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),K_.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,K_.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),K_.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return K_.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return K_.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),K_.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),K_.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),K_.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return K_.resolve(n)}},{key:"containsKey",value:function(e,t){return K_.resolve(this.Rs.containsKey(t))}}]),e}(),jx=function(){function e(t,n){var r=this;d(this,e),this.bs={},this.Be=new ug(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Ux(this),this.Jt=new _w,this.Je=function(e,t){return new Mx(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new sw(n),this.Ye=new Rx(this.k)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Lx(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Wy("MemoryPersistence","Starting transaction:",e);var i=new qx(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return K_.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),qx=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(H_),Vx=function(){function e(t){d(this,e),this.persistence=t,this.Cs=new Ox,this.Ns=null}return y(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw Qy()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),K_.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),K_.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),K_.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K_.forEach(this.xs,(function(r){var i=Lg.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return K_.or([function(){return K_.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function zx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Bx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Wx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Hx=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Xy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Hy("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Kx=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xy(i.error.code,i.error.message))),a?new e(t,i.state,r):(Hy("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Gx=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ob(),o=0;i&&o<r.activeTargetIds.length;++o)i=Dg(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Hy("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Qx=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Hy("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Yx=function(){function e(){d(this,e),this.activeTargetIds=Ob()}return y(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jx=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new kb(fg),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=zx(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new Yx),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return y(e,[{key:"start",value:function(){var e=ze(qe().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=C(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(zx(this.persistenceKey,i)))&&(o=Gx.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(s=this.storage.getItem(this.Js))&&(u=this.Zs(s))&&this.ti(u),c=C(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(d){c.e(d)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Wx(this.persistenceKey,e));if(n){var r=Kx.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Wx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Wy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Wy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Wy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Wy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Hy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(ze(qe().mark((function e(){var r,i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(s));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}u=function(e){var t=ug.I;if(null!=e)try{var n=JSON.parse(e);Yy("number"==typeof n),t=n}catch(e){Hy("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==ug.I&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new Hx(this.currentUser,e,t,n),i=Bx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=Bx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=Wx(this.persistenceKey,e),i=new Kx(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return Gx.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hx.Fs(new qy(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return Kx.Fs(r,t)}},{key:"Zs",value:function(e){return Qx.Fs(e)}},{key:"fi",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:Wy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.yi(o,s).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=Ob();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),$x=function(){function e(){d(this,e),this.pi=new Yx,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new Yx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Xx=function(){function e(){d(this,e)}return y(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zx=function(){function e(){var t=this;d(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return y(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Wy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){Wy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),eT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},tT=function(){function e(t){d(this,e),this.Vi=t.Vi,this.Si=t.Si}return y(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),nT=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Uy;o.listenOnce(Oy.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ry.NO_ERROR:var t=o.getResponseJson();Wy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ry.TIMEOUT:Wy("Connection",'RPC "'+e+'" timed out'),a(new Xy($y.DEADLINE_EXCEEDED,"Request time out"));break;case Ry.HTTP_ERROR:var n=o.getStatus();if(Wy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values($y).indexOf(t)>=0?t:$y.UNKNOWN}(r.status);a(new Xy(s,r.message))}else a(new Xy($y.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Xy($y.UNAVAILABLE,"Connection failed."));break;default:Qy()}}finally{Wy("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ay(),a=Py(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new My({})),this.qi(o.initMessageHeaders,t,n),ji()||zi()||Ui().indexOf("Electron/")>=0||Bi()||Ui().indexOf("MSAppHost/")>=0||Vi()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Wy("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new tT({Vi:function(e){l?Wy("Connection","Not sending because WebChannel is closed:",e):(c||(Wy("Connection","Opening WebChannel transport."),u.open(),c=!0),Wy("Connection","WebChannel sending:",e),u.send(e))},Si:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,Fy.EventType.OPEN,(function(){l||Wy("Connection","WebChannel transport opened.")})),h(u,Fy.EventType.CLOSE,(function(){l||(l=!0,Wy("Connection","WebChannel transport closed"),f.Fi())})),h(u,Fy.EventType.ERROR,(function(e){l||(l=!0,Ky("Connection","WebChannel transport errored:",e),f.Fi(new Xy($y.UNAVAILABLE,"The operation could not be completed")))})),h(u,Fy.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Yy(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Wy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=hb[e];if(void 0!==t)return gb(t)}(a),s=i.message;void 0===o&&(o=$y.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new Xy(o,s)),u.close()}else Wy("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,Dy.STAT_EVENT,(function(e){e.stat===Ly.PROXY?Wy("Connection","Detected buffering proxy"):e.stat===Ly.NOPROXY&&Wy("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);Wy("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return Wy("RestConnection","Received: ",e),e}),(function(t){throw Ky("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=eT[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function rT(){return"undefined"!=typeof window?window:null}function iT(){return"undefined"!=typeof document?document:null}function aT(e){return new Hb(e,!0)}var oT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Wy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),sT=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new oT(t,n)}return y(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===$y.RESOURCE_EXHAUSTED?(Hy(n.toString()),Hy("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===$y.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new Xy($y.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return Wy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(Wy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),uT=function(e){k(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).k=o,u}return y(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(Yy(void 0===t||"string"==typeof t),Tg.fromBase64String(t||"")):(Yy(void 0===t||t instanceof Uint8Array),Tg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?$y.UNKNOWN:gb(e.code);return new Xy(t,e.message||"")}(o);n=new Ub(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Zb(e,u.document.name),l=Yb(u.document.updateTime),f=new Jg({mapValue:{fields:u.document.fields}}),h=Xg.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Mb(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Zb(e,v.document),y=v.readTime?Yb(v.readTime):vg.min(),g=Xg.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Mb([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=Zb(e,b.document),w=b.removedTargetIds||[];n=new Mb([],w,_,null)}else{if(!("filter"in t))return Qy();t.filter;var x=t.filter;x.targetId;var T=x.count||0,I=new mb(T),E=x.targetId;n=new Fb(E,I)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return vg.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vg.min():t.readTime?Yb(t.readTime):vg.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=n_(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=rk(r)?{documents:c_(e,r)}:{query:l_(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Gb(e,t.resumeToken):t.snapshotVersion.compareTo(vg.min())>0&&(n.readTime=Kb(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qy()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=n_(this.k),t.removeTarget=e,this.gr(t)}}]),n}(sT),cT=function(e){k(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).k=o,u.Vr=!1,u}return y(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,vo(b(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(Yy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(Yy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Yb(e.updateTime):Yb(t);return n.isEqual(vg.min())&&(n=Yb(t)),new Xk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Yb(e.commitTime);return this.listener.Cr(n,t)}return Yy(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=n_(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return s_(t.k,e)}))};this.gr(n)}}]),n}(sT),lT=function(e){k(n,e);var t=T(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return y(n,[{key:"Fr",value:function(){if(this.$r)throw new Xy($y.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.ir.Bi(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===$y.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Xy($y.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.ir.ji(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===$y.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Xy($y.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return y((function e(){d(this,e)}))}()),fT=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return y(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(Hy(t),this.Lr=!1):Wy("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),hT=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xT(o),!e.t0){e.next=5;break}return Wy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Jy(t)).Gr.add(4),e.next=4,vT(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,dT(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new fT(r,i)}));function dT(e){return pT.apply(this,arguments)}function pT(){return pT=ze(qe().mark((function e(t){var n,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xT(t)){e.next=18;break}n=C(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),pT.apply(this,arguments)}function vT(e){return mT.apply(this,arguments)}function mT(){return mT=ze(qe().mark((function e(t){var n,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),mT.apply(this,arguments)}function yT(e,t){var n=Jy(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),wT(n)?_T(n):JT(n).lr()&&kT(n,t))}function gT(e,t){var n=Jy(e),r=JT(n);n.Wr.delete(t),r.lr()&&bT(n,t),0===n.Wr.size&&(r.lr()?r._r():xT(n)&&n.Jr.set("Unknown"))}function kT(e,t){e.Yr.X(t.targetId),JT(e).br(t)}function bT(e,t){e.Yr.X(t),JT(e).vr(t)}function _T(e){e.Yr=new qb({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),JT(e).start(),e.Jr.Br()}function wT(e){return xT(e)&&!JT(e).hr()&&e.Wr.size>0}function xT(e){return 0===Jy(e).Gr.size}function TT(e){e.Yr=void 0}function IT(e){return ET.apply(this,arguments)}function ET(){return ET=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){kT(t,e)}));case 1:case"end":return e.stop()}}),e)}))),ET.apply(this,arguments)}function ST(e,t){return CT.apply(this,arguments)}function CT(){return CT=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:TT(t),wT(t)?(t.Jr.Kr(n),_T(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),CT.apply(this,arguments)}function NT(e,t,n){return AT.apply(this,arguments)}function AT(){return AT=ze(qe().mark((function e(t,n,r){var i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Ub&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Wy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,PT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Mb?t.Yr.ot(n):n instanceof Fb?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(vg.min())){e.next=29;break}return e.prev=14,e.next=17,mx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(Tg.EMPTY_BYTE_STRING,n.snapshotVersion)),bT(e,t);var r=new ow(n.target,t,1,n.sequenceNumber);kT(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Wy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,PT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),AT.apply(this,arguments)}function PT(e,t,n){return RT.apply(this,arguments)}function RT(){return RT=ze(qe().mark((function e(t,n,r){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($_(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,vT(t);case 5:t.Jr.set("Offline"),r||(r=function(){return mx(t.localStore)}),t.asyncQueue.enqueueRetryable(ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,dT(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function OT(e,t){return t().catch((function(n){return PT(e,n,t)}))}function DT(e){return LT.apply(this,arguments)}function LT(){return LT=ze(qe().mark((function e(t){var n,r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jy(t),r=$T(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!MT(n)){e.next=19;break}return e.prev=3,e.next=6,kx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,FT(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,PT(n,e.t0);case 17:e.next=2;break;case 19:UT(n)&&jT(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),LT.apply(this,arguments)}function MT(e){return xT(e)&&e.Qr.length<10}function FT(e,t){e.Qr.push(t);var n=$T(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function UT(e){return xT(e)&&!$T(e).hr()&&e.Qr.length>0}function jT(e){$T(e).start()}function qT(e){return VT.apply(this,arguments)}function VT(){return VT=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$T(t).kr();case 1:case"end":return e.stop()}}),e)}))),VT.apply(this,arguments)}function zT(e){return BT.apply(this,arguments)}function BT(){return BT=ze(qe().mark((function e(t){var n,r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$T(t),r=C(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}function WT(e,t,n){return HT.apply(this,arguments)}function HT(){return HT=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=aw.from(i,n,r),e.next=3,OT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,DT(t);case 5:case"end":return e.stop()}}),e)}))),HT.apply(this,arguments)}function KT(e,t){return GT.apply(this,arguments)}function GT(){return GT=ze(qe().mark((function e(t,n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&$T(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yb(i=n.code)||i===$y.ABORTED){e.next=7;break}return r=t.Qr.shift(),$T(t).wr(),e.next=5,OT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,DT(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:UT(t)&&jT(t);case 5:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function QT(e,t){return YT.apply(this,arguments)}function YT(){return YT=ze(qe().mark((function e(t,n){var r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jy(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,dT(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,vT(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),YT.apply(this,arguments)}function JT(e){return e.Xr||(e.Xr=function(e,t,n){var r=Jy(e);return r.Fr(),new uT(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:IT.bind(null,e),Ni:ST.bind(null,e),Pr:NT.bind(null,e)}),e.zr.push(function(){var t=ze(qe().mark((function t(n){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),wT(e)?_T(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:TT(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function $T(e){return e.Zr||(e.Zr=function(e,t,n){var r=Jy(e);return r.Fr(),new cT(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:qT.bind(null,e),Ni:KT.bind(null,e),Nr:zT.bind(null,e),Cr:WT.bind(null,e)}),e.zr.push(function(){var t=ze(qe().mark((function t(n){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,DT(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Wy("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var XT=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Zy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xy($y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ZT(e,t){if(Hy("AsyncQueue","".concat(t,": ").concat(e)),$_(e))return new Xy($y.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var eI=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||Lg.comparator(e.key,n.key)}:function(e,t){return Lg.comparator(e.key,t.key)},this.keyedMap=Sb(),this.sortedSet=new kb(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),tI=function(){function e(){d(this,e),this.eo=new kb(Lg.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Qy():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),nI=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ak(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,eI.emptySet(n),a,r,i,!0,!1)}}]),e}(),rI=y((function e(){d(this,e),this.so=void 0,this.listeners=[]})),iI=y((function e(){d(this,e),this.queries=new Gw((function(e){return Pk(e)}),Ak),this.onlineState="Unknown",this.io=new Set}));function aI(e,t){return oI.apply(this,arguments)}function oI(){return oI=ze(qe().mark((function e(t,n){var r,i,a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jy(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new rI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ZT(e.t0,"Initialization of query '".concat(Rk(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&fI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),oI.apply(this,arguments)}function sI(e,t){return uI.apply(this,arguments)}function uI(){return uI=ze(qe().mark((function e(t,n){var r,i,a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jy(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),uI.apply(this,arguments)}function cI(e,t){var n,r=Jy(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=C(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&fI(r)}function lI(e,t,n){var r=Jy(e),i=r.queries.get(t);if(i){var a,o=C(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function fI(e){e.io.forEach((function(e){e.next()}))}var hI=function(){function e(t,n,r){d(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new nI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=nI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),dI=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return y(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),pI=function(){function e(t){d(this,e),this.k=t}return y(e,[{key:"Hn",value:function(e){return Zb(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?a_(this.k,e.document,!1):Xg.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return Yb(e)}}]),e}(),vI=function(){function e(t,n,r){d(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=mI(t)}return y(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new pI(this.k),i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Hn(a.metadata.name),u=C(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Pb()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ze(qe().mark((function e(){var t,n,r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cx(this.localStore,new pI(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=C(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ax(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new sx(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function mI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var yI=y((function e(t){d(this,e),this.key=t})),gI=y((function e(t){d(this,e),this.key=t})),kI=function(){function e(t,n){d(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=Pb(),this.mutatedKeys=Pb(),this.Ao=Dk(t),this.Ro=new eI(this.Ao)}return y(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new tI,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=wk(this.query)&&i.size===this.query.limit?i.last():null,c=xk(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ok(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Ao(f,u)>0||c&&n.Ao(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),wk(this.query)||xk(this.query))for(;o.size>this.query.limit;){var l=wk(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:s,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qy()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],s=0===this.Io.size&&this.current?1:0,u=s!==this.Eo;return this.Eo=s,0!==a.length||u?{snapshot:new nI(this.query,e.Ro,i,a,e.mutatedKeys,0===s,u,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new tI,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=Pb(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new gI(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new yI(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=Pb();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return nI.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),bI=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),_I=y((function e(t){d(this,e),this.key=t,this.$o=!1})),wI=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new Gw((function(e){return Pk(e)}),Ak),this.Mo=new Map,this.Lo=new Set,this.Bo=new kb(Lg.comparator),this.Uo=new Map,this.qo=new Ox,this.Ko={},this.jo=new Map,this.Qo=Dw.re(),this.onlineState="Unknown",this.Wo=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function xI(e,t){return TI.apply(this,arguments)}function TI(){return TI=ze(qe().mark((function e(t,n){var r,i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mE(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,bx(r.localStore,Ck(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,II(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&yT(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function II(e,t,n,r){return EI.apply(this,arguments)}function EI(){return EI=ze(qe().mark((function e(t,n,r,i){var a,o,s,u,c,l;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=ze(qe().mark((function e(t,n,r,i){var a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,xx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(KI(t,n.targetId,s.Co),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,xx(t.localStore,n,!0);case 3:return a=e.sent,o=new kI(n,a.zn),s=o.bo(a.documents),u=Lb.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),KI(t,r,c.Co),l=new bI(n,r,o),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),EI.apply(this,arguments)}function SI(e,t){return CI.apply(this,arguments)}function CI(){return CI=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jy(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!Ak(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,_x(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),gT(r.remoteStore,i.targetId),WI(r,i.targetId)})).catch(jw);case 9:e.next=14;break;case 11:return WI(r,i.targetId),e.next=14,_x(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function NI(e,t,n){return AI.apply(this,arguments)}function AI(){return AI=ze(qe().mark((function e(t,n,r){var i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yE(t),e.prev=1,e.next=4,function(e,t){var n,r=Jy(e),i=pg.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Pb());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,s=[],u=C(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=ib(c,n.get(c.key));null!=l&&s.push(new ub(c.key,l,$g(l.value.mapValue),Zk.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.An.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new kb(fg)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,YI(i,a.changes);case 9:return e.next=11,DT(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ZT(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),AI.apply(this,arguments)}function PI(e,t){return RI.apply(this,arguments)}function RI(){return RI=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),e.prev=1,e.next=4,yx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(Yy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?Yy(n.$o):e.removedDocuments.size>0&&(Yy(n.$o),n.$o=!1))})),e.next=8,YI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,jw(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),RI.apply(this,arguments)}function OI(e,t,n){var r=Jy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Jy(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&fI(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function DI(e,t,n){return LI.apply(this,arguments)}function LI(){return LI=ze(qe().mark((function e(t,n,r){var i,a,o,s,u,c;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Jy(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new kb(Lg.comparator)).insert(o,Xg.newNoDocument(o,vg.min())),u=Pb().add(o),c=new Db(vg.min(),new Map,new wb(fg),s,u),e.next=9,PI(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),QI(i),e.next=16;break;case 14:return e.next=16,_x(i.localStore,n,!1).then((function(){return WI(i,n,r)})).catch(jw);case 16:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}function MI(e,t){return FI.apply(this,arguments)}function FI(){return FI=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),i=n.batch.batchId,e.prev=1,e.next=4,vx(r.localStore,n);case 4:return a=e.sent,BI(r,i,null),zI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,YI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,jw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),FI.apply(this,arguments)}function UI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jy(t),e.prev=1,e.next=4,function(e,t){var n=Jy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return Yy(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,BI(i,n,r),zI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,YI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,jw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jI.apply(this,arguments)}function qI(e,t){return VI.apply(this,arguments)}function VI(){return VI=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xT((r=Jy(t)).remoteStore)||Wy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Jy(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ZT(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),VI.apply(this,arguments)}function zI(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function BI(e,t,n){var r=Jy(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function WI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||HI(e,t)}))}function HI(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(gT(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),QI(e))}function KI(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof yI?(e.qo.addReference(a.key,t),GI(e,a)):a instanceof gI?(Wy("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||HI(e,a.key)):Qy()}}catch(o){i.e(o)}finally{i.f()}}function GI(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Wy("SyncEngine","New document in limbo: "+n),e.Lo.add(r),QI(e))}function QI(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Lg(bg.fromString(t)),r=e.Qo.next();e.Uo.set(r,new _I(n)),e.Bo=e.Bo.insert(n,r),yT(e.remoteStore,new ow(Ck(_k(n.path)),r,2,ug.I))}}function YI(e,t,n){return JI.apply(this,arguments)}function JI(){return JI=ze(qe().mark((function e(t,n,r){var i,a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Jy(t),a=[],o=[],s=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){s.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=cx.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Fo.Pr(a),e.next=9,function(){var e=ze(qe().mark((function e(t,n){var r,i,a,o,s,u,c,l;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return K_.forEach(n,(function(t){return K_.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return K_.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),$_(e.t0)){e.next=10;break}throw e.t0;case 10:Wy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function $I(e,t){return XI.apply(this,arguments)}function XI(){return XI=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Jy(t)).currentUser.isEqual(n)){e.next=11;break}return Wy("SyncEngine","User change. New user:",n.toKey()),e.next=5,dx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new Xy($y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,YI(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e,t){var n=Jy(e),r=n.Uo.get(t);if(r&&r.$o)return Pb().add(r.key);var i=Pb(),a=n.Mo.get(t);if(!a)return i;var o,s=C(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Oo.get(u);i=i.unionWith(c.view.Po)}}catch(l){s.e(l)}finally{s.f()}return i}function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),e.next=3,xx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&KI(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e){return rE.apply(this,arguments)}function rE(){return rE=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jy(t),e.abrupt("return",Ix(n.localStore).then((function(e){return YI(n,e)})));case 2:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t,n,r){return aE.apply(this,arguments)}function aE(){return aE=ze(qe().mark((function e(t,n,r,i){var a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Jy(t),e.next=3,function(e,t){var n=Jy(e),r=Jy(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):K_.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,DT(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(BI(a,n,i||null),zI(a,n),function(e,t){Jy(Jy(e).An).ee(t)}(a.localStore,n)):Qy();case 11:return e.next=13,YI(a,o);case 13:e.next=16;break;case 15:Wy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e,t){return sE.apply(this,arguments)}function sE(){return sE=ze(qe().mark((function e(t,n){var r,i,a,o,s,u,c,l;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mE(r=Jy(t)),yE(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,uE(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,QT(r.remoteStore,!0);case 9:o=C(a);try{for(o.s();!(s=o.n()).done;)u=s.value,yT(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return WI(r,t),_x(r.localStore,t,!0)})),gT(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,uE(r,c);case 21:return function(e){var t=Jy(e);t.Uo.forEach((function(e,n){gT(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new kb(Lg.comparator)}(r),r.Wo=!1,e.next=25,QT(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function uE(e,t,n){return cE.apply(this,arguments)}function cE(){return cE=ze(qe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Jy(t),a=[],o=[],s=C(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,bx(i.localStore,Ck(f[0]));case 11:l=e.sent,h=C(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Oo.get(p),e.next=20,eE(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Tx(i.localStore,c);case 36:return y=e.sent,e.next=39,bx(i.localStore,y);case 39:return l=e.sent,e.next=42,II(i,lE(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),cE.apply(this,arguments)}function lE(e){return bk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function fE(e){var t=Jy(e);return Jy(Jy(t.localStore).persistence).Tn()}function hE(e,t,n,r){return dE.apply(this,arguments)}function dE(){return dE=ze(qe().mark((function e(t,n,r,i){var a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Jy(t)).Wo){e.next=5;break}Wy("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Ix(a.localStore);case 11:return o=e.sent,s=Db.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,YI(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,_x(a.localStore,n,!0);case 18:return WI(a,n,i),e.abrupt("break",21);case 20:Qy();case 21:case"end":return e.stop()}}),e)}))),dE.apply(this,arguments)}function pE(e,t,n){return vE.apply(this,arguments)}function vE(){return vE=ze(qe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=mE(t)).Wo){e.next=45;break}a=C(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Mo.has(s)){e.next=10;break}return Wy("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Tx(i.localStore,s);case 12:return u=e.sent,e.next=15,bx(i.localStore,u);case 15:return c=e.sent,e.next=18,II(i,lE(u),c.targetId,!1);case 18:yT(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=C(r),e.prev=30,h=qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,_x(i.localStore,t,!1).then((function(){gT(i.remoteStore,t),WI(i,t)})).catch(jw);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),vE.apply(this,arguments)}function mE(e){var t=Jy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=PI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=DI.bind(null,t),t.Fo.Pr=cI.bind(null,t.eventManager),t.Fo.zo=lI.bind(null,t.eventManager),t}function yE(e){var t=Jy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=MI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=UI.bind(null,t),t}function gE(e,t,n){var r=Jy(e);(function(){var e=ze(qe().mark((function e(t,n,r){var i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Jy(e),r=Yb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(mI(i)),a=new vI(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,YI(t,u.In,void 0);case 30:return e.next=32,function(e,t){var n=Jy(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Ky("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var kE=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=aT(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return hx(this.persistence,new lx,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new jx(Vx.ks,this.k)}},{key:"Jo",value:function(e){return new $x}},{key:"terminate",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),bE=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=ze(qe().mark((function e(t){var r=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Ex(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,yE(this.ta.syncEngine);case 8:return e.next=10,DT(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return hx(this.persistence,new lx,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Bw(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=ox(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ew.withCacheSize(this.cacheSizeBytes):Ew.DEFAULT;return new rx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,rT(),iT(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new $x}}]),n}(kE),_E=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=ze(qe().mark((function e(t){var r,i=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof Jx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:iE.bind(null,r),gi:hE.bind(null,r),yi:pE.bind(null,r),Tn:fE.bind(null,r),_i:nE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oE(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=rT();if(!Jx.bt(t))throw new Xy($y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ox(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(bE),wE=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=ze(qe().mark((function e(t,n){var r=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return OI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=$I.bind(null,this.syncEngine),e.next=12,QT(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new iI}},{key:"createDatastore",value:function(e){var t,n=aT(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new nT(t));return function(e,t,n,r){return new lT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return OI(o.syncEngine,e,0)},a=Zx.bt()?new Zx:new Xx,new hT(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new wI(e,t,n,r,i,a);return o&&(s.Wo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jy(t),Wy("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,vT(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function xE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ze(qe().mark((function r(){var i;return qe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var TE=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),IE=function(){function e(t,n){var r=this;d(this,e),this.sa=t,this.k=n,this.metadata=new Zy,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=ze(qe().mark((function e(){var t,n,r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new dI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=ze(qe().mark((function e(){var t,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=ze(qe().mark((function e(){var t,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),EE=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=ze(qe().mark((function e(t){var n,r=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Xy($y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ze(qe().mark((function e(t,n){var r,i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),i=n_(r.k)+"/documents",a={documents:n.map((function(e){return Xb(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=o_(r.k,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Yy(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new pb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ze(qe().mark((function e(){var t,n=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Lg.fromPath(t);n.mutations.push(new vb(r,n.precondition(r)))})),e.next=7,function(){var e=ze(qe().mark((function e(t,n){var r,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jy(t),i=n_(r.k)+"/documents",a={writes:n.map((function(e){return s_(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qy();t=vg.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xy($y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zk.updateTime(t):Zk.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vg.min()))throw new Xy($y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zk.updateTime(t)}return Zk.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),SE=function(){function e(t,n,r,i){d(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new oT(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(ze(qe().mark((function t(){var n,r;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new EE(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!Rg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!yb(t)}return!1}}]),e}(),CE=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qy.UNAUTHENTICATED,this.clientId=lg.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return y(e,[{key:"getConfiguration",value:function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Xy($y.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Zy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ze(qe().mark((function n(){var r;return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ZT(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function NE(e,t){return AE.apply(this,arguments)}function AE(){return AE=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Wy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,dx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),AE.apply(this,arguments)}function PE(e,t){return RE.apply(this,arguments)}function RE(){return RE=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,OE(t);case 3:return r=e.sent,Wy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=ze(qe().mark((function e(t,n){var r,i;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Jy(t)).asyncQueue.verifyOperationInProgress(),Wy("RemoteStore","RemoteStore received new credentials"),i=xT(r),r.Gr.add(3),e.next=6,vT(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,dT(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),RE.apply(this,arguments)}function OE(e){return DE.apply(this,arguments)}function DE(){return DE=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Wy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,NE(t,new kE);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}function LE(e){return ME.apply(this,arguments)}function ME(){return ME=ze(qe().mark((function e(t){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Wy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,PE(t,new wE);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e){return OE(e).then((function(e){return e.persistence}))}function UE(e){return OE(e).then((function(e){return e.localStore}))}function jE(e){return LE(e).then((function(e){return e.remoteStore}))}function qE(e){return LE(e).then((function(e){return e.syncEngine}))}function VE(e){return zE.apply(this,arguments)}function zE(){return zE=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=xI.bind(null,n.syncEngine),r.onUnlisten=SI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),zE.apply(this,arguments)}function BE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function i(){return qe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new TE({next:function(a){t.enqueueAndForget((function(){return sI(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Xy($y.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Xy($y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new hI(_k(n.path),a,{includeMetadataChanges:!0,wo:!0});return aI(e,o)},i.next=3,VE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function WE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function i(){return qe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new TE({next:function(n){t.enqueueAndForget((function(){return sI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Xy($y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new hI(n,a,{includeMetadataChanges:!0,wo:!0});return aI(e,o)},i.next=3,VE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var HE=y((function e(t,n,r,i,a,o,s,u){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),KE=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),GE=new Map;function QE(e,t,n){if(!n)throw new Xy($y.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function YE(e,t,n,r){if(!0===t&&!0===r)throw new Xy($y.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function JE(e){if(!Lg.isDocumentKey(e))throw new Xy($y.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function $E(e){if(Lg.isDocumentKey(e))throw new Xy($y.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function XE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Qy()}function ZE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xy($y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=XE(e);throw new Xy($y.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function eS(e,t){if(t<=0)throw new Xy($y.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var tS=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Xy($y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xy($y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,YE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),nS=function(){function e(t,n,r){d(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tS({}),this._settingsFrozen=!1,t instanceof KE?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xy($y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new KE(e.options.projectId)}(t))}return y(e,[{key:"app",get:function(){if(!this._app)throw new Xy($y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Xy($y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tg;switch(e.type){case"gapi":var t=e.client;return Yy(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ag(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Xy($y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=GE.get(e);t&&(Wy("ComponentProvider","Removing Datastore"),GE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function rS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ZE(e,nS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ky("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=qy.MOCK_USER;else{o=Fi(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Xy($y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new qy(u)}e._authCredentials=new ng(new eg(o,s))}}var iS=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new oS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),aS=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),oS=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,_k(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new iS(this.firestore,null,new Lg(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(aS);function sS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ya(e),QE("collection","path",t),e instanceof nS){var a=bg.fromString.apply(bg,[t].concat(r));return $E(a),new oS(e,null,a)}if(!(e instanceof iS||e instanceof oS))throw new Xy($y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bg.fromString.apply(bg,[t].concat(r)));return $E(o),new oS(e.firestore,null,o)}function uS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ya(e),1===arguments.length&&(t=lg.A()),QE("doc","path",t),e instanceof nS){var a=bg.fromString.apply(bg,[t].concat(r));return JE(a),new iS(e,null,new Lg(a))}if(!(e instanceof iS||e instanceof oS))throw new Xy($y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bg.fromString.apply(bg,[t].concat(r)));return JE(o),new iS(e.firestore,e instanceof oS?e.converter:null,new Lg(o))}function cS(e,t){return e=ya(e),t=ya(t),(e instanceof iS||e instanceof oS)&&(t instanceof iS||t instanceof oS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function lS(e,t){return e=ya(e),t=ya(t),e instanceof aS&&t instanceof aS&&e.firestore===t.firestore&&Ak(e._query,t._query)&&e.converter===t.converter}var fS=function(){function e(){var t=this;d(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new oT(this,"async_queue_retry"),this.Ra=function(){var e=iT();e&&Wy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=iT();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return y(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=iT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new Zy;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=ze(qe().mark((function e(){var t=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),$_(e.t0)){e.next=12;break}throw e.t0;case 12:Wy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Hy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=XT.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&Qy()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=ze(qe().mark((function e(){var t;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=C(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function hS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=C(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var dS=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Zy,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),pS=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new fS,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||mS(this),this._firestoreClient.terminate()}}]),n}(nS);function vS(e){return e._firestoreClient||mS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function mS(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new HE(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new CE(e._authCredentials,e._appCheckCredentials,e._queue,r)}function yS(e,t,n){var r=new Zy;return e.asyncQueue.enqueue(ze(qe().mark((function i(){return qe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,NE(e,n);case 3:return i.next=5,PE(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===$y.FAILED_PRECONDITION||e.code===$y.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function gS(e){return function(e){return e.asyncQueue.enqueue(ze(qe().mark((function t(){var n,r;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FE(e);case 2:return n=t.sent,t.next=5,jE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Jy(e);return t.Gr.delete(0),dT(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(vS(e=ZE(e,pS)))}function kS(e){return function(e){return e.asyncQueue.enqueue(ze(qe().mark((function t(){var n,r;return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FE(e);case 2:return n=t.sent,t.next=5,jE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Jy(t)).Gr.add(0),e.next=4,vT(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(vS(e=ZE(e,pS)))}function bS(e,t){var n=vS(e=ZE(e,pS)),r=new dS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new IE(e,t)}(function(e,t){if(e instanceof Uint8Array)return xE(e,t);if(e instanceof ArrayBuffer)return xE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,aT(t));e.asyncQueue.enqueueAndForget(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gE,t.next=3,qE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function _S(e,t){return function(e,t){return e.asyncQueue.enqueue(ze(qe().mark((function n(){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Jy(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,UE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(vS(e=ZE(e,pS)),t).then((function(t){return t?new aS(e,null,t.query):null}))}function wS(e){if(e._initialized||e._terminated)throw new Xy($y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xS=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Xy($y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wg(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var TS=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Tg.fromBase64String(t))}catch(t){throw new Xy($y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Tg.fromUint8Array(t))}}]),e}(),IS=y((function e(t){d(this,e),this._methodName=t})),ES=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Xy($y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Xy($y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fg(this._lat,e._lat)||fg(this._long,e._long)}}]),e}(),SS=/^__.*__$/,CS=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ub(e,this.data,this.fieldMask,t,this.fieldTransforms):new sb(e,this.data,t,this.fieldTransforms)}}]),e}(),NS=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new ub(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function AS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qy()}}var PS=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return $S(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(AS(this.xa)&&SS.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),RS=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||aT(t)}return y(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new PS({xa:e,methodName:t,Ka:n,path:wg.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function OS(e){var t=e._freezeSettings(),n=aT(e._databaseId);return new RS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);GS("Data must be an object, but it was:",o,r);var s,u,c=HS(r,o);if(a.merge)s=new xg(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=C(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=QS(t,d,n);if(!o.contains(p))throw new Xy($y.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));XS(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new xg(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new CS(new Jg(c),s,u)}var LS=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(IS);function MS(e,t,n){return new PS({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var FS=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new $k(e.path,new Bk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(IS),US=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Qa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=MS(this,e,!0),n=this.Qa.map((function(e){return WS(e,t)})),r=new Wk(n);return new $k(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(IS),jS=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Qa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=MS(this,e,!0),n=this.Qa.map((function(e){return WS(e,t)})),r=new Kk(n);return new $k(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(IS),qS=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Wa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new Qk(e.k,Uk(e.k,this.Wa));return new $k(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(IS);function VS(e,t,n,r){var i=e.ja(1,t,n);GS("Data must be an object, but it was:",i,r);var a=[],o=Jg.empty();yg(r,(function(e,r){var s=JS(t,e,n);r=ya(r);var u=i.La(s);if(r instanceof LS)a.push(s);else{var c=WS(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new xg(a);return new NS(o,s,i.fieldTransforms)}function zS(e,t,n,r,i,a){var o=e.ja(1,t,n),s=[QS(t,r,n)],u=[i];if(a.length%2!=0)throw new Xy($y.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(QS(t,a[c])),u.push(a[c+1]);for(var l=[],f=Jg.empty(),h=s.length-1;h>=0;--h)if(!XS(l,s[h])){var d=s[h],p=u[h];p=ya(p);var v=o.La(d);if(p instanceof LS)l.push(d);else{var m=WS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new xg(l);return new NS(f,y,o.fieldTransforms)}function BS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return WS(n,e.ja(r?4:3,t))}function WS(e,t){if(KS(e=ya(e)))return GS("Unsupported field value:",t,e),HS(e,t);if(e instanceof IS)return function(e,t){if(!AS(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=WS(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ya(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uk(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=pg.fromDate(e);return{timestampValue:Kb(t.k,n)}}if(e instanceof pg){var r=new pg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Kb(t.k,r)}}if(e instanceof ES)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof TS)return{bytesValue:Gb(t.k,e._byteString)};if(e instanceof iS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Jb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(XE(e)))}(e,t)}function HS(e,t){var n={};return gg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yg(e,(function(e,r){var i=WS(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function KS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof pg||e instanceof ES||e instanceof TS||e instanceof iS||e instanceof IS)}function GS(e,t,n){if(!KS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=XE(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function QS(e,t,n){if((t=ya(t))instanceof xS)return t._internalPath;if("string"==typeof t)return JS(e,t);throw $S("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var YS=new RegExp("[~\\*/\\[\\]]");function JS(e,t,n){if(t.search(YS)>=0)throw $S("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(xS,h(t.split(".")))._internalPath}catch(r){throw $S("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $S(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Xy($y.INVALID_ARGUMENT,s+e+u)}function XS(e,t){return e.some((function(e){return e.isEqual(t)}))}var ZS=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new iS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new eC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),eC=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return vo(b(n.prototype),"data",this).call(this)}}]),n}(ZS);function tC(e,t){return"string"==typeof t?JS(e,t):t instanceof xS?t._internalPath:t._delegate._internalPath}var nC=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),rC=function(e){k(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return y(n,[{key:"exists",value:function(){return vo(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new iC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ZS),iC=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vo(b(n.prototype),"data",this).call(this,e)}}]),n}(rC),aC=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new nC(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new iC(n._firestore,n._userDataWriter,r.key,r,new nC(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xy($y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new iC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new iC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:oC(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function oC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qy()}}function sC(e,t){return e instanceof rC&&t instanceof rC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof aC&&t instanceof aC&&e._firestore===t._firestore&&lS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function uC(e){if(xk(e)&&0===e.explicitOrderBy.length)throw new Xy($y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cC=y((function e(){d(this,e)}));function lC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var fC=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=OS(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Xy($y.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){wC(o,a);var u,c=[],l=C(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(_C(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=_C(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wC(o,a),s=BS(n,"where",o,"in"===a||"not-in"===a);var h=ik.create(i,a,s);return function(e,t){if(t.V()){var n=Ik(e);if(null!==n&&!n.isEqual(t.field))throw new Xy($y.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Tk(e);null!==r&&xC(e,t.field,r)}var i=function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Xy($y.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xy($y.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new aS(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new kk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(cC);var hC=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Xy($y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xy($y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vk(t,n);return function(e,t){if(null===Tk(e)){var n=Ik(e);null!==n&&xC(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new aS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new kk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(cC);var dC=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return y(n,[{key:"_apply",value:function(e){return new aS(e.firestore,e.converter,Nk(e._query,this.Ya,this.Xa))}}]),n}(cC);var pC=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return y(n,[{key:"_apply",value:function(e){var t=bC(e,this.type,this.Za,this.tc);return new aS(e.firestore,e.converter,function(e,t){return new kk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(cC);function vC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pC("startAt",t,!0)}function mC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pC("startAfter",t,!1)}var yC=function(e){k(n,e);var t=T(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return y(n,[{key:"_apply",value:function(e){var t=bC(e,this.type,this.Za,this.tc);return new aS(e.firestore,e.converter,function(e,t){return new kk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(cC);function gC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yC("endBefore",t,!0)}function kC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yC("endAt",t,!1)}function bC(e,t,n,r){if(n[0]=ya(n[0]),n[0]instanceof ZS)return function(e,t,n,r,i){if(!r)throw new Xy($y.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=C(Sk(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Bg(t,r.key));else{var c=r.data.field(u.field);if(Ng(c))throw new Xy($y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Xy($y.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new dk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=OS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Xy($y.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Xy($y.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ek(e)&&-1!==c.indexOf("/"))throw new Xy($y.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(bg.fromString(c));if(!Lg.isDocumentKey(l))throw new Xy($y.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Lg(l);s.push(Bg(t,f))}else{var h=BS(n,r,c);s.push(h)}}return new dk(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function _C(e,t,n){if("string"==typeof(n=ya(n))){if(""===n)throw new Xy($y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ek(t)&&-1!==n.indexOf("/"))throw new Xy($y.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(bg.fromString(n));if(!Lg.isDocumentKey(r))throw new Xy($y.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bg(e,new Lg(r))}if(n instanceof iS)return Bg(e,n._key);throw new Xy($y.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(XE(n),"."))}function wC(e,t){if(!Array.isArray(e)||0===e.length)throw new Xy($y.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Xy($y.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function xC(e,t,n){if(!n.isEqual(t))throw new Xy($y.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var TC=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qy()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return yg(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ES(Sg(e.latitude),Sg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ag(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Pg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Eg(e);return new pg(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=bg.fromString(e);Yy(w_(n));var r=new KE(n.get(1),n.get(3)),i=new Lg(n.popFirst(5));return r.isEqual(t)||Hy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function IC(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var EC=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new TS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new iS(this.firestore,null,t)}}]),n}(TC),SC=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=OS(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=CC(e,this._firestore),i=IC(r.converter,t,n),a=DS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Zk.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=CC(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ya(t))||t instanceof xS?zS(this._dataReader,"WriteBatch.update",i._key,t,n,o):VS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Zk.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=CC(e,this._firestore);return this._mutations=this._mutations.concat(new pb(t._key,Zk.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Xy($y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function CC(e,t){if((e=ya(e)).firestore!==t)throw new Xy($y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var NC=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new TS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new iS(this.firestore,null,t)}}]),n}(TC);function AC(e){e=ZE(e,iS);var t=ZE(e.firestore,pS),n=vS(t),r=new NC(t);return function(e,t){var n=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function r(){return qe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ze(qe().mark((function e(t,n,r){var i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Jy(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Xy($y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ZT(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,UE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new rC(t,r,e._key,n,new nC(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function PC(e){e=ZE(e,aS);var t=ZE(e.firestore,pS),n=vS(t),r=new NC(t);return function(e,t){var n=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function r(){return qe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ze(qe().mark((function e(t,n,r){var i,a,o,s,u;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xx(t,n,!0);case 3:i=e.sent,a=new kI(n,i.zn),o=a.bo(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=ZT(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,UE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new aC(t,r,e,n)}))}function RC(e,t,n){e=ZE(e,iS);var r=ZE(e.firestore,pS),i=IC(e.converter,t,n);return MC(r,[DS(OS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zk.none())])}function OC(e,t,n){e=ZE(e,iS);for(var r=ZE(e.firestore,pS),i=OS(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return MC(r,[("string"==typeof(t=ya(t))||t instanceof xS?zS(i,"updateDoc",e._key,t,n,o):VS(i,"updateDoc",e._key,t)).toMutation(e._key,Zk.exists(!0))])}function DC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ya(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||hS(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(hS(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof iS)l=ZE(e.firestore,pS),f=_k(e._key.path),c={next:function(t){n[u]&&n[u](FC(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=ZE(e,aS);l=ZE(p.firestore,pS),f=p._query;var v=new NC(l);c={next:function(e){n[u]&&n[u](new aC(l,v,p,e))},error:n[u+1],complete:n[u+2]},uC(e._query)}return function(e,t,n,r){var i=new TE(r),a=new hI(t,i,n);return e.asyncQueue.enqueueAndForget(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=aI,t.next=3,VE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sI,t.next=3,VE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vS(l),f,h,c)}function LC(e,t){return function(e,t){var n=new TE(t);return e.asyncQueue.enqueueAndForget(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Jy(e).io.add(t),t.next()},t.next=3,VE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(ze(qe().mark((function t(){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Jy(e).io.delete(t)},t.next=3,VE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vS(e=ZE(e,pS)),hS(t)?t:{next:t})}function MC(e,t){return function(e,t){var n=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function r(){return qe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=NI,r.next=3,qE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(vS(e),t)}function FC(e,t,n){var r=n.docs.get(t._key),i=new NC(e);return new rC(e,i,t._key,r,new nC(n.hasPendingWrites,n.fromCache),t.converter)}var UC=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=CC(e,this._firestore),i=new NC(this._firestore);return vo(b(n.prototype),"get",this).call(this,e).then((function(e){return new rC(t._firestore,i,r._key,e._document,new nC(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=OS(t)}return y(e,[{key:"get",value:function(e){var t=this,n=CC(e,this._firestore),r=new EC(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Qy();var i=e[0];if(i.isFoundDocument())return new ZS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ZS(t._firestore,r,n._key,null,n.converter);throw Qy()}))}},{key:"set",value:function(e,t,n){var r=CC(e,this._firestore),i=IC(r.converter,t,n),a=DS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=CC(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ya(t))||t instanceof xS?zS(this._dataReader,"Transaction.update",i._key,t,n,o):VS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=CC(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function jC(e,t){return function(e,t){var n=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function r(){var i;return qe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return LE(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new SE(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(vS(e=ZE(e,pS)),(function(n){return t(new UC(e,n))}))}function qC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new US("arrayUnion",t)}function VC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vy=e}($a),za(new ga("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new pS(i,new rg(e.getProvider("auth-internal")),new sg(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ro(jy,"3.4.1",e),ro(jy,"3.4.1","esm2017")}();function zC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function BC(){if("undefined"===typeof Uint8Array)throw new Xy("unimplemented","Uint8Arrays are not available in this environment.")}function WC(){if("undefined"==typeof atob)throw new Xy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var HC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return WC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return BC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return WC(),new e(TS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return BC(),new e(TS.fromUint8Array(t))}}]),e}();function KC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var GC=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){wS(e=ZE(e,pS));var n=vS(e),r=e._freezeSettings(),i=new wE;return yS(n,i,new bE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){wS(e=ZE(e,pS));var t=vS(e),n=e._freezeSettings(),r=new wE;return yS(t,r,new _E(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Xy($y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Zy;return e._queue.enqueueAndForgetEvenWhileRestricted(ze(qe().mark((function n(){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ze(qe().mark((function e(t){var n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q_.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Q_.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ox(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),QC=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof KE||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ky("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return gS(this._delegate)}},{key:"disableNetwork",value:function(){return kS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&YE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Zy;return e.asyncQueue.enqueueAndForget(ze(qe().mark((function n(){return qe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=qI,n.next=3,qE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(vS(e=ZE(e,pS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return LC(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Xy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new uN(this,sS(this._delegate,e))}catch(UU){throw eN(UU,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ZC(this,uS(this._delegate,e))}catch(UU){throw eN(UU,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new aN(this,function(e,t){if(e=ZE(e,nS),QE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xy($y.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new aS(e,null,function(e){return new kk(bg.emptyPath(),e)}(t))}(this._delegate,e))}catch(UU){throw eN(UU,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return jC(this._delegate,(function(n){return e(new JC(t,n))}))}},{key:"batch",value:function(){var e=this;return vS(this._delegate),new $C(new SC(this._delegate,(function(t){return MC(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return bS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return _S(this._delegate,e).then((function(e){return e?new aN(t,e):null}))}}]),e}(),YC=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new HC(new TS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ZC.forKey(t,this.firestore,null)}}]),n}(TC);var JC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new YC(t)}return y(e,[{key:"get",value:function(e){var t=this,n=cN(e);return this._delegate.get(n).then((function(e){return new rN(t._firestore,new rC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=cN(e);return n?(zC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=cN(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cN(e);return this._delegate.delete(t),this}}]),e}(),$C=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=cN(e);return n?(zC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=cN(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cN(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),XC=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new iC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iN(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new YC(t),n),i.set(n,a)),a}}]),e}();XC.INSTANCES=new WeakMap;var ZC=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new YC(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new uN(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new uN(this.firestore,sS(this._delegate,e))}catch(UU){throw eN(UU,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ya(e))instanceof iS&&cS(this._delegate,e)}},{key:"set",value:function(e,t){t=zC("DocumentReference.set",t);try{return t?RC(this._delegate,e,t):RC(this._delegate,e)}catch(UU){throw eN(UU,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?OC(this._delegate,e):OC.apply(void 0,[this._delegate,e,t].concat(r))}catch(UU){throw eN(UU,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return MC(ZE(e.firestore,pS),[new pb(e._key,Zk.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tN(n),a=nN(n,(function(t){return new rN(e.firestore,new rC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return DC(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?AC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ZE(e,iS);var t=ZE(e.firestore,pS);return BE(vS(t),e._key,{source:"server"}).then((function(n){return FC(t,e,n)}))}(this._delegate):function(e){e=ZE(e,iS);var t=ZE(e.firestore,pS);return BE(vS(t),e._key).then((function(n){return FC(t,e,n)}))}(this._delegate),t.then((function(e){return new rN(n.firestore,new rC(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(XC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Xy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new iS(n._delegate,r,new Lg(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new iS(n._delegate,r,t))}}]),e}();function eN(e,t,n){return e.message=e.message.replace(t,n),e}function tN(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!KC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function nN(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=KC(e[0])?e[0]:KC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rN=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new ZC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return sC(this._delegate,e._delegate)}}]),e}(),iN=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Qy()}(void 0!==t),t}}]),n}(rN),aN=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new YC(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,lC(this._delegate,function(e,t,n){var r=t,i=tC("where",e);return new fC(i,r,n)}(t,n,r)))}catch(UU){throw eN(UU,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,lC(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=tC("orderBy",e);return new hC(r,n)}(t,n)))}catch(UU){throw eN(UU,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,lC(this._delegate,function(e){return eS("limit",e),new dC("limit",e,"F")}(t)))}catch(UU){throw eN(UU,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,lC(this._delegate,function(e){return eS("limitToLast",e),new dC("limitToLast",e,"L")}(t)))}catch(UU){throw eN(UU,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,lC(this._delegate,vC.apply(void 0,arguments)))}catch(UU){throw eN(UU,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,lC(this._delegate,mC.apply(void 0,arguments)))}catch(UU){throw eN(UU,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,lC(this._delegate,gC.apply(void 0,arguments)))}catch(UU){throw eN(UU,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,lC(this._delegate,kC.apply(void 0,arguments)))}catch(UU){throw eN(UU,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return lS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?PC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ZE(e,aS);var t=ZE(e.firestore,pS),n=vS(t),r=new NC(t);return WE(n,e._query,{source:"server"}).then((function(n){return new aC(t,r,e,n)}))}(this._delegate):function(e){e=ZE(e,aS);var t=ZE(e.firestore,pS),n=vS(t),r=new NC(t);return uC(e._query),WE(n,e._query).then((function(n){return new aC(t,r,e,n)}))}(this._delegate),t.then((function(e){return new sN(n.firestore,new aC(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tN(n),a=nN(n,(function(t){return new sN(e.firestore,new aC(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return DC(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(XC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),oN=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new iN(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),sN=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new aN(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new iN(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new oN(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new iN(n._firestore,r))}))}},{key:"isEqual",value:function(e){return sC(this._delegate,e._delegate)}}]),e}(),uN=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ZC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ZC(this.firestore,void 0===e?uS(this._delegate):uS(this._delegate,e))}catch(UU){throw eN(UU,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ZE(e.firestore,pS),r=uS(e),i=IC(e.converter,t);return MC(n,[DS(OS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zk.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new ZC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return cS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(XC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(aN);function cN(e){return ZE(e,iS)}var lN=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(xS,n)}return y(e,[{key:"isEqual",value:function(e){return(e=ya(e))instanceof xS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(wg.keyField().canonicalString())}}]),e}(),fN=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new FS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new LS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=qC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=VC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new qS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),hN={Firestore:QC,GeoPoint:ES,Timestamp:pg,Blob:HC,Transaction:JC,WriteBatch:$C,DocumentReference:ZC,DocumentSnapshot:rN,Query:aN,QueryDocumentSnapshot:iN,QuerySnapshot:sN,CollectionReference:uN,FieldPath:lN,FieldValue:fN,setLogLevel:function(e){!function(e){zy.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ga("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},hN)))}(e,(function(e,t){return new QC(e,t,new GC)})),e.registerVersion("@firebase/firestore-compat","0.1.10")}(ho);var dN="@firebase/database",pN="0.12.4",vN="";function mN(e){vN=e}var yN=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return y(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$i(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ji(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),gN=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return y(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Zi(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),kN=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new yN(t)}}catch(UU){}return new gN},bN=kN("localStorage"),_N=kN("sessionStorage"),wN=new Pa("@firebase/database"),xN=function(){var e=1;return function(){return e++}}(),TN=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ci(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ua;n.update(t);var r=n.digest();return Pi.encodeByteArray(r)},IN=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?$i(r):r,t+=" "}return t},EN=null,SN=!0,CN=function(e,t){Ci(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(wN.logLevel=wa.VERBOSE,EN=wN.log.bind(wN),t&&_N.set("logging_enabled",!0)):"function"===typeof e?EN=e:(EN=null,_N.remove("logging_enabled"))},NN=function(){if(!0===SN&&(SN=!1,null===EN&&!0===_N.get("logging_enabled")&&CN(!0)),EN){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=IN.apply(null,t);EN(r)}},AN=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];NN.apply(void 0,[e].concat(n))}},PN=function(){var e="FIREBASE INTERNAL ERROR: "+IN.apply(void 0,arguments);wN.error(e)},RN=function(){var e="FIREBASE FATAL ERROR: ".concat(IN.apply(void 0,arguments));throw wN.error(e),new Error(e)},ON=function(){var e="FIREBASE WARNING: "+IN.apply(void 0,arguments);wN.warn(e)},DN=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},LN="[MIN_NAME]",MN="[MAX_NAME]",FN=function(e,t){if(e===t)return 0;if(e===LN||t===MN)return-1;if(t===LN||e===MN)return 1;var n=GN(e),r=GN(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},UN=function(e,t){return e===t?0:e<t?-1:1},jN=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$i(t))},qN=function e(t){if("object"!==typeof t||null===t)return $i(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=$i(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},VN=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function zN(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var BN=function(e){Ci(!DN(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var WN=new RegExp("^-?(0*)\\d{1,10}$"),HN=-2147483648,KN=2147483647,GN=function(e){if(WN.test(e)){var t=Number(e);if(t>=HN&&t<=KN)return t}return null},QN=function(e){try{e()}catch(UU){setTimeout((function(){var t=UU.stack||"";throw ON("Exception was thrown by user callback.",t),UU}),Math.floor(0))}},YN=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},JN=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){ON('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),$N=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(NN("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ON(e)}}]),e}(),XN=function(){function e(t){d(this,e),this.accessToken=t}return y(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();XN.OWNER="owner";var ZN="5",eA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tA="ac",nA="websocket",rA="long_polling",iA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bN.get("host:"+t)||this._host}return y(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bN.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function aA(e,t,n){var r;if(Ci("string"===typeof t,"typeof type must == string"),Ci("object"===typeof n,"typeof params must == object"),t===nA)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==rA)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return zN(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var oA=function(){function e(){d(this,e),this.counters_={}}return y(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Zi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Li(void 0,this.counters_)}}]),e}(),sA={},uA={};function cA(e){var t=e.toString();return sA[t]||(sA[t]=new oA),sA[t]}var lA=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return y(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&QN((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),fA="start",hA="close",dA=function(){function e(t,n,r,i,a,o,s){var u=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=AN(t),this.stats_=cA(n),this.urlFn=function(e){return u.appCheckToken&&(e[tA]=u.appCheckToken),aA(n,rA,e)}}return y(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Wi()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new pA((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===fA)n.id=a,n.password=o;else{if(i!==hA)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[fA]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ZN,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[tA]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&eA.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=$i(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ri(t),r=VN(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Wi()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=$i(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Wi()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),pA=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Wi())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=xN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(UU){NN("frame writing exception"),UU.stack&&NN(UU.stack),NN(UU)}}}return y(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Wi()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){NN("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(UU){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||NN("No IE domain setting required")}catch(UU){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),vA=null;"undefined"!==typeof MozWebSocket?vA=MozWebSocket:"undefined"!==typeof WebSocket&&(vA=WebSocket);var mA=function(){function e(t,n,r,i,a,o,s){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=AN(this.connId),this.stats_=cA(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return y(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bN.set("previous_websocket_failure",!0);try{if(Wi()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(ZN,"/").concat(vN,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Noitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAeMT_g-N4d9SkDMyMDrYBzz0F1CQa55pI",REACT_APP_APP_ID:"1:958832699613:web:9054ae936666c60a4b1334",REACT_APP_AUTH_DOMAIN:"twitter-clone-305fe.firebaseapp.com",REACT_APP_MESSAGIN_ID:"958832699613",REACT_APP_PROJECT_ID:"twitter-clone-305fe",REACT_APP_STORAGE_BUCKET:"twitter-clone-305fe.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new vA(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new vA(this.connURL,[],s)}}catch(UU){this.log_("Error instantiating WebSocket.");var u=UU.message||UU.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){bN.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ji(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ci(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=$i(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=VN(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(UU){this.log_("Exception thrown from WebSocket.send():",UU.message||UU.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=ZN,!Wi()&&"undefined"!==typeof location&&location.hostname&&eA.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i[tA]=r),aA(e,nA,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==vA&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return bN.isInMemoryStorage||!0===bN.get("previous_websocket_failure")}}]),e}();mA.responsesRequiredToBeHealthy=2,mA.healthyTimeout=3e4;var yA=function(){function e(t){d(this,e),this.initTransports_(t)}return y(e,[{key:"initTransports_",value:function(t){var n=mA&&mA.isAvailable(),r=n&&!mA.previouslyFailed();if(t.webSocketOnly&&(n||ON("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[mA];else{var i,a=this.transports_=[],o=C(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[dA,mA]}}]),e}(),gA=function(){function e(t,n,r,i,a,o,s,u,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=AN("c:"+this.id+":"),this.transportManager_=new yA(n),this.log_("Connection created"),this.start_()}return y(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=YN((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=jN("t",e),n=jN("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=jN("t",e),n=jN("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=jN("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?PN("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PN("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ZN!==n&&ON("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),YN((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):YN((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bN.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),kA=function(){function e(){d(this,e)}return y(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),bA=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Ci(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return y(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ci(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),_A=function(e){k(n,e);var t=T(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ji()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(n,[{key:"getInitialEvent",value:function(e){return Ci("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(bA),wA=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return y(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function xA(){return new wA("")}function TA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function IA(e){return e.pieces_.length-e.pieceNum_}function EA(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new wA(e.pieces_,t)}function SA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function CA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function NA(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new wA(t,0)}function AA(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof wA)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new wA(n,0)}function PA(e){return e.pieceNum_>=e.pieces_.length}function RA(e,t){var n=TA(e),r=TA(t);if(null===n)return t;if(n===r)return RA(EA(e),EA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function OA(e,t){for(var n=CA(e,0),r=CA(t,0),i=0;i<n.length&&i<r.length;i++){var a=FN(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function DA(e,t){if(IA(e)!==IA(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function LA(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(IA(e)>IA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var MA=y((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=CA(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ma(this.parts_[r]);FA(this)}));function FA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+UA(e))}function UA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var jA=function(e){k(n,e);var t=T(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return y(n,[{key:"getInitialEvent",value:function(e){return Ci("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(bA),qA=1e3,VA=function(e){k(n,e);var t=T(n);function n(e,r,i,a,o,s,u,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=AN("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=qA,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Wi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return jA.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&_A.getInstance().on("online",l.onOnline_,w(l)),l}return y(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_($i(i)),Ci(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Mi,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ci(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ci(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Xi(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Xi(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ci(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+$i(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):PN("Unrecognized action received from server: "+$i(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ci(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=ze(qe().mark((function e(){var t,r,i,a,o,s,u,c,f,h,d,p,v,m,y=this;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},f=function(e){Ci(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=l(d,2),v=p[0],m=p[1],s?NN("getToken() completed but was canceled"):(NN("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,u=new gA(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){ON(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&ON(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){NN("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){NN("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ta(this.interruptReasons_)&&(this.reconnectDelay_=qA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return qN(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new wA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){NN("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){NN("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=C(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=C(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Wi()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+vN.replace(/\./g,"-")]=1,ji()?e["framework.cordova"]=1:zi()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=_A.getInstance().currentlyOnline();return ta(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Zi(e,"w")){var n=ea(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ON("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(kA);VA.nextPersistentConnectionId_=0,VA.nextConnectionId_=0;var zA,BA=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return y(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),WA=function(){function e(){d(this,e)}return y(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new BA(LN,e),r=new BA(LN,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return BA.MIN}}]),e}(),HA=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){return FN(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ni("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return BA.MIN}},{key:"maxPost",value:function(){return new BA(MN,zA)}},{key:"makePost",value:function(e,t){return Ci("string"===typeof e,"KeyIndex indexValue must always be a string."),new BA(e,zA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return zA},set:function(e){zA=e}}]),n}(WA),KA=new HA,GA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return y(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),QA=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:$A.EMPTY_NODE,this.right=null!=a?a:$A.EMPTY_NODE}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return $A.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return $A.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();QA.RED=!0,QA.BLACK=!1;var YA,JA=function(){function e(){d(this,e)}return y(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new QA(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),$A=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,QA.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,QA.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new GA(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new GA(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new GA(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new GA(this.root_,null,this.comparator_,!0,e)}}]),e}();function XA(e,t){return FN(e.name,t.name)}function ZA(e,t){return FN(e,t)}$A.EMPTY_NODE=new JA;var eP,tP,nP,rP=function(e){return"number"===typeof e?"number:"+BN(e):"string:"+e},iP=function(e){if(e.isLeafNode()){var t=e.val();Ci("string"===typeof t||"number"===typeof t||"object"===typeof t&&Zi(t,".sv"),"Priority must be a string or number.")}else Ci(e===YA||e.isEmpty(),"priority of unexpected type.");Ci(e===YA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},aP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ci(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),iP(this.priorityNode_)}return y(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return PA(t)?this:".priority"===TA(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=TA(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ci(".priority"!==r||1===IA(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(EA(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+rP(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?BN(this.value_):this.value_,this.lazyHash_=TN(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ci(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ci(i>=0,"Unknown leaf type: "+n),Ci(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return eP},set:function(e){eP=e}}]),e}();aP.VALUE_TYPE_ORDER=["object","boolean","number","string"];var oP,sP,uP=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?FN(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return BA.MIN}},{key:"maxPost",value:function(){return new BA(MN,new aP("[PRIORITY-POST]",nP))}},{key:"makePost",value:function(e,t){var n=tP(e);return new BA(t,new aP("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(WA),cP=new uP,lP=Math.log(2),fP=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/lP,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return y(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),hP=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new QA(o,a.node,QA.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new QA(o,a.node,QA.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new QA(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,QA.BLACK):(s(f,QA.BLACK),s(f,QA.RED))}return a}(new fP(e.length));return new $A(r||t,a)},dP={},pP=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return y(e,[{key:"get",value:function(e){var t=ea(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $A?t:null}},{key:"hasIndex",value:function(e){return Zi(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ci(t!==KA,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(BA.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?hP(i,t.getCompare()):dP;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(na(this.indexes_,(function(e,i){var a=ea(r.indexSet_,i);if(Ci(a,"Missing index implementation for "+i),e===dP){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(BA.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),hP(o,a.getCompare())}return dP}var c=n.get(t.name),l=e;return c&&(l=l.remove(new BA(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(na(this.indexes_,(function(e){if(e===dP)return e;var r=n.get(t.name);return r?e.remove(new BA(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ci(dP&&cP,"ChildrenNode.ts has not been loaded"),oP=oP||new e({".priority":dP},{".priority":cP})}}]),e}(),vP=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&iP(this.priorityNode_),this.children_.isEmpty()&&Ci(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return y(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||sP}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?sP:t}},{key:"getChild",value:function(e){var t=TA(e);return null===t?this:this.getImmediateChild(t).getChild(EA(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ci(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new BA(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?sP:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=TA(e);if(null===n)return t;Ci(".priority"!==TA(e)||1===IA(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(EA(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(cP,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+rP(this.getPriority().val())+":"),this.forEachChild(cP,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":TN(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new BA(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new BA(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new BA(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,BA.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,BA.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mP?-1:0}},{key:"withIndex",value:function(t){if(t===KA||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===KA||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(cP),r=t.getIterator(cP),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===KA?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return sP||(sP=new e(new $A(ZA),null,pP.Default))}}]),e}();vP.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var mP=new(function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.call(this,new $A(ZA),vP.EMPTY_NODE,pP.Default)}return y(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return vP.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(vP));Object.defineProperties(BA,{MIN:{value:new BA(LN,vP.EMPTY_NODE)},MAX:{value:new BA(MN,mP)}}),HA.__EMPTY_NODE=vP.EMPTY_NODE,aP.__childrenNodeConstructor=vP,YA=mP,function(e){nP=e}(mP);function yP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return vP.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ci(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new aP(n,yP(t))}if(e instanceof Array){var r=vP.EMPTY_NODE;return zN(e,(function(t,n){if(Zi(e,t)&&"."!==t.substring(0,1)){var i=yP(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(yP(t))}var i=[],a=!1,o=e;if(zN(o,(function(e,t){if("."!==e.substring(0,1)){var n=yP(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new BA(e,n)))}})),0===i.length)return vP.EMPTY_NODE;var s=hP(i,XA,(function(e){return e.name}),ZA);if(a){var u=hP(i,cP.getCompare());return new vP(s,yP(t),new pP({".priority":u},{".priority":cP}))}return new vP(s,yP(t),pP.Default)}!function(e){tP=e}(yP);var gP=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Ci(!PA(e)&&".priority"!==TA(e),"Can't create PathIndex with empty path or .priority key"),r}return y(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?FN(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=yP(e),r=vP.EMPTY_NODE.updateChild(this.indexPath_,n);return new BA(t,r)}},{key:"maxPost",value:function(){var e=vP.EMPTY_NODE.updateChild(this.indexPath_,mP);return new BA(MN,e)}},{key:"toString",value:function(){return CA(this.indexPath_,0).join("/")}}]),n}(WA),kP=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?FN(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return BA.MIN}},{key:"maxPost",value:function(){return BA.MAX}},{key:"makePost",value:function(e,t){var n=yP(e);return new BA(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(WA),bP=new kP,_P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wP=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=_P.charAt(n%64),n=Math.floor(n/64);Ci(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=_P.charAt(t[r]);return Ci(20===o.length,"nextPushId: Length should be 20."),o}}(),xP=function(e){if(e===""+KN)return"-";var t=GN(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return MN;var a=n[i],o=_P.charAt(_P.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},TP=function(e){if(e===""+HN)return LN;var t=GN(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?""+KN:(delete n[n.length-1],n.join("")):(n[n.length-1]=_P.charAt(_P.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function IP(e){return{type:"value",snapshotNode:e}}function EP(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function SP(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function CP(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var NP=function(){function e(t){d(this,e),this.index_=t}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ci(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(SP(t,o)):Ci(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(EP(t,n)):a.trackChildChange(CP(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(cP,(function(e,r){t.hasChild(e)||n.trackChildChange(SP(e,r))})),t.isLeafNode()||t.forEachChild(cP,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(CP(t,r,i))}else n.trackChildChange(EP(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?vP.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),AP=function(){function e(t){d(this,e),this.indexedFilter_=new NP(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return y(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new BA(t,n))||(n=vP.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=vP.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(vP.EMPTY_NODE);var i=this;return t.forEachChild(cP,(function(e,t){i.matches(new BA(e,t))||(r=r.updateImmediateChild(e,vP.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),PP=function(){function e(t){d(this,e),this.rangedFilter_=new AP(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new BA(t,n))||(n=vP.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=vP.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=vP.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(vP.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,u)<=0?h++:r=r.updateImmediateChild(p.name,vP.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ci(s.numChildren()===this.limit_,"");var u=new BA(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(CP(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(SP(t,f));var p=s.updateImmediateChild(t,vP.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(EP(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(SP(c.name,c.node)),i.trackChildChange(EP(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,vP.EMPTY_NODE)):e}}]),e}(),RP=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cP}return y(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ci(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ci(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:LN}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ci(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ci(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MN}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ci(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===cP}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function OP(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function DP(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function LP(e,t){var n=e.copy();return n.index_=t,n}function MP(e){var t,n={};return e.isDefault()||(e.index_===cP?t="$priority":e.index_===bP?t="$value":e.index_===KA?t="$key":(Ci(e.index_ instanceof gP,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=$i(t),e.startSet_&&(n.startAt=$i(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+$i(e.indexStartName_))),e.endSet_&&(n.endAt=$i(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+$i(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function FP(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==cP&&(t.i=e.index_.toString()),t}var UP=function(e){k(n,e);var t=T(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=AN("p:rest:"),o.listens_={},o}return y(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=MP(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ea(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=MP(e._queryParams),r=e._path.toString(),i=new Mi;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+aa(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Ji(c.responseText)}catch(UU){ON("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&ON("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ci(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(kA),jP=function(){function e(){d(this,e),this.rootNode_=vP.EMPTY_NODE}return y(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function qP(){return{value:null,children:new Map}}function VP(e,t,n){if(PA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=TA(t);e.children.has(r)||e.children.set(r,qP()),VP(e.children.get(r),t=EA(t),n)}}function zP(e,t){if(PA(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(cP,(function(t,n){VP(e,new wA(t),n)})),zP(e,t)}if(e.children.size>0){var r=TA(t);if(t=EA(t),e.children.has(r))zP(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function BP(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){BP(r,new wA(t.toString()+"/"+e),n)}))}var WP,HP=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return y(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&zN(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),KP=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new HP(t);var r=1e4+2e4*Math.random();YN(this.reportStats_.bind(this),Math.floor(r))}return y(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;zN(t,(function(t,i){i>0&&Zi(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),YN(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function GP(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(WP||(WP={}));var QP,YP=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=WP.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return y(e,[{key:"operationForChild",value:function(t){if(PA(this.path)){if(null!=this.affectedTree.value)return Ci(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new wA(t));return new e(xA(),n,this.revert)}return Ci(TA(this.path)===t,"operationForChild called for unrelated child."),new e(EA(this.path),this.affectedTree,this.revert)}}]),e}(),JP=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=WP.LISTEN_COMPLETE}return y(e,[{key:"operationForChild",value:function(t){return PA(this.path)?new e(this.source,xA()):new e(this.source,EA(this.path))}}]),e}(),$P=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=WP.OVERWRITE}return y(e,[{key:"operationForChild",value:function(t){return PA(this.path)?new e(this.source,xA(),this.snap.getImmediateChild(t)):new e(this.source,EA(this.path),this.snap)}}]),e}(),XP=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=WP.MERGE}return y(e,[{key:"operationForChild",value:function(t){if(PA(this.path)){var n=this.children.subtree(new wA(t));return n.isEmpty()?null:n.value?new $P(this.source,xA(),n.value):new e(this.source,xA(),n)}return Ci(TA(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,EA(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ZP=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return y(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(PA(e))return this.isFullyInitialized()&&!this.filtered_;var t=TA(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),eR=y((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function tR(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ni("Should only compare child_ events.");var r=new BA(t.childName,t.snapshotNode),i=new BA(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function nR(e,t){return{eventCache:e,serverCache:t}}function rR(e,t,n,r){return nR(new ZP(t,n,r),e.serverCache)}function iR(e,t,n,r){return nR(e.eventCache,new ZP(t,n,r))}function aR(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function oR(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var sR=function(){return QP||(QP=new $A(UN)),QP},uR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sR();d(this,e),this.value=t,this.children=n}return y(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:xA(),value:this.value};if(PA(e))return null;var n=TA(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(EA(e),t);return null!=i?{path:AA(new wA(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(PA(t))return this;var n=TA(t),r=this.children.get(n);return null!==r?r.subtree(EA(t)):new e(null)}},{key:"set",value:function(t,n){if(PA(t))return new e(n,this.children);var r=TA(t),i=(this.children.get(r)||new e(null)).set(EA(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(PA(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=TA(t),r=this.children.get(n);if(r){var i,a=r.remove(EA(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(PA(e))return this.value;var t=TA(e),n=this.children.get(t);return n?n.get(EA(e)):null}},{key:"setTree",value:function(t,n){if(PA(t))return n;var r,i=TA(t),a=(this.children.get(i)||new e(null)).setTree(EA(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(xA(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(AA(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,xA(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(PA(e))return null;var i=TA(e),a=this.children.get(i);return a?a.findOnPath_(EA(e),AA(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,xA(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(PA(t))return this;this.value&&r(n,this.value);var i=TA(t),a=this.children.get(i);return a?a.foreachOnPath_(EA(t),AA(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(xA(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(AA(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return zN(t,(function(e,t){n=n.set(new wA(e),t)})),n}}]),e}(),cR=function(){function e(t){d(this,e),this.writeTree_=t}return y(e,null,[{key:"empty",value:function(){return new e(new uR(null))}}]),e}();function lR(e,t,n){if(PA(t))return new cR(new uR(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=RA(i,t);return a=a.updateChild(o,n),new cR(e.writeTree_.set(i,a))}var s=new uR(n),u=e.writeTree_.setTree(t,s);return new cR(u)}function fR(e,t,n){var r=e;return zN(n,(function(e,n){r=lR(r,AA(t,e),n)})),r}function hR(e,t){if(PA(t))return cR.empty();var n=e.writeTree_.setTree(t,new uR(null));return new cR(n)}function dR(e,t){return null!=pR(e,t)}function pR(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(RA(n.path,t)):null}function vR(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cP,(function(e,n){t.push(new BA(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new BA(e,n.value))})),t}function mR(e,t){if(PA(t))return e;var n=pR(e,t);return new cR(null!=n?new uR(n):e.writeTree_.subtree(t))}function yR(e){return e.writeTree_.isEmpty()}function gR(e,t){return kR(xA(),e.writeTree_,t)}function kR(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ci(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=kR(AA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(AA(e,".priority"),r)),n}function bR(e,t){return DR(t,e)}function _R(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function wR(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ci(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&xR(s,r.path)?i=!1:LA(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=IR(e.allWrites,TR,xA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=hR(e.visibleWrites,r.path):zN(r.children,(function(t){e.visibleWrites=hR(e.visibleWrites,AA(r.path,t))}));return!0}return!1}function xR(e,t){if(e.snap)return LA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&LA(AA(e.path,n),t))return!0;return!1}function TR(e){return e.visible}function IR(e,t,n){for(var r=cR.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)LA(n,o)?r=lR(r,s=RA(n,o),a.snap):LA(o,n)&&(s=RA(o,n),r=lR(r,xA(),a.snap.getChild(s)));else{if(!a.children)throw Ni("WriteRecord should have .snap or .children");if(LA(n,o))r=fR(r,s=RA(n,o),a.children);else if(LA(o,n))if(PA(s=RA(o,n)))r=fR(r,xA(),a.children);else{var u=ea(a.children,TA(s));if(u){var c=u.getChild(EA(s));r=lR(r,xA(),c)}}}}}return r}function ER(e,t,n,r,i){if(r||i){var a=mR(e.visibleWrites,t);if(!i&&yR(a))return n;if(i||null!=n||dR(a,xA())){return gR(IR(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(LA(e.path,t)||LA(t,e.path))}),t),n||vP.EMPTY_NODE)}return null}var o=pR(e.visibleWrites,t);if(null!=o)return o;var s=mR(e.visibleWrites,t);return yR(s)?n:null!=n||dR(s,xA())?gR(s,n||vP.EMPTY_NODE):null}function SR(e,t,n,r){return ER(e.writeTree,e.treePath,t,n,r)}function CR(e,t){return function(e,t,n){var r=vP.EMPTY_NODE,i=pR(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(cP,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=mR(e.visibleWrites,t);return n.forEachChild(cP,(function(e,t){var n=gR(mR(a,new wA(e)),t);r=r.updateImmediateChild(e,n)})),vR(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return vR(mR(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function NR(e,t,n,r){return function(e,t,n,r,i){Ci(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=AA(t,n);if(dR(e.visibleWrites,a))return null;var o=mR(e.visibleWrites,a);return yR(o)?i.getChild(n):gR(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function AR(e,t){return function(e,t){return pR(e.visibleWrites,t)}(e.writeTree,AA(e.treePath,t))}function PR(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=mR(e.visibleWrites,t),c=pR(u,xA());if(null!=c)s=c;else{if(null==n)return[];s=gR(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function RR(e,t,n){return function(e,t,n,r){var i=AA(t,n),a=pR(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?gR(mR(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function OR(e,t){return DR(AA(e.treePath,t),e.writeTree)}function DR(e,t){return{treePath:e,writeTree:t}}var LR=function(){function e(){d(this,e),this.changeMap=new Map}return y(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ci("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ci(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,CP(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,SP(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,EP(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ni("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,CP(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),MR=new(function(){function e(){d(this,e)}return y(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),FR=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return y(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ZP(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RR(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:oR(this.viewCache_),i=PR(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function UR(e,t,n,r,i){var a,o,s=new LR;if(n.type===WP.OVERWRITE){var u=n;u.source.fromUser?a=VR(e,t,u.path,u.snap,r,i,s):(Ci(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!PA(u.path),a=qR(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===WP.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=AA(n,r);zR(t,TA(c))&&(s=VR(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=AA(n,r);zR(t,TA(c))||(s=VR(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ci(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=WR(e,t,c.path,c.children,r,i,o,s))}else if(n.type===WP.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=AR(r,n))return t;var s,u=new FR(r,t,i),c=t.eventCache.getNode();if(PA(n)||".priority"===TA(n)){var l;if(t.serverCache.isFullyInitialized())l=SR(r,oR(t));else{var f=t.serverCache.getNode();Ci(f instanceof vP,"serverChildren would be complete if leaf node"),l=CR(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=TA(n),d=RR(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,EA(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,vP.EMPTY_NODE,EA(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=SR(r,oR(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=AR(r,xA()),rR(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=AR(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(PA(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return qR(e,t,n,u.getNode().getChild(n),i,a,s,o);if(PA(n)){var c=new uR(null);return u.getNode().forEachChild(KA,(function(e,t){c=c.set(new wA(e),t)})),WR(e,t,n,c,i,a,s,o)}return t}var l=new uR(null);return r.foreach((function(e,t){var r=AA(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),WR(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==WP.LISTEN_COMPLETE)throw Ni("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=iR(t,a.getNode(),a.isFullyInitialized()||PA(n),a.isFiltered());return jR(e,o,n,r,MR,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=aR(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(IP(aR(t)))}}(t,a,f),{viewCache:a,changes:f}}function jR(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=AR(r,n))return t;if(PA(n))if(Ci(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=oR(t),l=CR(r,c instanceof vP?c:vP.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=SR(r,oR(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=TA(n);if(".priority"===h){Ci(1===IA(n),"Can't have a priority with additional path components");var d=u.getNode(),p=NR(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=EA(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var y=NR(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(h).updateChild(m,y):u.getNode().getImmediateChild(h)}else v=RR(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,m,i,a):u.getNode()}}return rR(t,o,u.isFullyInitialized()||PA(n),e.filter.filtersNodes())}function qR(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(PA(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=TA(n);if(!c.isCompleteForPath(n)&&IA(n)>1)return t;var d=EA(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,MR,null)}var v=iR(t,u,c.isFullyInitialized()||PA(n),l.filtersNodes());return jR(e,v,n,i,new FR(i,v,a),s)}function VR(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new FR(i,t,a);if(PA(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=rR(t,u,!0,e.filter.filtersNodes());else{var f=TA(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=rR(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=EA(n),p=c.getNode().getImmediateChild(f);if(PA(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===SA(d)&&v.getChild(NA(d)).isEmpty()?v:v.updateChild(d,r):vP.EMPTY_NODE}if(p.equals(h))s=t;else s=rR(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function zR(e,t){return e.eventCache.isCompleteForChild(t)}function BR(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function WR(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=PA(n)?r:new uR(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=BR(0,t.serverCache.getNode().getImmediateChild(n),r);c=qR(e,c,new wA(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var f=BR(0,t.serverCache.getNode().getImmediateChild(n),r);c=qR(e,c,new wA(n),f,i,a,o,s)}})),c}var HR,KR=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new NP(i.getIndex()),o=(r=i).loadsAllData()?new NP(r.getIndex()):r.hasLimit()?new PP(r):new AP(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(vP.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(vP.EMPTY_NODE,u.getNode(),null),f=new ZP(c,s.isFullyInitialized(),a.filtersNodes()),h=new ZP(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=nR(h,f),this.eventGenerator_=new eR(this.query_)}return y(e,[{key:"query",get:function(){return this.query_}}]),e}();function GR(e,t){var n=oR(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!PA(t)&&!n.getImmediateChild(TA(t)).isEmpty())?n.getChild(t):null}function QR(e){return 0===e.eventRegistrations_.length}function YR(e,t,n){var r=[];if(n){Ci(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function JR(e,t,n,r){t.type===WP.MERGE&&null!==t.source.queryId&&(Ci(oR(e.viewCache_),"We should always have a full cache before handling merges"),Ci(aR(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=UR(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ci(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ci(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ci(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,$R(e,s.changes,s.viewCache.eventCache.getNode(),null)}function $R(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),tR(e,i,"child_removed",t,r,n),tR(e,i,"child_added",t,r,n),tR(e,i,"child_moved",a,r,n),tR(e,i,"child_changed",t,r,n),tR(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var XR,ZR=y((function e(){d(this,e),this.views=new Map}));function eO(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ci(null!=a,"SyncTree gave us an op for an invalid query."),JR(a,t,n,r)}var o,s=[],u=C(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(JR(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function tO(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=SR(n,i?r:null),u=!1;s?u=!0:r instanceof vP?(s=CR(n,r),u=!1):(s=vP.EMPTY_NODE,u=!1);var c=nR(new ZP(s,u,!1),new ZP(r,i,!1));return new KR(t,c)}return o}function nO(e,t,n,r,i,a){var o=tO(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(cP,(function(e,t){r.push(EP(e,t))})),n.isFullyInitialized()&&r.push(IP(n.getNode())),$R(e,r,n.getNode(),t)}(o,n)}function rO(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=uO(e);if("default"===i){var u,c=C(e.views.entries());try{for(c.s();!(u=c.n()).done;){var f=l(u.value,2),h=f[0],d=f[1];o=o.concat(YR(d,n,r)),QR(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(YR(p,n,r)),QR(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!uO(e)&&a.push(new(Ci(HR,"Reference.ts has not been loaded"),HR)(t._repo,t._path)),{removed:a,events:o}}function iO(e){var t,n=[],r=C(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function aO(e,t){var n,r=null,i=C(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||GR(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function oO(e,t){if(t._queryParams.loadsAllData())return cO(e);var n=t._queryIdentifier;return e.views.get(n)}function sO(e,t){return null!=oO(e,t)}function uO(e){return null!=cO(e)}function cO(e){var t,n=C(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var lO=1,fO=y((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new uR(null),this.pendingWriteTree_={visibleWrites:cR.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function hO(e,t,n,r,i){return function(e,t,n,r,i){Ci(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=lR(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?bO(e,new $P({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function dO(e,t,n,r){!function(e,t,n,r){Ci(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=fR(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=uR.fromObject(n);return bO(e,new XP({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function pO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_R(e.pendingWriteTree_,t),i=wR(e.pendingWriteTree_,t);if(i){var a=new uR(null);return null!=r.snap?a=a.set(xA(),!0):zN(r.children,(function(e){a=a.set(new wA(e),!0)})),bO(e,new YP(r.path,a,n))}return[]}function vO(e,t,n){return bO(e,new $P({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mO(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||sO(a,t))){var s=rO(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return uO(t)}));if(c&&!l){var f=e.syncPointTree_.subtree(i);if(!f.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&uO(t))return[cO(t)];var r=[];return t&&(r=iO(t)),zN(n,(function(e,t){r=r.concat(t)})),r}))}(f),d=0;d<h.length;++d){var p=h[d],v=p.query,m=xO(e,p);e.listenProvider_.startListening(NO(v),TO(e,v),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(NO(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(IO(t));e.listenProvider_.stopListening(NO(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=IO(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function yO(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=RA(e,r);i=i||aO(t,n),a=a||uO(t)}));var o,s=e.syncPointTree_.get(r);(s?(a=a||uO(s),i=i||aO(s,xA())):(s=new ZR,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?o=!0:(o=!1,i=vP.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=aO(t,xA());n&&(i=i.updateImmediateChild(e,n))})));var u=sO(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=IO(t);Ci(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=lO++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var f=nO(s,t,n,bR(e.pendingWriteTree_,r),i,o);if(!u&&!a){var h=oO(s,t);f=f.concat(function(e,t,n){var r=t._path,i=TO(e,t),a=xO(e,n),o=e.listenProvider_.startListening(NO(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ci(!uO(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!PA(e)&&t&&uO(t))return[cO(t).query];var r=[];return t&&(r=r.concat(iO(t).map((function(e){return e.query})))),zN(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(NO(l),TO(e,l))}return o}(e,t,h))}return f}function gO(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=aO(n,RA(e,t));if(r)return r}));return ER(r,t,i,n,!0)}function kO(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=RA(e,n);r=r||aO(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||aO(i,xA()):(i=new ZR,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ZP(r,!0,!1):null;return function(e){return aR(e.viewCache_)}(tO(i,t,bR(e.pendingWriteTree_,t._path),a?o.getNode():vP.EMPTY_NODE,a))}function bO(e,t){return _O(t,e.syncPointTree_,null,bR(e.pendingWriteTree_,xA()))}function _O(e,t,n,r){if(PA(e.path))return wO(e,t,n,r);var i=t.get(xA());null==n&&null!=i&&(n=aO(i,xA()));var a=[],o=TA(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=OR(r,o);a=a.concat(_O(s,u,c,l))}return i&&(a=a.concat(eO(i,e,r,n))),a}function wO(e,t,n,r){var i=t.get(xA());null==n&&null!=i&&(n=aO(i,xA()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=OR(r,t),u=e.operationForChild(t);u&&(a=a.concat(wO(u,i,o,s)))})),i&&(a=a.concat(eO(i,e,r,n))),a}function xO(e,t){var n=t.query,r=TO(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||vP.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=EO(e,n);if(r){var i=SO(r),a=i.path,o=i.queryId,s=RA(a,t);return CO(e,a,new JP(GP(o),s))}return[]}(e,n._path,r):function(e,t){return bO(e,new JP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return mO(e,n,null,i)}}}function TO(e,t){var n=IO(t);return e.queryToTagMap.get(n)}function IO(e){return e._path.toString()+"$"+e._queryIdentifier}function EO(e,t){return e.tagToQueryMap.get(t)}function SO(e){var t=e.indexOf("$");return Ci(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new wA(e.substr(0,t))}}function CO(e,t,n){var r=e.syncPointTree_.get(t);return Ci(r,"Missing sync point for query tag that we're tracking"),eO(r,n,bR(e.pendingWriteTree_,t),null)}function NO(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ci(XR,"Reference.ts has not been loaded"),XR)(e._repo,e._path):e}var AO=function(){function e(t){d(this,e),this.node_=t}return y(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),PO=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return y(e,[{key:"getImmediateChild",value:function(t){var n=AA(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return gO(this.syncTree_,this.path_)}}]),e}(),RO=function(e,t,n){return e&&"object"===typeof e?(Ci(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?OO(e[".sv"],t,n):"object"===typeof e[".sv"]?DO(e[".sv"],t):void Ci(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},OO=function(e,t,n){if("timestamp"===e)return n.timestamp;Ci(!1,"Unexpected server value: "+e)},DO=function(e,t,n){e.hasOwnProperty("increment")||Ci(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ci(!1,"Unexpected increment value: "+r);var i=t.node();if(Ci(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},LO=function(e,t,n,r){return FO(t,new PO(n,e),r)},MO=function(e,t,n){return FO(e,new AO(t),n)};function FO(e,t,n){var r,i=e.getPriority().val(),a=RO(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=RO(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new aP(s,yP(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new aP(a))),u.forEachChild(cP,(function(e,i){var a=FO(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var UO=y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function jO(e,t){for(var n=t instanceof wA?t:new wA(t),r=e,i=TA(n);null!==i;){var a=ea(r.node.children,i)||{children:{},childCount:0};r=new UO(i,r,a),i=TA(n=EA(n))}return r}function qO(e){return e.node.value}function VO(e,t){e.node.value=t,KO(e)}function zO(e){return e.node.childCount>0}function BO(e,t){zN(e.node.children,(function(n,r){t(new UO(n,e,r))}))}function WO(e,t,n,r){n&&!r&&t(e),BO(e,(function(e){WO(e,t,!0,r)})),n&&r&&t(e)}function HO(e){return new wA(null===e.parent?e.name:HO(e.parent)+"/"+e.name)}function KO(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===qO(e)&&!zO(e)}(n),i=Zi(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,KO(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,KO(e))}(e.parent,e.name,e)}var GO=/[\[\].#$\/\u0000-\u001F\u007F]/,QO=/[\[\].#$\u0000-\u001F\u007F]/,YO=10485760,JO=function(e){return"string"===typeof e&&0!==e.length&&!GO.test(e)},$O=function(e){return"string"===typeof e&&0!==e.length&&!QO.test(e)},XO=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!DN(e)||e&&"object"===typeof e&&Zi(e,".sv")},ZO=function(e,t,n,r){r&&void 0===t||eD(da(e,"value"),t,n)},eD=function e(t,n,r){var i=r instanceof wA?new MA(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+UA(i));if("function"===typeof n)throw new Error(t+"contains a function "+UA(i)+" with contents = "+n.toString());if(DN(n))throw new Error(t+"contains "+n.toString()+" "+UA(i));if("string"===typeof n&&n.length>YO/3&&ma(n)>YO)throw new Error(t+"contains a string greater than "+YO+" utf8 bytes "+UA(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(zN(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!JO(n)))throw new Error(t+" contains an invalid key ("+n+") "+UA(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ma(t),FA(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ma(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+UA(i)+" in addition to actual children.")}},tD=function(e,t,n,r){if(!r||void 0!==t){var i=da(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];zN(t,(function(e,t){var r=new wA(e);if(eD(i,t,AA(n,r)),".priority"===SA(r)&&!XO(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=CA(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!JO(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(OA);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&LA(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},nD=function(e,t,n){if(!n||void 0!==t){if(DN(t))throw new Error(da(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!XO(t))throw new Error(da(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rD=function(e,t,n,r){if((!r||void 0!==n)&&!JO(n))throw new Error(da(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iD=function(e,t,n,r){if((!r||void 0!==n)&&!$O(n))throw new Error(da(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},aD=function(e,t){if(".info"===TA(t))throw new Error(e+" failed = Can't modify data under /.info/")},oD=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!JO(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),$O(e)}(n))throw new Error(da(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},sD=y((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function uD(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||DA(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function cD(e,t,n){uD(e,n),fD(e,(function(e){return DA(e,t)}))}function lD(e,t,n){uD(e,n),fD(e,(function(e){return LA(e,t)||LA(t,e)}))}function fD(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(hD(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function hD(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();EN&&NN("event: "+n.toString()),QN(r)}}}var dD="repo_interrupt",pD=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qP(),this.transactionQueueTree_=new UO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return y(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function vD(e,t,n){if(e.stats_=cA(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new UP(e.repoInfo_,(function(t,n,r,i){gD(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return kD(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$i(n)}catch(UU){throw new Error("Invalid authOverride provided: "+UU)}}e.persistentConnection_=new VA(e.repoInfo_,t,(function(t,n,r,i){gD(e,t,n,r,i)}),(function(t){kD(e,t)}),(function(t){!function(e,t){zN(t,(function(t,n){bD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return uA[n]||(uA[n]=t()),uA[n]}(e.repoInfo_,(function(){return new KP(e.stats_,e.server_)})),e.infoData_=new jP,e.infoSyncTree_=new fO({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=vO(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),bD(e,"connected",!1),e.serverSyncTree_=new fO({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);lD(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function mD(e){var t=e.infoData_.getNode(new wA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yD(e){return(t=(t={timestamp:mD(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function gD(e,t,n,r,i){e.dataUpdateCount++;var a=new wA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=na(n,(function(e){return yP(e)}));o=function(e,t,n,r){var i=EO(e,r);if(i){var a=SO(i),o=a.path,s=a.queryId,u=RA(o,t),c=uR.fromObject(n);return CO(e,o,new XP(GP(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=yP(n);o=function(e,t,n,r){var i=EO(e,r);if(null!=i){var a=SO(i),o=a.path,s=a.queryId,u=RA(o,t);return CO(e,o,new $P(GP(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=na(n,(function(e){return yP(e)}));o=function(e,t,n){var r=uR.fromObject(n);return bO(e,new XP({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=yP(n);o=vO(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=RD(e,a)),lD(e.eventQueue_,f,o)}function kD(e,t){bD(e,"connected",t),!1===t&&function(e){SD(e,"onDisconnectEvents");var t=yD(e),n=qP();BP(e.onDisconnect_,xA(),(function(r,i){var a=LO(r,i,e.serverSyncTree_,t);VP(n,r,a)}));var r=[];BP(n,xA(),(function(t,n){r=r.concat(vO(e.serverSyncTree_,t,n));var i=FD(e,t);RD(e,i)})),e.onDisconnect_=qP(),lD(e.eventQueue_,xA(),r)}(e)}function bD(e,t,n){var r=new wA("/.info/"+t),i=yP(n);e.infoData_.updateSnapshot(r,i);var a=vO(e.infoSyncTree_,r,i);lD(e.eventQueue_,r,a)}function _D(e){return e.nextWriteId_++}function wD(e,t,n,r,i){SD(e,"set",{path:t.toString(),value:n,priority:r});var a=yD(e),o=yP(n,r),s=gO(e.serverSyncTree_,t),u=MO(o,s,a),c=_D(e),l=hO(e.serverSyncTree_,t,u,c,!0);uD(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||ON("set at "+t+" failed: "+n);var o=pO(e.serverSyncTree_,c,!a);lD(e.eventQueue_,t,o),CD(e,i,n,r)}));var f=FD(e,t);RD(e,f),lD(e.eventQueue_,f,[])}function xD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&zP(e.onDisconnect_,t),CD(e,n,r,i)}))}function TD(e,t,n,r){var i=yP(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&VP(e.onDisconnect_,t,i),CD(e,r,n,a)}))}function ID(e,t,n){var r;r=".info"===TA(t._path)?mO(e.infoSyncTree_,t,n):mO(e.serverSyncTree_,t,n),cD(e.eventQueue_,t._path,r)}function ED(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dD)}function SD(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];NN.apply(void 0,[t].concat(r))}function CD(e,t,n,r){t&&QN((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function ND(e,t,n){return gO(e.serverSyncTree_,t,n)||vP.EMPTY_NODE}function AD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||MD(e,t),qO(t)){var n=DD(e,t);Ci(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&PD(e,HO(t),n)}else zO(t)&&BO(t,(function(t){AD(e,t)}))}function PD(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=ND(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ci(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=RA(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){SD(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(pO(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);MD(e,jO(e.transactionQueueTree_,t)),AD(e,e.transactionQueueTree_),lD(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)QN(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{ON("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}RD(e,t)}}),o)}function RD(e,t){var n=OD(e,t),r=HO(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=RA(n,c.path),f=!1;if(Ci(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,s=c.abortReason,i=i.concat(pO(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)f=!0,s="maxretry",i=i.concat(pO(e.serverSyncTree_,c.currentWriteId,!0));else{var h=ND(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){eD("transaction failed: Data returned ",d,c.path);var p=yP(d);"object"===typeof d&&null!=d&&Zi(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,m=yD(e),y=MO(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=_D(e),o.splice(o.indexOf(v),1),i=(i=i.concat(hO(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(pO(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat(pO(e.serverSyncTree_,c.currentWriteId,!0))}lD(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);MD(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)QN(r[c]);AD(e,e.transactionQueueTree_)}(e,DD(e,n),r),r}function OD(e,t){var n,r=e.transactionQueueTree_;for(n=TA(t);null!==n&&void 0===qO(r);)r=jO(r,n),n=TA(t=EA(t));return r}function DD(e,t){var n=[];return LD(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function LD(e,t,n){var r=qO(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);BO(t,(function(t){LD(e,t,n)}))}function MD(e,t){var n=qO(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,VO(t,n.length>0?n:void 0)}BO(t,(function(t){MD(e,t)}))}function FD(e,t){var n=HO(OD(e,t)),r=jO(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){UD(e,t)})),UD(e,r),WO(r,(function(t){UD(e,t)})),n}function UD(e,t){var n=qO(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ci(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ci(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(pO(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?VO(t,void 0):n.length=a+1,lD(e.eventQueue_,HO(t),i);for(var s=0;s<r.length;s++)QN(r[s])}}var jD=function(e,t){var n=qD(e),r=n.namespace;"firebase.com"===n.domain&&RN(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||RN("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ON("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new iA(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new wA(n.pathString)}},qD=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(UU){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=C(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ON("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},VD=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return y(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+$i(this.snapshot.exportVal())}}]),e}(),zD=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return y(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),BD=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return y(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ci(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),WD=function(){function e(t,n){d(this,e),this._repo=t,this._path=n}return y(e,[{key:"cancel",value:function(){var e=new Mi;return xD(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){aD("OnDisconnect.remove",this._path);var e=new Mi;return TD(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){aD("OnDisconnect.set",this._path),ZO("OnDisconnect.set",e,this._path,!1);var t=new Mi;return TD(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){aD("OnDisconnect.setWithPriority",this._path),ZO("OnDisconnect.setWithPriority",e,this._path,!1),nD("OnDisconnect.setWithPriority",t,!1);var n=new Mi;return function(e,t,n,r,i){var a=yP(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&VP(e.onDisconnect_,t,a),CD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){aD("OnDisconnect.update",this._path),tD("OnDisconnect.update",e,this._path,!1);var t=new Mi;return function(e,t,n,r){if(ta(n))return NN("onDisconnect().update() called with empty data.  Don't do anything."),void CD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&zN(n,(function(n,r){var i=yP(r);VP(e.onDisconnect_,AA(t,n),i)})),CD(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),HD=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return y(e,[{key:"key",get:function(){return PA(this._path)?null:SA(this._path)}},{key:"ref",get:function(){return new YD(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=FP(this._queryParams),t=qN(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return FP(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ya(t))instanceof e))return!1;var n=this._repo===t._repo,r=DA(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function KD(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function GD(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===KA){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==LN)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==MN)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===cP){if(null!=t&&!XO(t)||null!=n&&!XO(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ci(e.getIndex()instanceof gP||e.getIndex()===bP,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function QD(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var YD=function(e){k(n,e);var t=T(n);function n(e,r){return d(this,n),t.call(this,e,r,new RP,!1)}return y(n,[{key:"parent",get:function(){var e=NA(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(HD),JD=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return y(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new wA(t),r=ZD(this.ref,t);return new e(this._node.getChild(n),r,cP)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,ZD(n.ref,r),cP))}))}},{key:"hasChild",value:function(e){var t=new wA(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function $D(e,t){return(e=ya(e))._checkNotDeleted("ref"),void 0!==t?ZD(e._root,t):e._root}function XD(e,t){(e=ya(e))._checkNotDeleted("refFromURL");var n=jD(t,e._repo.repoInfo_.nodeAdmin);oD("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||RN("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),$D(e,n.path.toString())}function ZD(e,t){var n,r,i,a;return null===TA((e=ya(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),iD(n,r,i,a)):iD("child","path",t,!1),new YD(e._repo,AA(e._path,t))}function eL(e,t){e=ya(e),aD("push",e._path),ZO("push",t,e._path,!0);var n,r=mD(e._repo),i=wP(r),a=ZD(e,i),o=ZD(e,i);return n=null!=t?nL(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function tL(e){return aD("remove",e._path),nL(e,null)}function nL(e,t){e=ya(e),aD("set",e._path),ZO("set",t,e._path,!1);var n=new Mi;return wD(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function rL(e,t){e=ya(e),aD("setPriority",e._path),nD("setPriority",t,!1);var n=new Mi;return wD(e._repo,AA(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function iL(e,t,n){if(aD("setWithPriority",e._path),ZO("setWithPriority",t,e._path,!1),nD("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Mi;return wD(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function aL(e,t){tD("update",t,e._path,!1);var n=new Mi;return function(e,t,n,r){SD(e,"update",{path:t.toString(),value:n});var i=!0,a=yD(e),o={};if(zN(n,(function(n,r){i=!1,o[n]=LO(AA(t,n),yP(r),e.serverSyncTree_,a)})),i)NN("update() called with empty data.  Don't do anything."),CD(0,r,"ok",void 0);else{var s=_D(e),u=dO(e.serverSyncTree_,t,o,s);uD(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||ON("update at "+t+" failed: "+n);var o=pO(e.serverSyncTree_,s,!a),u=o.length>0?RD(e,t):t;lD(e.eventQueue_,u,o),CD(0,r,n,i)})),zN(n,(function(n){var r=FD(e,AA(t,n));RD(e,r)})),lD(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function oL(e){return function(e,t){var n=kO(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=yP(n).withIndex(t._queryParams.getIndex()),i=vO(e.serverSyncTree_,t._path,r);return cD(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return SD(e,"get for query "+$i(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=ya(e))._repo,e).then((function(t){return new JD(t,new YD(e._repo,e._path),e._queryParams.getIndex())}))}var sL=function(){function e(t){d(this,e),this.callbackContext=t}return y(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new VD("value",this,new JD(e.snapshotNode,new YD(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new zD(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),uL=function(){function e(t,n){d(this,e),this.eventType=t,this.callbackContext=n}return y(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new zD(this,e,t):null}},{key:"createEvent",value:function(e,t){Ci(null!=e.childName,"Child events should have a childName.");var n=ZD(new YD(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new VD(e.type,this,new JD(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function cL(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){ID(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new BD(n,a||void 0),c="value"===t?new sL(u):new uL(t,u);return function(e,t,n){var r;r=".info"===TA(t._path)?yO(e.infoSyncTree_,t,n):yO(e.serverSyncTree_,t,n),cD(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return ID(e._repo,e,c)}}function lL(e,t,n,r){return cL(e,"value",t,n,r)}function fL(e,t,n,r){return cL(e,"child_added",t,n,r)}function hL(e,t,n,r){return cL(e,"child_changed",t,n,r)}function dL(e,t,n,r){return cL(e,"child_moved",t,n,r)}function pL(e,t,n,r){return cL(e,"child_removed",t,n,r)}function vL(e,t,n){var r=null,i=n?new BD(n):null;"value"===t?r=new sL(i):t&&(r=new uL(t,i)),ID(e._repo,e,r)}var mL=y((function e(){d(this,e)})),yL=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){ZO("endAt",this._value,e._path,!0);var t=DP(e._queryParams,this._value,this._key);if(QD(t),GD(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new HD(e._repo,e._path,t,e._orderByCalled)}}]),n}(mL);function gL(e,t){return rD("endAt","key",t,!0),new yL(e,t)}var kL=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){ZO("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===KA?("string"===typeof t&&(t=TP(t)),r=DP(e,t,n)):r=DP(e,t,null==n?LN:TP(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(QD(t),GD(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new HD(e._repo,e._path,t,e._orderByCalled)}}]),n}(mL);function bL(e,t){return rD("endBefore","key",t,!0),new kL(e,t)}var _L=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){ZO("startAt",this._value,e._path,!0);var t=OP(e._queryParams,this._value,this._key);if(QD(t),GD(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new HD(e._repo,e._path,t,e._orderByCalled)}}]),n}(mL);function wL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return rD("startAt","key",t,!0),new _L(e,t)}var xL=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){ZO("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===KA?("string"===typeof t&&(t=xP(t)),r=OP(e,t,n)):r=OP(e,t,null==n?MN:xP(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(QD(t),GD(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new HD(e._repo,e._path,t,e._orderByCalled)}}]),n}(mL);function TL(e,t){return rD("startAfter","key",t,!0),new xL(e,t)}var IL=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new HD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(mL);function EL(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IL(e)}var SL=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new HD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(mL);function CL(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new SL(e)}var NL=function(e){k(n,e);var t=T(n);function n(e){var r;return d(this,n),(r=t.call(this))._path=e,r}return y(n,[{key:"_apply",value:function(e){KD(e,"orderByChild");var t=new wA(this._path);if(PA(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new gP(t),r=LP(e._queryParams,n);return GD(r),new HD(e._repo,e._path,r,!0)}}]),n}(mL);function AL(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iD("orderByChild","path",e,!1),new NL(e)}var PL=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){KD(e,"orderByKey");var t=LP(e._queryParams,KA);return GD(t),new HD(e._repo,e._path,t,!0)}}]),n}(mL);function RL(){return new PL}var OL=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){KD(e,"orderByPriority");var t=LP(e._queryParams,cP);return GD(t),new HD(e._repo,e._path,t,!0)}}]),n}(mL);function DL(){return new OL}var LL=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){KD(e,"orderByValue");var t=LP(e._queryParams,bP);return GD(t),new HD(e._repo,e._path,t,!0)}}]),n}(mL);function ML(){return new LL}var FL=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){if(ZO("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yL(this._value,this._key)._apply(new _L(this._value,this._key)._apply(e))}}]),n}(mL);function UL(e,t){return rD("equalTo","key",t,!0),new FL(e,t)}function jL(e){for(var t=ya(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){Ci(!HR,"__referenceConstructor has already been defined"),HR=e}(YD),function(e){Ci(!XR,"__referenceConstructor has already been defined"),XR=e}(YD);var qL={},VL=!1;function zL(e,t,n,r){e.repoInfo_=new iA("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function BL(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||RN("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),NN("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=jD(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Noitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAeMT_g-N4d9SkDMyMDrYBzz0F1CQa55pI",REACT_APP_APP_ID:"1:958832699613:web:9054ae936666c60a4b1334",REACT_APP_AUTH_DOMAIN:"twitter-clone-305fe.firebaseapp.com",REACT_APP_MESSAGIN_ID:"958832699613",REACT_APP_PROJECT_ID:"twitter-clone-305fe",REACT_APP_STORAGE_BUCKET:"twitter-clone-305fe.appspot.com"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=jD(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new XN(XN.OWNER):new $N(e.name,e.options,t);oD("Invalid Firebase Database URL",s),PA(s.path)||RN("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=qL[t.name];i||(i={},qL[t.name]=i);var a=i[e.toURLString()];a&&RN("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new pD(e,VL,n,r),i[e.toURLString()]=a,a}(u,e,l,new JN(e.name,n));return new WL(f,e)}var WL=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return y(e,[{key:"_repo",get:function(){return this._instanceStarted||(vD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new YD(this._repo,xA())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=qL[t];n&&n[e.key]===e||RN("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ED(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&RN("Cannot call "+e+" on a deleted database.")}}]),e}();function HL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ya(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&RN("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&RN('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new XN(XN.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Fi(r.mockUserToken,e.app.options.projectId);a=new XN(o)}zL(i,t,n,a)}function KL(e){(e=ya(e))._checkNotDeleted("goOffline"),ED(e._repo)}function GL(e){var t;(e=ya(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(dD)}function QL(e,t){CN(e,t)}var YL={".sv":"timestamp"};var JL=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function $L(e,t,n){var r;if(e=ya(e),aD("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Mi,o=lL(e,(function(){}));return function(e,t,n,r,i,a){SD(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:xN(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=ND(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{eD("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=jO(e.transactionQueueTree_,t),f=qO(l)||[];f.push(o),VO(l,f),"object"===typeof u&&null!==u&&Zi(u,".priority")?(c=ea(u,".priority"),Ci(XO(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(gO(e.serverSyncTree_,t)||vP.EMPTY_NODE).getPriority().val();var h=yD(e),d=yP(u,c),p=MO(d,s,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=_D(e);var v=hO(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);lD(e.eventQueue_,t,v),AD(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new JD(r,new YD(e._repo,e._path),cP),a.resolve(new JL(n,i)))}),o,i),a.promise}VA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},VA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){mN($a),za(new ga("database",(function(e,t){var n=t.instanceIdentifier;return BL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ro(dN,pN,e),ro(dN,pN,"esm2017")}();var XL=new Pa("@firebase/database-compat"),ZL=function(e){var t="FIREBASE WARNING: "+e;XL.warn(t)},eM=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(da(e,t)+"must be a boolean.")},tM=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(da(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},nM=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"cancel",value:function(e){ha("OnDisconnect.cancel",0,1,arguments.length),pa("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ha("OnDisconnect.remove",0,1,arguments.length),pa("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ha("OnDisconnect.set",1,2,arguments.length),pa("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ha("OnDisconnect.setWithPriority",2,3,arguments.length),pa("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ha("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ZL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pa("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),rM=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return ha("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),iM=function(){function e(t,n){d(this,e),this._database=t,this._delegate=n}return y(e,[{key:"val",value:function(){return ha("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ha("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ha("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ha("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ha("DataSnapshot.child",0,1,arguments.length),t=String(t),iD("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ha("DataSnapshot.hasChild",1,1,arguments.length),iD("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ha("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ha("DataSnapshot.forEach",1,1,arguments.length),pa("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ha("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ha("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ha("DataSnapshot.ref",0,0,arguments.length),new oM(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),aM=function(){function e(t,n){d(this,e),this.database=t,this._delegate=n}return y(e,[{key:"on",value:function(t,n,r,i){var a,o=this;ha("Query.on",2,4,arguments.length),pa("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new iM(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return lL(this._delegate,u,c),n;case"child_added":return fL(this._delegate,u,c),n;case"child_removed":return pL(this._delegate,u,c),n;case"child_changed":return hL(this._delegate,u,c),n;case"child_moved":return dL(this._delegate,u,c),n;default:throw new Error(da("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ha("Query.off",0,3,arguments.length),tM("Query.off",e,!0),pa("Query.off","callback",t,!0),va("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,vL(this._delegate,e,r)}else vL(this._delegate,e)}},{key:"get",value:function(){var e=this;return oL(this._delegate).then((function(t){return new iM(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;ha("Query.once",1,4,arguments.length),pa("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new Mi,u=function(e,t){var r=new iM(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":lL(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":fL(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":pL(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":hL(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":dL(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(da("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return ha("Query.limitToFirst",1,1,arguments.length),new e(this.database,jL(this._delegate,EL(t)))}},{key:"limitToLast",value:function(t){return ha("Query.limitToLast",1,1,arguments.length),new e(this.database,jL(this._delegate,CL(t)))}},{key:"orderByChild",value:function(t){return ha("Query.orderByChild",1,1,arguments.length),new e(this.database,jL(this._delegate,AL(t)))}},{key:"orderByKey",value:function(){return ha("Query.orderByKey",0,0,arguments.length),new e(this.database,jL(this._delegate,RL()))}},{key:"orderByPriority",value:function(){return ha("Query.orderByPriority",0,0,arguments.length),new e(this.database,jL(this._delegate,DL()))}},{key:"orderByValue",value:function(){return ha("Query.orderByValue",0,0,arguments.length),new e(this.database,jL(this._delegate,ML()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ha("Query.startAt",0,2,arguments.length),new e(this.database,jL(this._delegate,wL(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ha("Query.startAfter",0,2,arguments.length),new e(this.database,jL(this._delegate,TL(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ha("Query.endAt",0,2,arguments.length),new e(this.database,jL(this._delegate,gL(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ha("Query.endBefore",0,2,arguments.length),new e(this.database,jL(this._delegate,bL(t,n)))}},{key:"equalTo",value:function(t,n){return ha("Query.equalTo",1,2,arguments.length),new e(this.database,jL(this._delegate,UL(t,n)))}},{key:"toString",value:function(){return ha("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ha("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ha("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new oM(this.database,new YD(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,pa(e,"cancel",r.cancel,!0),r.context=n,va(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(da(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),oM=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,new HD(r._repo,r._path,new RP,!1))).database=e,i._delegate=r,i}return y(n,[{key:"getKey",value:function(){return ha("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ha("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,ZD(this._delegate,e))}},{key:"getParent",value:function(){ha("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ha("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ha("Reference.set",1,2,arguments.length),pa("Reference.set","onComplete",t,!0);var n=nL(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ha("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ZL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}aD("Reference.update",this._delegate._path),pa("Reference.update","onComplete",t,!0);var i=aL(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ha("Reference.setWithPriority",2,3,arguments.length),pa("Reference.setWithPriority","onComplete",n,!0);var r=iL(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ha("Reference.remove",0,1,arguments.length),pa("Reference.remove","onComplete",e,!0);var t=tL(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;ha("Reference.transaction",1,3,arguments.length),pa("Reference.transaction","transactionUpdate",e,!1),pa("Reference.transaction","onComplete",t,!0),eM("Reference.transaction","applyLocally",n,!0);var i=$L(this._delegate,e,{applyLocally:n}).then((function(e){return new rM(e.committed,new iM(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ha("Reference.setPriority",1,2,arguments.length),pa("Reference.setPriority","onComplete",t,!0);var n=rL(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ha("Reference.push",0,2,arguments.length),pa("Reference.push","onComplete",t,!0);var i=eL(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return aD("Reference.onDisconnect",this._delegate._path),new nM(new WD(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(aM),sM=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return y(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};HL(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ha("database.ref",0,1,arguments.length),e instanceof oM){var t=XD(this._delegate,e.toString());return new oM(this,t)}var n=$D(this._delegate,e);return new oM(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";ha(t,1,1,arguments.length);var n=XD(this._delegate,e);return new oM(this,n)}},{key:"goOffline",value:function(){return ha("database.goOffline",0,0,arguments.length),KL(this._delegate)}},{key:"goOnline",value:function(){return ha("database.goOnline",0,0,arguments.length),GL(this._delegate)}}]),e}();sM.ServerValue={TIMESTAMP:YL,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var uM=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;mN(r);var u=new ba("auth-internal",new xa("database-standalone"));return u.setComponent(new ga("auth-internal",(function(){return i}),"PRIVATE")),{instance:new sM(BL(t,u,void 0,n,s),t),namespace:a}}}),cM=sM.ServerValue;!function(e){e.INTERNAL.registerComponent(new ga("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new sM(i,r)}),"PUBLIC").setServiceProps({Reference:oM,Query:aM,Database:sM,DataSnapshot:iM,enableLogging:QL,INTERNAL:uM,ServerValue:cM}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.4")}(ho);var lM="firebasestorage.googleapis.com",fM="storageBucket",hM=function(e){k(n,e);var t=T(n);function n(e,r){var i;return d(this,n),(i=t.call(this,dM(e),"Firebase Storage: ".concat(r," (").concat(dM(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(w(i),n.prototype),i}return y(n,[{key:"_codeEquals",value:function(e){return dM(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ki);function dM(e){return"storage/"+e}function pM(){return new hM("unknown","An unknown error occurred, please check the error payload for server response.")}function vM(){return new hM("canceled","User canceled the upload/download.")}function mM(){return new hM("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function yM(e){return new hM("invalid-argument",e)}function gM(){return new hM("app-deleted","The Firebase app was deleted.")}function kM(e){return new hM("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bM(e,t){return new hM("invalid-format","String does not match format '"+e+"': "+t)}function _M(e){throw new hM("internal-error","Internal error: "+e)}var wM,xM=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(UU){return new e(t,"")}if(""===r.path)return r;throw new hM("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===lM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new hM("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),TM=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function IM(e){return"string"===typeof e||e instanceof String}function EM(e){return SM()&&e instanceof Blob}function SM(){return"undefined"!==typeof Blob}function CM(e,t,n,r){if(r<t)throw yM("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw yM("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function NM(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function AM(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(wM||(wM={}));var PM=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this;d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(UU){i(UU)}else if(null!==a){var s=pM();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?gM():vM());else i(new hM("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new RM(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new RM(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===wM.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new RM(o,r))}else{var s=r.getErrorCode()===wM.ABORT;t(!1,new RM(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),RM=y((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function OM(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function DM(){for(var e=OM(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(SM())return new Blob(n);throw new hM("unsupported-environment","This browser doesn't seem to support creating Blobs")}var LM={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},MM=y((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function FM(e,t){switch(e){case LM.RAW:return new MM(UM(t));case LM.BASE64:case LM.BASE64URL:return new MM(jM(e,t));case LM.DATA_URL:return new MM(function(e){var t=new qM(e);return t.base64?jM(LM.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(UU){throw bM(LM.DATA_URL,"Malformed data URL.")}return UM(t)}(t.rest)}(t),new qM(t).contentType)}throw pM()}function UM(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function jM(e,t){switch(e){case LM.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw bM(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case LM.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw bM(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(UU){throw bM(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var qM=y((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw bM(LM.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var VM=function(){function e(t,n){d(this,e);var r=0,i="";EM(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(EM(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(SM()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(DM.apply(null,i))}var a=n.map((function(e){return IM(e)?FM(LM.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function zM(e){var t;try{t=JSON.parse(e)}catch(UU){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function BM(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function WM(e,t){return t}var HM=y((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||WM})),KM=null;function GM(){if(KM)return KM;var e=[];e.push(new HM("bucket")),e.push(new HM("generation")),e.push(new HM("metageneration")),e.push(new HM("name","fullPath",!0));var t=new HM("name");t.xform=function(e,t){return function(e){return!IM(e)||e.length<2?e:BM(e)}(t)},e.push(t);var n=new HM("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new HM("timeCreated")),e.push(new HM("updated")),e.push(new HM("md5Hash",null,!0)),e.push(new HM("cacheControl",null,!0)),e.push(new HM("contentDisposition",null,!0)),e.push(new HM("contentEncoding",null,!0)),e.push(new HM("contentLanguage",null,!0)),e.push(new HM("contentType",null,!0)),e.push(new HM("metadata","customMetadata",!0)),KM=e}function QM(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new xM(n,r);return t._makeStorageReference(i)}})}(r,e),r}function YM(e,t,n){var r=zM(t);return null===r?null:QM(e,r,n)}function JM(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var $M="prefixes",XM="items";function ZM(e,t,n){var r=zM(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[$M]){var i,a=C(n[$M]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new xM(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n[XM]){var u,c=C(n[XM]);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new xM(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var eF=y((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function tF(e){if(!e)throw pM()}function nF(e,t){return function(n,r){var i=YM(e,r,t);return tF(null!==i),i}}function rF(e,t){return function(n,r){var i=YM(e,r,t);return tF(null!==i),function(e,t,n,r){var i=zM(t);if(null===i)return null;if(!IM(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return NM("/b/"+o(i)+"/o/"+o(a),n,r)+AM({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function iF(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new hM("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new hM("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new hM("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new hM("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function aF(e){var t=iF(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new hM("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function oF(e,t,n){var r=NM(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new eF(r,"GET",nF(e,n),i);return a.errorHandler=aF(t),a}function sF(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=NM(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new eF(o,"GET",function(e,t){return function(n,r){var i=ZM(e,t,r);return tF(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=iF(t),u}function uF(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function cF(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=uF(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+JM(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=VM.getBlob(c,r,l);if(null===f)throw mM();var h={name:u.fullPath},d=NM(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new eF(d,"POST",nF(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=iF(t),v}var lF=y((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function fF(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(UU){tF(!1)}return tF(!!n&&-1!==(t||["active"]).indexOf(n)),n}var hF=262144;function dF(e,t,n,r,i,a,o,s){var u=new lF(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new hM("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw mM();var v=t.maxUploadRetryTime,m=new eF(n,"POST",(function(e,n){var i,o=fF(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?nF(t,a)(e,n):null,new lF(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=iF(e),m}var pF={STATE_CHANGED:"state_changed"},vF={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mF(e){switch(e){case"running":case"pausing":case"canceling":return vF.RUNNING;case"paused":return vF.PAUSED;case"success":return vF.SUCCESS;case"canceled":return vF.CANCELED;default:return vF.ERROR}}var yF=y((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function gF(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var kF=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wM.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=wM.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=wM.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw _M("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw _M("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw _M("cannot .getStatus() before sending");try{return this.xhr_.status}catch(UU){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw _M("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw _M("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),bF=function(e){k(n,e);var t=T(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(kF);function _F(){return new bF}var wF=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=GM(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=uF(t,r,i),s={name:o.fullPath},u=NM(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=JM(o,n),f=e.maxUploadRetryTime,h=new eF(u,"POST",(function(e){var t;fF(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(UU){tF(!1)}return tF(IM(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=iF(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,_F,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new eF(n,"POST",(function(e){var t=fF(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(UU){tF(!1)}n||tF(!1);var i=Number(n);return tF(!isNaN(i)),new lF(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=iF(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,_F,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=hF*this._chunkMultiplier,n=new lF(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=dF(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(UU){return e._error=UU,void e._transition("error")}var s=e._ref.storage._makeRequest(o,_F,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){hF*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=oF(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,_F,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=cF(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,_F,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vM(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=mF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new yF(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(mF(this._state)){case vF.SUCCESS:gF(this._resolve.bind(null,this.snapshot))();break;case vF.CANCELED:case vF.ERROR:gF(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(mF(this._state)){case vF.RUNNING:case vF.PAUSED:e.next&&gF(e.next.bind(e,this.snapshot))();break;case vF.SUCCESS:e.complete&&gF(e.complete.bind(e))();break;default:e.error&&gF(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),xF=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof xM?n:xM.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new xM(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return BM(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new xM(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw kM(e)}}]),e}();function TF(e,t,n){return IF.apply(this,arguments)}function IF(){return(IF=ze(qe().mark((function e(t,n,r){var i,a,o,s;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,EF(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,h(s.prefixes)),(a=n.items).push.apply(a,h(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,TF(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EF(e,t){null!=t&&"number"===typeof t.maxResults&&CM("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=sF(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,_F)}function SF(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=NM(t.fullServerUrl(),e.host,e._protocol),a=JM(n,r),o=e.maxOperationRetryTime,s=new eF(i,"PATCH",nF(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=aF(t),s}(e.storage,e._location,t,GM());return e.storage.makeRequestWithTokens(n,_F)}function CF(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=NM(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new eF(r,"GET",rF(e,n),i);return a.errorHandler=aF(t),a}(e.storage,e._location,GM());return e.storage.makeRequestWithTokens(t,_F).then((function(e){if(null===e)throw new hM("no-download-url","The given file does not have any download URLs.");return e}))}function NF(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=NM(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new eF(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=aF(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,_F)}function AF(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new xM(e._location.bucket,n);return new xF(e.storage,r)}function PF(e,t){if(e instanceof LF){var n=e;if(null==n._bucket)throw new hM("no-default-bucket","No default bucket found. Did you set the '"+fM+"' property when initializing the app?");var r=new xF(n,n._bucket);return null!=t?PF(r,t):r}return void 0!==t?AF(e,t):e}function RF(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof LF)return new xF(e,t);throw yM("To use ref(service, url), the first argument must be a Storage instance.")}return PF(e,t)}function OF(e,t){var n=null===t||void 0===t?void 0:t[fM];return null==n?null:xM.makeFromBucketSpec(n,e)}function DF(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Fi(i,e.app.options.projectId))}var LF=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=lM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?xM.makeFromBucketSpec(i,this._host):OF(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=xM.makeFromBucketSpec(this._url,e):this._bucket=OF(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){CM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){CM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ze(qe().mark((function e(){var t,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ze(qe().mark((function e(){var t,n;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new xF(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new TM(gM());var a=function(e,t,n,r,i,a){var o=AM(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new PM(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ze(qe().mark((function e(t,n){var r,i,a,o;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),MF="@firebase/storage",FF="0.9.0",UF="storage";function jF(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new wF(e,new VM(t),n)}(e=ya(e),t,n)}function qF(e){return function(e){e._throwIfRoot("getMetadata");var t=oF(e.storage,e._location,GM());return e.storage.makeRequestWithTokens(t,_F)}(e=ya(e))}function VF(e){return function(e){var t={prefixes:[],items:[]};return TF(e,t).then((function(){return t}))}(e=ya(e))}function zF(e,t){return RF(e=ya(e),t)}function BF(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};DF(e,t,n,r)}function WF(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new LF(r,i,a,n,$a)}za(new ga(UF,WF,"PUBLIC").setMultipleInstances(!0)),ro(MF,FF,""),ro(MF,FF,"esm2017");var HF=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return y(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),KF=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return y(e,[{key:"snapshot",get:function(){return new HF(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new HF(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new HF(e,i,i._ref))}:{next:t.next?function(e){return t.next(new HF(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),GF=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return y(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new QF(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new QF(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),QF=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return y(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return AF(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new KF(jF(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LM.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=FM(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new KF(new wF(this._delegate,new VM(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return VF(this._delegate).then((function(t){return new GF(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return EF(e=ya(e),t)}(this._delegate,e||void 0).then((function(e){return new GF(e,t.storage)}))}},{key:"getMetadata",value:function(){return qF(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return SF(e=ya(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return CF(ya(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),NF(ya(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw kM(e)}}]),e}(),YF=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return y(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(JF(e))throw yM("ref() expected a child path but got a URL, use refFromURL instead.");return new QF(zF(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!JF(e))throw yM("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xM.makeFromUrl(e,this._delegate.host)}catch(UU){throw yM("refFromUrl() expected a valid full URL but got an invalid one.")}return new QF(zF(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};BF(this._delegate,e,t,n)}}]),e}();function JF(e){return/^[A-Za-z]+:\/\//.test(e)}function $F(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new YF(r,i)}!function(e){var t={TaskState:vF,TaskEvent:pF,StringFormat:LM,Storage:YF,Reference:QF};e.INTERNAL.registerComponent(new ga("storage-compat",$F,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.8")}(ho);ho.initializeApp({apiKey:"AIzaSyAeMT_g-N4d9SkDMyMDrYBzz0F1CQa55pI",authDomain:"twitter-clone-305fe.firebaseapp.com",projectId:"twitter-clone-305fe",storageBucket:"twitter-clone-305fe.appspot.com",messagingSenderId:"958832699613",appId:"1:958832699613:web:9054ae936666c60a4b1334"});var XF=ho,ZF=ho.auth(),eU=ho.firestore(),tU=ho.storage(),nU=n(184),rU=function(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(""),2),a=i[0],o=i[1],s=l((0,r.useState)(!0),2),u=s[0],c=s[1],f=l((0,r.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,r=t.name,i=t.value;"email"===r?n(i):"password"===r&&o(i)},v=function(){var e=ze(qe().mark((function e(n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!u){e.next=8;break}return e.next=5,ZF.createUserWithEmailAndPassword(t,a);case 5:e.sent,e.next=11;break;case 8:return e.next=10,ZF.signInWithEmailAndPassword(t,a);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,nU.jsxs)("div",{children:[(0,nU.jsxs)("form",{onSubmit:v,className:"container",children:[(0,nU.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:t,onChange:p,className:"authInput"}),(0,nU.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:a,onChange:p,className:"authInput"}),(0,nU.jsx)("input",{type:"submit",value:u?"Create Account":"Sign In",className:"authInput authSubmit"}),(0,nU.jsx)("br",{}),h&&(0,nU.jsx)("span",{className:"authError",children:h})]}),(0,nU.jsx)("span",{onClick:function(){return c((function(e){return!e}))},className:"authSwitch",children:u?"Sign in":"Create Account"})]})},iU=function(){var e=function(){var e=ze(qe().mark((function e(t){var n,r;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new XF.auth.GoogleAuthProvider:"github"===n&&(r=new XF.auth.GithubAuthProvider),e.next=4,ZF.signInWithPopup(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,nU.jsxs)("div",{className:"authContainer",children:[(0,nU.jsx)(ki,{icon:xi,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),(0,nU.jsx)(rU,{}),(0,nU.jsxs)("div",{className:"authBtns",children:[(0,nU.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",(0,nU.jsx)(ki,{icon:_i})]}),(0,nU.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",(0,nU.jsx)(ki,{icon:wi})]})]})]})};function aU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oU,sU={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},uU=sU,cU={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},lU={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},fU={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M240 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H176V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H240V80z"]},hU={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},dU=hU,pU=function(e){var t=e.noweetObj,n=e.isOwner,i=l((0,r.useState)(!1),2),a=i[0],o=i[1],s=l((0,r.useState)(t.text),2),u=s[0],c=s[1],f=function(){var e=ze(qe().mark((function e(){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this noweet?")){e.next=6;break}return e.next=4,eU.doc("noweets/".concat(t.id)).delete();case 4:return e.next=6,tU.refFromURL(t.attachmentUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){o((function(e){return!e}))},d=function(){var e=ze(qe().mark((function e(n){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,eU.doc("noweets/".concat(t.id)).update({text:u});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,nU.jsx)("div",{className:"nweet",children:a?(0,nU.jsx)(nU.Fragment,{children:n&&(0,nU.jsxs)(nU.Fragment,{children:[(0,nU.jsxs)("form",{onSubmit:d,className:"container nweetEdit",children:[(0,nU.jsx)("input",{type:"text",placeholder:"Edit your Noweet",value:u,onChange:function(e){var t=e.target.value;c(t)},required:!0,autoFocus:!0,className:"formInput"}),(0,nU.jsx)("input",{type:"submit",value:"Update Noweet",className:"formBtn"})]}),(0,nU.jsx)("span",{onClick:h,className:"formBtn cancelBtn",children:"Cancel"})]})}):(0,nU.jsxs)(nU.Fragment,{children:[(0,nU.jsx)("h4",{children:t.text}),t.attachmentUrl&&(0,nU.jsx)("img",{src:t.attachmentUrl,alt:"noweet"}),n&&(0,nU.jsxs)("div",{className:"nweet__actions",children:[(0,nU.jsx)("span",{onClick:f,children:(0,nU.jsx)(ki,{icon:lU})}),(0,nU.jsx)("span",{onClick:h,children:(0,nU.jsx)(ki,{icon:uU})})]})]})})},vU={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},mU=new Uint8Array(16);function yU(){if(!oU&&!(oU="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oU(mU)}for(var gU=[],kU=0;kU<256;++kU)gU.push((kU+256).toString(16).slice(1));function bU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(gU[e[t+0]]+gU[e[t+1]]+gU[e[t+2]]+gU[e[t+3]]+"-"+gU[e[t+4]]+gU[e[t+5]]+"-"+gU[e[t+6]]+gU[e[t+7]]+"-"+gU[e[t+8]]+gU[e[t+9]]+"-"+gU[e[t+10]]+gU[e[t+11]]+gU[e[t+12]]+gU[e[t+13]]+gU[e[t+14]]+gU[e[t+15]]).toLowerCase()}var _U=function(e,t,n){if(vU.randomUUID&&!t&&!e)return vU.randomUUID();var r=(e=e||{}).random||(e.rng||yU)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return bU(r)},wU=function(e){var t=e.userObj,n=l((0,r.useState)(""),2),i=n[0],a=n[1],o=l((0,r.useState)(""),2),s=o[0],u=o[1],c=function(){var e=ze(qe().mark((function e(n){var r,o,c,l;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),r="",""===s){e.next=12;break}return o=tU.ref().child("".concat(t.uid,"/").concat(_U())),e.next=8,o.putString(s,"data_url");case 8:return c=e.sent,e.next=11,c.ref.getDownloadURL();case 11:r=e.sent;case 12:return l={text:i,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:r},e.next=15,eU.collection("noweets").add(l);case 15:a(""),u("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,nU.jsxs)("form",{onSubmit:c,className:"factoryForm",children:[(0,nU.jsxs)("div",{className:"factoryInput__container",children:[(0,nU.jsx)("input",{value:i,onChange:function(e){var t=e.target.value;a(t)},type:"text",placeholder:"'What's on your mind?",maxLength:120,className:"factoryInput__input"}),(0,nU.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),(0,nU.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,nU.jsx)("span",{children:"Add photos"}),(0,nU.jsx)(ki,{icon:fU})]}),(0,nU.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;u(t)},n.readAsDataURL(t)},id:"attach-file",style:{opacity:0}}),s&&(0,nU.jsxs)("div",{className:"factoryForm__attachment",children:[(0,nU.jsx)("img",{src:s,style:{backgroundImage:s},alt:"attachment"}),(0,nU.jsxs)("div",{className:"factoryForm__clear",onClick:function(){u("")},children:[(0,nU.jsx)("span",{children:"Remove"}),(0,nU.jsx)(ki,{icon:dU})]})]})]})},xU=function(e){var t=e.userObj,n=l((0,r.useState)([]),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){eU.collection("noweets").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aU(Object(n),!0).forEach((function(t){Ti(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}))}),[]),(0,nU.jsxs)("div",{className:"container",children:[(0,nU.jsx)(wU,{userObj:t}),(0,nU.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return(0,nU.jsx)(pU,{noweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},TU=function(e){var t=e.refreshUser,n=e.userObj,i=(Te(),l((0,r.useState)(n.displayName),2)),a=i[0],o=i[1],s=function(){var e=ze(qe().mark((function e(r){return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n.displayName===a){e.next=5;break}return e.next=4,n.updateProfile({displayName:a});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,nU.jsxs)("div",{className:"container",children:[(0,nU.jsxs)("form",{onSubmit:s,className:"profileForm",children:[(0,nU.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},type:"text",placeholder:"Display name",value:null!==a&&void 0!==a?a:n.email.split("@")[0],autoFocus:!0,className:"formInput"}),(0,nU.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),(0,nU.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){ZF.signOut()},children:"Log Out"})]})};function IU(){return IU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IU.apply(this,arguments)}function EU(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var SU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function CU(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),U((function(e,t){var n=e.location;return L("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:M(t)}),null,t)));var s=o.current,u=l(r.useState({action:s.action,location:s.location}),2),c=u[0],f=u[1];return r.useLayoutEffect((function(){return s.listen(f)}),[s]),r.createElement(Me,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:s})}var NU=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,f=EU(e,SU),h=function(e,t){var n=(void 0===t?{}:t).relative;we()||R(!1);var i=r.useContext(ge),a=i.basename,o=i.navigator,s=Ie(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:Z([a,c])),o.createHref({pathname:f,search:l,hash:u})}(c,{relative:i}),d=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=Te(),l=xe(),f=Ie(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:M(l)===M(f);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,e,s,u])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return r.createElement("a",IU({},f,{href:h,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:u}))}));var AU,PU;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(AU||(AU={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(PU||(PU={}));var RU=function(e){var t,n,r=e.userObj;return(0,nU.jsx)("nav",{children:(0,nU.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,nU.jsx)("li",{children:(0,nU.jsx)(NU,{to:"Noitter/",style:{marginRight:10},children:(0,nU.jsx)(ki,{icon:xi,color:"#04AAFF",size:"2x"})})}),(0,nU.jsx)("li",{children:(0,nU.jsxs)(NU,{to:"Noitter/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,nU.jsx)(ki,{icon:cU,color:"#04AAFF",size:"2x"}),(0,nU.jsx)("span",{style:{marginTop:10},children:null!==(t=r.displayName)&&void 0!==t?t:"".concat(null!==(n=r.displayName)&&void 0!==n?n:r.email.split("@")[0],"\uc758 Profile")})]})})]})})},OU=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObj;return(0,nU.jsxs)("div",{children:[n&&(0,nU.jsx)(RU,{userObj:r}),(0,nU.jsx)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:(0,nU.jsx)(Fe,{children:n?(0,nU.jsxs)(nU.Fragment,{children:[(0,nU.jsx)(Le,{path:"Noitter/",element:(0,nU.jsx)(xU,{userObj:r})}),(0,nU.jsx)(Le,{path:"Noitter/profile",element:(0,nU.jsx)(TU,{userObj:r,refreshUser:t})})]}):(0,nU.jsx)(Le,{path:"Noitter/",element:(0,nU.jsx)(iU,{})})})})]})};var DU=function(){var e=l((0,r.useState)(!1),2),t=e[0],n=e[1],i=l((0,r.useState)(!1),2),a=i[0],o=i[1],s=l((0,r.useState)(null),2),u=s[0],c=s[1];return(0,r.useEffect)((function(){ZF.onAuthStateChanged((function(e){e?(o(!0),c({displayName:e.displayName,uid:e.uid,email:e.email,updateProfile:function(t){return e.updateProfile(t)}})):(c(null),o(!1)),n(!0)}))}),[]),(0,nU.jsxs)("div",{children:[t?(0,nU.jsx)(OU,{refreshUser:function(){var e=ZF.currentUser;c({displayName:e.displayName,uid:e.uid,email:e.email,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:a,userObj:u}):"Initializing...",(0,nU.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Noitter"]})]})},LU=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function MU(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var FU=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,nU.jsx)(CU,{basename:"/Noitter",children:(0,nU.jsx)(DU,{})})),function(e){if("serviceWorker"in navigator){if(new URL("/Noitter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Noitter","/service-worker.js");LU?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):MU(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):MU(t,e)}))}}(),FU()}()}();
//# sourceMappingURL=main.b52325a0.js.map